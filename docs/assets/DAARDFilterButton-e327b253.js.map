{"version":3,"file":"DAARDFilterButton-e327b253.js","sources":["../../components/contrib/DAARDFilterButton/DAARDFilterButton.js"],"sourcesContent":["import { emitCustomEvent, renderMarkupAndSetPluginReady } from '../../core/helper.js'\nimport {featureLayersGroup, map, view} from '../../core/mapSetup/mapSetup.js'\n\nimport Alpine from 'alpinejs';\nimport feather from 'feather-icons';\nimport { fromLonLat } from 'ol/proj.js';\n\nconst createMarkup = () => {\n    // define plugin html markup\n    const buttonHtml = `\n        <div class=\"mx-1\" id=\"DAARDFilterButtonNav\" :class=\"'order-'+$store.DAARDFilterButton.buttonDomOrder\">\n            <button type=\"button\" \n                class=\"btn btn-danger btn-sm btn-circle\" \n                x-tooltip.placement.left=\"'Filter disease cases'\"\n                @click=\"$store.DAARDFilterButton.openFilter()\"\n                :class=\"$store.DAARDFilterButton.componentIsActive ? 'bg-danger' : 'btn-light'\">\n                <i data-feather=\"filter\" class=\"size-16\"></i>\n            </button>\n        </div>\n        `;\n\n    // insert the plugin markup where we need it\n    var rightMiddleSlot = document.getElementById('rightMiddleSlot');\n    rightMiddleSlot.insertAdjacentHTML('beforeend', buttonHtml);\n}\n\n\n// create a plugin store by use of alpinejs â€“ name the store like the folder of your plugin\nconst initialize = async (buttonDomOrder) => {\n    \n    Alpine.store('DAARDFilterButton', {\n        componentIsActive: false,\n        buttonDomOrder: buttonDomOrder,\n        closeComponent: function () {\n            console.log(\"catched\")\n            this.componentIsActive = false;\n            Alpine.store('geonodeCustomLayerFilter').componentIsActive = false;\n\n        },\n        openFilter: function() {\n            this.componentIsActive = !this.componentIsActive;\n\n            console.log(\"group is\")\n            console.log(featureLayersGroup.getLayers())\n\n\n            const layer = featureLayersGroup.getLayers().getArray()[0];\n            const source = layer.getSource();\n            source.mapName = layer.get('name');\n            source.dataset = layer.get('dataset');\n\n            if (this.componentIsActive){\n                emitCustomEvent('filterPushed', {\"instance\": source})\n                console.log(\"source is\", source.mapName,  source.dataset )\n            } else {\n                Alpine.store('geonodeCustomLayerFilter').componentIsActive = false;\n            }\n\n        }\n    });\n\n    \n    document.addEventListener('geonodeCustomLayerFilterClosed', function (event) {\n        console.debug('Custom event \"geonodeCustomLayerFilterClosed\" caught.');\n        Alpine.store('DAARDFilterButton').closeComponent();\n      });\n\n    // [function name that creates the DOM Element, Element to check for presence}\n    const domElementsToCreate = [\n        [createMarkup, '#DAARDFilterButtonNav'],\n    ]\n\n    // this function tirggers the rendering and tells main.js that initialization is finished\n    renderMarkupAndSetPluginReady(domElementsToCreate)\n\n};\n\n\nexport { initialize };\n"],"names":["createMarkup","buttonHtml","rightMiddleSlot","initialize","buttonDomOrder","Alpine","featureLayersGroup","layer","source","emitCustomEvent","event","renderMarkupAndSetPluginReady"],"mappings":"2FAOA,MAAMA,EAAe,IAAM,CAEvB,MAAMC,EAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAanB,IAAIC,EAAkB,SAAS,eAAe,iBAAiB,EAC/DA,EAAgB,mBAAmB,YAAaD,CAAU,CAC9D,EAIME,EAAa,MAAOC,GAAmB,CAEzCC,EAAO,MAAM,oBAAqB,CAC9B,kBAAmB,GACnB,eAAgBD,EAChB,eAAgB,UAAY,CACxB,QAAQ,IAAI,SAAS,EACrB,KAAK,kBAAoB,GACzBC,EAAO,MAAM,0BAA0B,EAAE,kBAAoB,EAEhE,EACD,WAAY,UAAW,CACnB,KAAK,kBAAoB,CAAC,KAAK,kBAE/B,QAAQ,IAAI,UAAU,EACtB,QAAQ,IAAIC,EAAmB,WAAW,EAG1C,MAAMC,EAAQD,EAAmB,UAAW,EAAC,SAAQ,EAAG,CAAC,EACnDE,EAASD,EAAM,YACrBC,EAAO,QAAUD,EAAM,IAAI,MAAM,EACjCC,EAAO,QAAUD,EAAM,IAAI,SAAS,EAEhC,KAAK,mBACLE,EAAgB,eAAgB,CAAC,SAAYD,CAAM,CAAC,EACpD,QAAQ,IAAI,YAAaA,EAAO,QAAUA,EAAO,OAAS,GAE1DH,EAAO,MAAM,0BAA0B,EAAE,kBAAoB,EAGpE,CACT,CAAK,EAGD,SAAS,iBAAiB,iCAAkC,SAAUK,EAAO,CACzE,QAAQ,MAAM,uDAAuD,EACrEL,EAAO,MAAM,mBAAmB,EAAE,eAAc,CACxD,CAAO,EAQHM,EAL4B,CACxB,CAACX,EAAc,uBAAuB,CACzC,CAGgD,CAErD"}