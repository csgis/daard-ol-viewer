{"version":3,"file":"backgroundSwitcher-a3f36cd2.js","sources":["../../components/core/backgroundSwitcher/backgroundSwitcher.js"],"sourcesContent":["import './backgroundSwticher.css'\n\nimport Alpine from 'alpinejs';\nimport { basemapLayers } from '../mapSetup/mapSetup';\nimport { renderMarkupAndSetPluginReady } from '../helper.js'\n\nconst createMarkup = () => {\n  const backgroundSwitcherHtml = `\n    <div \n      id=\"backgroundSwticher\"\n      class=\"position-absolute bottom-0 start-0 ms-2 mb-2 d-flex\" \n      x-data=\"{ showAll: false }\"\n      data-bs-toggle=\"tooltip\" \n      data-bs-placement=\"top\" \n      title=\"Choose Background\"\n    >\n      <template x-for=\"(item, index) in $store.backgroundSwitcher.background\" :key=\"item.id\">\n        <div \n          class=\"border m-1\" \n          x-show=\"$store.backgroundSwitcher.shouldShow(index)\" \n          x-transition\n        >\n          <a \n            type=\"button\" \n            class=\"btn btn-secondary btn-sm p-0 borde border-light border-5 backgroundSwitcher-item\"\n            :id=\"item.id\" \n            @click=\"$store.backgroundSwitcher.handleItemClick(item, index)\"\n          >\n            <img class=\"bgs-img\" :src=\"item.img\">\n          </a> \n        </div>\n      </template>\n    </div>\n  `;\n\n  // insert the plugin markup where we need it\n  var mapDIV = document.getElementById('map');\n  mapDIV.insertAdjacentHTML('afterend', backgroundSwitcherHtml);\n}\n\nconst initialize = (map, view) => {\n  \n  // Extracting relevant information from basemapLayers for Alpine store\n  const backgroundSwitcherData = basemapLayers.map(layer => ({\n    id: layer.get('id'),\n    img: layer.get('img'),\n  }));\n\n  Alpine.store('backgroundSwitcher', {\n    showAll: false,\n    shouldShow: function(index) {\n      return index === 0 || this.showAll;\n    },\n    setBasemap: function(clickedLayerId) {\n      basemapLayers.forEach(layer => {\n        layer.setVisible(layer.get('id') === clickedLayerId);\n      });\n    },\n    handleItemClick: function(clickedItem, index){\n      if (index !== 0) {\n        console.log(this.background)\n        const itemIndex = this.background.indexOf(clickedItem);\n        if (itemIndex !== -1) {\n          this.background.splice(itemIndex, 1); \n          this.background.unshift(clickedItem); \n          this.setBasemap(clickedItem.id); \n        }\n      }\n      this.showAll = !this.showAll;\n    },\n    toggleVisibility: function(){\n      this.showAll = !this.showAll;\n    },\n    background: backgroundSwitcherData,\n  });\n\n\n  const domElementsToCreate = [\n    [createMarkup, '#backgroundSwticher'],\n  ]\n  renderMarkupAndSetPluginReady(domElementsToCreate)\n\n};\n\nexport { initialize };\n"],"names":["createMarkup","backgroundSwitcherHtml","mapDIV","initialize","map","view","backgroundSwitcherData","basemapLayers","layer","Alpine","index","clickedLayerId","clickedItem","itemIndex","renderMarkupAndSetPluginReady"],"mappings":"sDAMA,MAAMA,EAAe,IAAM,CACzB,MAAMC,EAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA6B/B,IAAIC,EAAS,SAAS,eAAe,KAAK,EAC1CA,EAAO,mBAAmB,WAAYD,CAAsB,CAC9D,EAEME,EAAa,CAACC,EAAKC,IAAS,CAGhC,MAAMC,EAAyBC,EAAc,IAAIC,IAAU,CACzD,GAAIA,EAAM,IAAI,IAAI,EAClB,IAAKA,EAAM,IAAI,KAAK,CACrB,EAAC,EAEFC,EAAO,MAAM,qBAAsB,CACjC,QAAS,GACT,WAAY,SAASC,EAAO,CAC1B,OAAOA,IAAU,GAAK,KAAK,OAC5B,EACD,WAAY,SAASC,EAAgB,CACnCJ,EAAc,QAAQC,GAAS,CAC7BA,EAAM,WAAWA,EAAM,IAAI,IAAI,IAAMG,CAAc,CAC3D,CAAO,CACF,EACD,gBAAiB,SAASC,EAAaF,EAAM,CAC3C,GAAIA,IAAU,EAAG,CACf,QAAQ,IAAI,KAAK,UAAU,EAC3B,MAAMG,EAAY,KAAK,WAAW,QAAQD,CAAW,EACjDC,IAAc,KAChB,KAAK,WAAW,OAAOA,EAAW,CAAC,EACnC,KAAK,WAAW,QAAQD,CAAW,EACnC,KAAK,WAAWA,EAAY,EAAE,EAEjC,CACD,KAAK,QAAU,CAAC,KAAK,OACtB,EACD,iBAAkB,UAAU,CAC1B,KAAK,QAAU,CAAC,KAAK,OACtB,EACD,WAAYN,CAChB,CAAG,EAMDQ,EAH4B,CAC1B,CAACd,EAAc,qBAAqB,CACrC,CACgD,CAEnD"}