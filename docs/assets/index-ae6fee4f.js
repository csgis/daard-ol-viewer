(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var No=!1,Go=!1,Nn=[],jo=-1;function Ad(i){Ld(i)}function Ld(i){Nn.includes(i)||Nn.push(i),Md()}function Jc(i){let t=Nn.indexOf(i);t!==-1&&t>jo&&Nn.splice(t,1)}function Md(){!Go&&!No&&(No=!0,queueMicrotask(Pd))}function Pd(){No=!1,Go=!0;for(let i=0;i<Nn.length;i++)Nn[i](),jo=i;Nn.length=0,jo=-1,Go=!1}var yr,Un,vr,Qc,Wo=!0;function Dd(i){Wo=!1,i(),Wo=!0}function Fd(i){yr=i.reactive,vr=i.release,Un=t=>i.effect(t,{scheduler:e=>{Wo?Ad(e):e()}}),Qc=i.raw}function jl(i){Un=i}function kd(i){let t=()=>{};return[n=>{let r=Un(n);return i._x_effects||(i._x_effects=new Set,i._x_runEffects=()=>{i._x_effects.forEach(s=>s())}),i._x_effects.add(r),t=()=>{r!==void 0&&(i._x_effects.delete(r),vr(r))},r},()=>{t()}]}function th(i,t){let e=!0,n,r=Un(()=>{let s=i();JSON.stringify(s),e?n=s:queueMicrotask(()=>{t(s,n),n=s}),e=!1});return()=>vr(r)}function Dr(i,t,e={}){i.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,composed:!0,cancelable:!0}))}function pn(i,t){if(typeof ShadowRoot=="function"&&i instanceof ShadowRoot){Array.from(i.children).forEach(r=>pn(r,t));return}let e=!1;if(t(i,()=>e=!0),e)return;let n=i.firstElementChild;for(;n;)pn(n,t),n=n.nextElementSibling}function Gi(i,...t){console.warn(`Alpine Warning: ${i}`,...t)}var Wl=!1;function Nd(){Wl&&Gi("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Wl=!0,document.body||Gi("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Dr(document,"alpine:init"),Dr(document,"alpine:initializing"),Ia(),Wd(t=>ji(t,pn)),Ra(t=>ba(t)),hh((t,e)=>{Ma(t,e).forEach(n=>n())});let i=t=>!Hs(t.parentElement,!0);Array.from(document.querySelectorAll(nh().join(","))).filter(i).forEach(t=>{ji(t)}),Dr(document,"alpine:initialized")}var wa=[],eh=[];function ih(){return wa.map(i=>i())}function nh(){return wa.concat(eh).map(i=>i())}function rh(i){wa.push(i)}function sh(i){eh.push(i)}function Hs(i,t=!1){return Zs(i,e=>{if((t?nh():ih()).some(r=>e.matches(r)))return!0})}function Zs(i,t){if(i){if(t(i))return i;if(i._x_teleportBack&&(i=i._x_teleportBack),!!i.parentElement)return Zs(i.parentElement,t)}}function Gd(i){return ih().some(t=>i.matches(t))}var oh=[];function jd(i){oh.push(i)}function ji(i,t=pn,e=()=>{}){tf(()=>{t(i,(n,r)=>{e(n,r),oh.forEach(s=>s(n,r)),Ma(n,n.attributes).forEach(s=>s()),n._x_ignore&&r()})})}function ba(i){pn(i,t=>{dh(t),Xd(t)})}var ah=[],lh=[],ch=[];function Wd(i){ch.push(i)}function Ra(i,t){typeof t=="function"?(i._x_cleanups||(i._x_cleanups=[]),i._x_cleanups.push(t)):(t=i,lh.push(t))}function hh(i){ah.push(i)}function uh(i,t,e){i._x_attributeCleanups||(i._x_attributeCleanups={}),i._x_attributeCleanups[t]||(i._x_attributeCleanups[t]=[]),i._x_attributeCleanups[t].push(e)}function dh(i,t){i._x_attributeCleanups&&Object.entries(i._x_attributeCleanups).forEach(([e,n])=>{(t===void 0||t.includes(e))&&(n.forEach(r=>r()),delete i._x_attributeCleanups[e])})}function Xd(i){if(i._x_cleanups)for(;i._x_cleanups.length;)i._x_cleanups.pop()()}var Ta=new MutationObserver(Aa),Sa=!1;function Ia(){Ta.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Sa=!0}function fh(){zd(),Ta.disconnect(),Sa=!1}var Tr=[];function zd(){let i=Ta.takeRecords();Tr.push(()=>i.length>0&&Aa(i));let t=Tr.length;queueMicrotask(()=>{if(Tr.length===t)for(;Tr.length>0;)Tr.shift()()})}function xe(i){if(!Sa)return i();fh();let t=i();return Ia(),t}var Oa=!1,As=[];function Bd(){Oa=!0}function Yd(){Oa=!1,Aa(As),As=[]}function Aa(i){if(Oa){As=As.concat(i);return}let t=new Set,e=new Set,n=new Map,r=new Map;for(let s=0;s<i.length;s++)if(!i[s].target._x_ignoreMutationObserver&&(i[s].type==="childList"&&(i[s].addedNodes.forEach(o=>o.nodeType===1&&t.add(o)),i[s].removedNodes.forEach(o=>o.nodeType===1&&e.add(o))),i[s].type==="attributes")){let o=i[s].target,a=i[s].attributeName,l=i[s].oldValue,c=()=>{n.has(o)||n.set(o,[]),n.get(o).push({name:a,value:o.getAttribute(a)})},h=()=>{r.has(o)||r.set(o,[]),r.get(o).push(a)};o.hasAttribute(a)&&l===null?c():o.hasAttribute(a)?(h(),c()):h()}r.forEach((s,o)=>{dh(o,s)}),n.forEach((s,o)=>{ah.forEach(a=>a(o,s))});for(let s of e)t.has(s)||(lh.forEach(o=>o(s)),ba(s));t.forEach(s=>{s._x_ignoreSelf=!0,s._x_ignore=!0});for(let s of t)s.isConnected&&(delete s._x_ignoreSelf,delete s._x_ignore,ch.forEach(o=>o(s)),s._x_ignore=!0,s._x_ignoreSelf=!0);t.forEach(s=>{delete s._x_ignoreSelf,delete s._x_ignore}),t=null,e=null,n=null,r=null}function gh(i){return Jr(dr(i))}function qr(i,t,e){return i._x_dataStack=[t,...dr(e||i)],()=>{i._x_dataStack=i._x_dataStack.filter(n=>n!==t)}}function dr(i){return i._x_dataStack?i._x_dataStack:typeof ShadowRoot=="function"&&i instanceof ShadowRoot?dr(i.host):i.parentNode?dr(i.parentNode):[]}function Jr(i){return new Proxy({objects:i},Vd)}var Vd={ownKeys({objects:i}){return Array.from(new Set(i.flatMap(t=>Object.keys(t))))},has({objects:i},t){return t==Symbol.unscopables?!1:i.some(e=>Object.prototype.hasOwnProperty.call(e,t))},get({objects:i},t,e){return t=="toJSON"?Ud:Reflect.get(i.find(n=>Object.prototype.hasOwnProperty.call(n,t))||{},t,e)},set({objects:i},t,e,n){const r=i.find(o=>Object.prototype.hasOwnProperty.call(o,t))||i[i.length-1],s=Object.getOwnPropertyDescriptor(r,t);return s!=null&&s.set&&(s!=null&&s.get)?Reflect.set(r,t,e,n):Reflect.set(r,t,e)}};function Ud(){return Reflect.ownKeys(this).reduce((t,e)=>(t[e]=Reflect.get(this,e),t),{})}function _h(i){let t=n=>typeof n=="object"&&!Array.isArray(n)&&n!==null,e=(n,r="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([s,{value:o,enumerable:a}])=>{if(a===!1||o===void 0)return;let l=r===""?s:`${r}.${s}`;typeof o=="object"&&o!==null&&o._x_interceptor?n[s]=o.initialize(i,l,s):t(o)&&o!==n&&!(o instanceof Element)&&e(o,l)})};return e(i)}function ph(i,t=()=>{}){let e={initialValue:void 0,_x_interceptor:!0,initialize(n,r,s){return i(this.initialValue,()=>Kd(n,r),o=>Xo(n,r,o),r,s)}};return t(e),n=>{if(typeof n=="object"&&n!==null&&n._x_interceptor){let r=e.initialize.bind(e);e.initialize=(s,o,a)=>{let l=n.initialize(s,o,a);return e.initialValue=l,r(s,o,a)}}else e.initialValue=n;return e}}function Kd(i,t){return t.split(".").reduce((e,n)=>e[n],i)}function Xo(i,t,e){if(typeof t=="string"&&(t=t.split(".")),t.length===1)i[t[0]]=e;else{if(t.length===0)throw error;return i[t[0]]||(i[t[0]]={}),Xo(i[t[0]],t.slice(1),e)}}var mh={};function oi(i,t){mh[i]=t}function zo(i,t){return Object.entries(mh).forEach(([e,n])=>{let r=null;function s(){if(r)return r;{let[o,a]=wh(t);return r={interceptor:ph,...o},Ra(t,a),r}}Object.defineProperty(i,`$${e}`,{get(){return n(t,s())},enumerable:!1})}),i}function $d(i,t,e,...n){try{return e(...n)}catch(r){Gr(r,i,t)}}function Gr(i,t,e=void 0){i=Object.assign(i??{message:"No error message given."},{el:t,expression:e}),console.warn(`Alpine Expression Error: ${i.message}

${e?'Expression: "'+e+`"

`:""}`,t),setTimeout(()=>{throw i},0)}var Ss=!0;function yh(i){let t=Ss;Ss=!1;let e=i();return Ss=t,e}function Gn(i,t,e={}){let n;return Ne(i,t)(r=>n=r,e),n}function Ne(...i){return vh(...i)}var vh=xh;function Hd(i){vh=i}function xh(i,t){let e={};zo(e,i);let n=[e,...dr(i)],r=typeof t=="function"?Zd(n,t):Jd(n,t,i);return $d.bind(null,i,t,r)}function Zd(i,t){return(e=()=>{},{scope:n={},params:r=[]}={})=>{let s=t.apply(Jr([n,...i]),r);Ls(e,s)}}var yo={};function qd(i,t){if(yo[i])return yo[i];let e=Object.getPrototypeOf(async function(){}).constructor,n=/^[\n\s]*if.*\(.*\)/.test(i.trim())||/^(let|const)\s/.test(i.trim())?`(async()=>{ ${i} })()`:i,s=(()=>{try{let o=new e(["__self","scope"],`with (scope) { __self.result = ${n} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${i}`}),o}catch(o){return Gr(o,t,i),Promise.resolve()}})();return yo[i]=s,s}function Jd(i,t,e){let n=qd(t,e);return(r=()=>{},{scope:s={},params:o=[]}={})=>{n.result=void 0,n.finished=!1;let a=Jr([s,...i]);if(typeof n=="function"){let l=n(n,a).catch(c=>Gr(c,e,t));n.finished?(Ls(r,n.result,a,o,e),n.result=void 0):l.then(c=>{Ls(r,c,a,o,e)}).catch(c=>Gr(c,e,t)).finally(()=>n.result=void 0)}}}function Ls(i,t,e,n,r){if(Ss&&typeof t=="function"){let s=t.apply(e,n);s instanceof Promise?s.then(o=>Ls(i,o,e,n)).catch(o=>Gr(o,r,t)):i(s)}else typeof t=="object"&&t instanceof Promise?t.then(s=>i(s)):i(t)}var La="x-";function xr(i=""){return La+i}function Qd(i){La=i}var Bo={};function he(i,t){return Bo[i]=t,{before(e){if(!Bo[e]){console.warn(String.raw`Cannot find directive \`${e}\`. \`${i}\` will use the default order of execution`);return}const n=Pn.indexOf(e);Pn.splice(n>=0?n:Pn.indexOf("DEFAULT"),0,i)}}}function Ma(i,t,e){if(t=Array.from(t),i._x_virtualDirectives){let s=Object.entries(i._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=Eh(s);s=s.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),t=t.concat(s)}let n={};return t.map(Th((s,o)=>n[s]=o)).filter(Ih).map(nf(n,e)).sort(rf).map(s=>ef(i,s))}function Eh(i){return Array.from(i).map(Th()).filter(t=>!Ih(t))}var Yo=!1,Lr=new Map,Ch=Symbol();function tf(i){Yo=!0;let t=Symbol();Ch=t,Lr.set(t,[]);let e=()=>{for(;Lr.get(t).length;)Lr.get(t).shift()();Lr.delete(t)},n=()=>{Yo=!1,e()};i(e),n()}function wh(i){let t=[],e=a=>t.push(a),[n,r]=kd(i);return t.push(r),[{Alpine:ts,effect:n,cleanup:e,evaluateLater:Ne.bind(Ne,i),evaluate:Gn.bind(Gn,i)},()=>t.forEach(a=>a())]}function ef(i,t){let e=()=>{},n=Bo[t.type]||e,[r,s]=wh(i);uh(i,t.original,s);let o=()=>{i._x_ignore||i._x_ignoreSelf||(n.inline&&n.inline(i,t,r),n=n.bind(n,i,t,r),Yo?Lr.get(Ch).push(n):n())};return o.runCleanups=s,o}var bh=(i,t)=>({name:e,value:n})=>(e.startsWith(i)&&(e=e.replace(i,t)),{name:e,value:n}),Rh=i=>i;function Th(i=()=>{}){return({name:t,value:e})=>{let{name:n,value:r}=Sh.reduce((s,o)=>o(s),{name:t,value:e});return n!==t&&i(n,t),{name:n,value:r}}}var Sh=[];function Pa(i){Sh.push(i)}function Ih({name:i}){return Oh().test(i)}var Oh=()=>new RegExp(`^${La}([^:^.]+)\\b`);function nf(i,t){return({name:e,value:n})=>{let r=e.match(Oh()),s=e.match(/:([a-zA-Z0-9\-_:]+)/),o=e.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=t||i[e]||e;return{type:r?r[1]:null,value:s?s[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:n,original:a}}}var Vo="DEFAULT",Pn=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Vo,"teleport"];function rf(i,t){let e=Pn.indexOf(i.type)===-1?Vo:i.type,n=Pn.indexOf(t.type)===-1?Vo:t.type;return Pn.indexOf(e)-Pn.indexOf(n)}var Uo=[],Da=!1;function Fa(i=()=>{}){return queueMicrotask(()=>{Da||setTimeout(()=>{Ko()})}),new Promise(t=>{Uo.push(()=>{i(),t()})})}function Ko(){for(Da=!1;Uo.length;)Uo.shift()()}function sf(){Da=!0}function ka(i,t){return Array.isArray(t)?Xl(i,t.join(" ")):typeof t=="object"&&t!==null?of(i,t):typeof t=="function"?ka(i,t()):Xl(i,t)}function Xl(i,t){let e=r=>r.split(" ").filter(s=>!i.classList.contains(s)).filter(Boolean),n=r=>(i.classList.add(...r),()=>{i.classList.remove(...r)});return t=t===!0?t="":t||"",n(e(t))}function of(i,t){let e=a=>a.split(" ").filter(Boolean),n=Object.entries(t).flatMap(([a,l])=>l?e(a):!1).filter(Boolean),r=Object.entries(t).flatMap(([a,l])=>l?!1:e(a)).filter(Boolean),s=[],o=[];return r.forEach(a=>{i.classList.contains(a)&&(i.classList.remove(a),o.push(a))}),n.forEach(a=>{i.classList.contains(a)||(i.classList.add(a),s.push(a))}),()=>{o.forEach(a=>i.classList.add(a)),s.forEach(a=>i.classList.remove(a))}}function qs(i,t){return typeof t=="object"&&t!==null?af(i,t):lf(i,t)}function af(i,t){let e={};return Object.entries(t).forEach(([n,r])=>{e[n]=i.style[n],n.startsWith("--")||(n=cf(n)),i.style.setProperty(n,r)}),setTimeout(()=>{i.style.length===0&&i.removeAttribute("style")}),()=>{qs(i,e)}}function lf(i,t){let e=i.getAttribute("style",t);return i.setAttribute("style",t),()=>{i.setAttribute("style",e||"")}}function cf(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $o(i,t=()=>{}){let e=!1;return function(){e?t.apply(this,arguments):(e=!0,i.apply(this,arguments))}}he("transition",(i,{value:t,modifiers:e,expression:n},{evaluate:r})=>{typeof n=="function"&&(n=r(n)),n!==!1&&(!n||typeof n=="boolean"?uf(i,e,t):hf(i,n,t))});function hf(i,t,e){Ah(i,ka,""),{enter:r=>{i._x_transition.enter.during=r},"enter-start":r=>{i._x_transition.enter.start=r},"enter-end":r=>{i._x_transition.enter.end=r},leave:r=>{i._x_transition.leave.during=r},"leave-start":r=>{i._x_transition.leave.start=r},"leave-end":r=>{i._x_transition.leave.end=r}}[e](t)}function uf(i,t,e){Ah(i,qs);let n=!t.includes("in")&&!t.includes("out")&&!e,r=n||t.includes("in")||["enter"].includes(e),s=n||t.includes("out")||["leave"].includes(e);t.includes("in")&&!n&&(t=t.filter((x,C)=>C<t.indexOf("out"))),t.includes("out")&&!n&&(t=t.filter((x,C)=>C>t.indexOf("out")));let o=!t.includes("opacity")&&!t.includes("scale"),a=o||t.includes("opacity"),l=o||t.includes("scale"),c=a?0:1,h=l?Sr(t,"scale",95)/100:1,u=Sr(t,"delay",0)/1e3,d=Sr(t,"origin","center"),f="opacity, transform",_=Sr(t,"duration",150)/1e3,y=Sr(t,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";r&&(i._x_transition.enter.during={transformOrigin:d,transitionDelay:`${u}s`,transitionProperty:f,transitionDuration:`${_}s`,transitionTimingFunction:m},i._x_transition.enter.start={opacity:c,transform:`scale(${h})`},i._x_transition.enter.end={opacity:1,transform:"scale(1)"}),s&&(i._x_transition.leave.during={transformOrigin:d,transitionDelay:`${u}s`,transitionProperty:f,transitionDuration:`${y}s`,transitionTimingFunction:m},i._x_transition.leave.start={opacity:1,transform:"scale(1)"},i._x_transition.leave.end={opacity:c,transform:`scale(${h})`})}function Ah(i,t,e={}){i._x_transition||(i._x_transition={enter:{during:e,start:e,end:e},leave:{during:e,start:e,end:e},in(n=()=>{},r=()=>{}){Ho(i,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,r)},out(n=()=>{},r=()=>{}){Ho(i,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,r)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(i,t,e,n){const r=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let s=()=>r(e);if(t){i._x_transition&&(i._x_transition.enter||i._x_transition.leave)?i._x_transition.enter&&(Object.entries(i._x_transition.enter.during).length||Object.entries(i._x_transition.enter.start).length||Object.entries(i._x_transition.enter.end).length)?i._x_transition.in(e):s():i._x_transition?i._x_transition.in(e):s();return}i._x_hidePromise=i._x_transition?new Promise((o,a)=>{i._x_transition.out(()=>{},()=>o(n)),i._x_transitioning&&i._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(n),queueMicrotask(()=>{let o=Lh(i);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(i)):r(()=>{let a=l=>{let c=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([h])=>h());return delete l._x_hidePromise,delete l._x_hideChildren,c};a(i).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function Lh(i){let t=i.parentNode;if(t)return t._x_hidePromise?t:Lh(t)}function Ho(i,t,{during:e,start:n,end:r}={},s=()=>{},o=()=>{}){if(i._x_transitioning&&i._x_transitioning.cancel(),Object.keys(e).length===0&&Object.keys(n).length===0&&Object.keys(r).length===0){s(),o();return}let a,l,c;df(i,{start(){a=t(i,n)},during(){l=t(i,e)},before:s,end(){a(),c=t(i,r)},after:o,cleanup(){l(),c()}})}function df(i,t){let e,n,r,s=$o(()=>{xe(()=>{e=!0,n||t.before(),r||(t.end(),Ko()),t.after(),i.isConnected&&t.cleanup(),delete i._x_transitioning})});i._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:$o(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()}),finish:s},xe(()=>{t.start(),t.during()}),sf(),requestAnimationFrame(()=>{if(e)return;let o=Number(getComputedStyle(i).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(i).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(i).animationDuration.replace("s",""))*1e3),xe(()=>{t.before()}),n=!0,requestAnimationFrame(()=>{e||(xe(()=>{t.end()}),Ko(),setTimeout(i._x_transitioning.finish,o+a),r=!0)})})}function Sr(i,t,e){if(i.indexOf(t)===-1)return e;const n=i[i.indexOf(t)+1];if(!n||t==="scale"&&isNaN(n))return e;if(t==="duration"||t==="delay"){let r=n.match(/([0-9]+)ms/);if(r)return r[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(i[i.indexOf(t)+2])?[n,i[i.indexOf(t)+2]].join(" "):n}var mn=!1;function Qr(i,t=()=>{}){return(...e)=>mn?t(...e):i(...e)}function ff(i){return(...t)=>mn&&i(...t)}var Mh=[];function Js(i){Mh.push(i)}function gf(i,t){Mh.forEach(e=>e(i,t)),mn=!0,Ph(()=>{ji(t,(e,n)=>{n(e,()=>{})})}),mn=!1}var Zo=!1;function _f(i,t){t._x_dataStack||(t._x_dataStack=i._x_dataStack),mn=!0,Zo=!0,Ph(()=>{pf(t)}),mn=!1,Zo=!1}function pf(i){let t=!1;ji(i,(n,r)=>{pn(n,(s,o)=>{if(t&&Gd(s))return o();t=!0,r(s,o)})})}function Ph(i){let t=Un;jl((e,n)=>{let r=t(e);return vr(r),()=>{}}),i(),jl(t)}function Dh(i,t,e,n=[]){switch(i._x_bindings||(i._x_bindings=yr({})),i._x_bindings[t]=e,t=n.includes("camel")?bf(t):t,t){case"value":mf(i,e);break;case"style":vf(i,e);break;case"class":yf(i,e);break;case"selected":case"checked":xf(i,t,e);break;default:Fh(i,t,e);break}}function mf(i,t){if(i.type==="radio")i.attributes.value===void 0&&(i.value=t),window.fromModel&&(typeof t=="boolean"?i.checked=Is(i.value)===t:i.checked=zl(i.value,t));else if(i.type==="checkbox")Number.isInteger(t)?i.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?i.value=String(t):Array.isArray(t)?i.checked=t.some(e=>zl(e,i.value)):i.checked=!!t;else if(i.tagName==="SELECT")wf(i,t);else{if(i.value===t)return;i.value=t===void 0?"":t}}function yf(i,t){i._x_undoAddedClasses&&i._x_undoAddedClasses(),i._x_undoAddedClasses=ka(i,t)}function vf(i,t){i._x_undoAddedStyles&&i._x_undoAddedStyles(),i._x_undoAddedStyles=qs(i,t)}function xf(i,t,e){Fh(i,t,e),Cf(i,t,e)}function Fh(i,t,e){[null,void 0,!1].includes(e)&&Rf(t)?i.removeAttribute(t):(kh(t)&&(e=t),Ef(i,t,e))}function Ef(i,t,e){i.getAttribute(t)!=e&&i.setAttribute(t,e)}function Cf(i,t,e){i[t]!==e&&(i[t]=e)}function wf(i,t){const e=[].concat(t).map(n=>n+"");Array.from(i.options).forEach(n=>{n.selected=e.includes(n.value)})}function bf(i){return i.toLowerCase().replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function zl(i,t){return i==t}function Is(i){return[1,"1","true","on","yes",!0].includes(i)?!0:[0,"0","false","off","no",!1].includes(i)?!1:i?!!i:null}function kh(i){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(i)}function Rf(i){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(i)}function Tf(i,t,e){return i._x_bindings&&i._x_bindings[t]!==void 0?i._x_bindings[t]:Nh(i,t,e)}function Sf(i,t,e,n=!0){if(i._x_bindings&&i._x_bindings[t]!==void 0)return i._x_bindings[t];if(i._x_inlineBindings&&i._x_inlineBindings[t]!==void 0){let r=i._x_inlineBindings[t];return r.extract=n,yh(()=>Gn(i,r.expression))}return Nh(i,t,e)}function Nh(i,t,e){let n=i.getAttribute(t);return n===null?typeof e=="function"?e():e:n===""?!0:kh(t)?!![t,"true"].includes(n):n}function Gh(i,t){var e;return function(){var n=this,r=arguments,s=function(){e=null,i.apply(n,r)};clearTimeout(e),e=setTimeout(s,t)}}function jh(i,t){let e;return function(){let n=this,r=arguments;e||(i.apply(n,r),e=!0,setTimeout(()=>e=!1,t))}}function Wh({get:i,set:t},{get:e,set:n}){let r=!0,s,o=Un(()=>{const a=i(),l=e();if(r)n(vo(a)),r=!1,s=JSON.stringify(a);else{const c=JSON.stringify(a);c!==s?(n(vo(a)),s=c):(t(vo(l)),s=JSON.stringify(l))}JSON.stringify(e()),JSON.stringify(i())});return()=>{vr(o)}}function vo(i){return typeof i=="object"?JSON.parse(JSON.stringify(i)):i}function If(i){(Array.isArray(i)?i:[i]).forEach(e=>e(ts))}var Ln={},Bl=!1;function Of(i,t){if(Bl||(Ln=yr(Ln),Bl=!0),t===void 0)return Ln[i];Ln[i]=t,typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&Ln[i].init(),_h(Ln[i])}function Af(){return Ln}var Xh={};function Lf(i,t){let e=typeof t!="function"?()=>t:t;return i instanceof Element?zh(i,e()):(Xh[i]=e,()=>{})}function Mf(i){return Object.entries(Xh).forEach(([t,e])=>{Object.defineProperty(i,t,{get(){return(...n)=>e(...n)}})}),i}function zh(i,t,e){let n=[];for(;n.length;)n.pop()();let r=Object.entries(t).map(([o,a])=>({name:o,value:a})),s=Eh(r);return r=r.map(o=>s.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Ma(i,r,e).map(o=>{n.push(o.runCleanups),o()}),()=>{for(;n.length;)n.pop()()}}var Bh={};function Pf(i,t){Bh[i]=t}function Df(i,t){return Object.entries(Bh).forEach(([e,n])=>{Object.defineProperty(i,e,{get(){return(...r)=>n.bind(t)(...r)},enumerable:!1})}),i}var Ff={get reactive(){return yr},get release(){return vr},get effect(){return Un},get raw(){return Qc},version:"3.13.4",flushAndStopDeferringMutations:Yd,dontAutoEvaluateFunctions:yh,disableEffectScheduling:Dd,startObservingMutations:Ia,stopObservingMutations:fh,setReactivityEngine:Fd,onAttributeRemoved:uh,onAttributesAdded:hh,closestDataStack:dr,skipDuringClone:Qr,onlyDuringClone:ff,addRootSelector:rh,addInitSelector:sh,interceptClone:Js,addScopeToNode:qr,deferMutations:Bd,mapAttributes:Pa,evaluateLater:Ne,interceptInit:jd,setEvaluator:Hd,mergeProxies:Jr,extractProp:Sf,findClosest:Zs,onElRemoved:Ra,closestRoot:Hs,destroyTree:ba,interceptor:ph,transition:Ho,setStyles:qs,mutateDom:xe,directive:he,entangle:Wh,throttle:jh,debounce:Gh,evaluate:Gn,initTree:ji,nextTick:Fa,prefixed:xr,prefix:Qd,plugin:If,magic:oi,store:Of,start:Nd,clone:_f,cloneNode:gf,bound:Tf,$data:gh,watch:th,walk:pn,data:Pf,bind:Lf},ts=Ff;function kf(i,t){const e=Object.create(null),n=i.split(",");for(let r=0;r<n.length;r++)e[n[r]]=!0;return t?r=>!!e[r.toLowerCase()]:r=>!!e[r]}var Nf=Object.freeze({}),Gf=Object.prototype.hasOwnProperty,Qs=(i,t)=>Gf.call(i,t),jn=Array.isArray,Fr=i=>Yh(i)==="[object Map]",jf=i=>typeof i=="string",Na=i=>typeof i=="symbol",to=i=>i!==null&&typeof i=="object",Wf=Object.prototype.toString,Yh=i=>Wf.call(i),Vh=i=>Yh(i).slice(8,-1),Ga=i=>jf(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Xf=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},zf=Xf(i=>i.charAt(0).toUpperCase()+i.slice(1)),Uh=(i,t)=>i!==t&&(i===i||t===t),qo=new WeakMap,Ir=[],fi,Wn=Symbol("iterate"),Jo=Symbol("Map key iterate");function Bf(i){return i&&i._isEffect===!0}function Yf(i,t=Nf){Bf(i)&&(i=i.raw);const e=Kf(i,t);return t.lazy||e(),e}function Vf(i){i.active&&(Kh(i),i.options.onStop&&i.options.onStop(),i.active=!1)}var Uf=0;function Kf(i,t){const e=function(){if(!e.active)return i();if(!Ir.includes(e)){Kh(e);try{return Hf(),Ir.push(e),fi=e,i()}finally{Ir.pop(),$h(),fi=Ir[Ir.length-1]}}};return e.id=Uf++,e.allowRecurse=!!t.allowRecurse,e._isEffect=!0,e.active=!0,e.raw=i,e.deps=[],e.options=t,e}function Kh(i){const{deps:t}=i;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(i);t.length=0}}var fr=!0,ja=[];function $f(){ja.push(fr),fr=!1}function Hf(){ja.push(fr),fr=!0}function $h(){const i=ja.pop();fr=i===void 0?!0:i}function si(i,t,e){if(!fr||fi===void 0)return;let n=qo.get(i);n||qo.set(i,n=new Map);let r=n.get(e);r||n.set(e,r=new Set),r.has(fi)||(r.add(fi),fi.deps.push(r),fi.options.onTrack&&fi.options.onTrack({effect:fi,target:i,type:t,key:e}))}function yn(i,t,e,n,r,s){const o=qo.get(i);if(!o)return;const a=new Set,l=h=>{h&&h.forEach(u=>{(u!==fi||u.allowRecurse)&&a.add(u)})};if(t==="clear")o.forEach(l);else if(e==="length"&&jn(i))o.forEach((h,u)=>{(u==="length"||u>=n)&&l(h)});else switch(e!==void 0&&l(o.get(e)),t){case"add":jn(i)?Ga(e)&&l(o.get("length")):(l(o.get(Wn)),Fr(i)&&l(o.get(Jo)));break;case"delete":jn(i)||(l(o.get(Wn)),Fr(i)&&l(o.get(Jo)));break;case"set":Fr(i)&&l(o.get(Wn));break}const c=h=>{h.options.onTrigger&&h.options.onTrigger({effect:h,target:i,key:e,type:t,newValue:n,oldValue:r,oldTarget:s}),h.options.scheduler?h.options.scheduler(h):h()};a.forEach(c)}var Zf=kf("__proto__,__v_isRef,__isVue"),Hh=new Set(Object.getOwnPropertyNames(Symbol).map(i=>Symbol[i]).filter(Na)),qf=Zh(),Jf=Zh(!0),Yl=Qf();function Qf(){const i={};return["includes","indexOf","lastIndexOf"].forEach(t=>{i[t]=function(...e){const n=Ut(this);for(let s=0,o=this.length;s<o;s++)si(n,"get",s+"");const r=n[t](...e);return r===-1||r===!1?n[t](...e.map(Ut)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{i[t]=function(...e){$f();const n=Ut(this)[t].apply(this,e);return $h(),n}}),i}function Zh(i=!1,t=!1){return function(n,r,s){if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_raw"&&s===(i?t?_g:tu:t?gg:Qh).get(n))return n;const o=jn(n);if(!i&&o&&Qs(Yl,r))return Reflect.get(Yl,r,s);const a=Reflect.get(n,r,s);return(Na(r)?Hh.has(r):Zf(r))||(i||si(n,"get",r),t)?a:Qo(a)?!o||!Ga(r)?a.value:a:to(a)?i?eu(a):Ba(a):a}}var tg=eg();function eg(i=!1){return function(e,n,r,s){let o=e[n];if(!i&&(r=Ut(r),o=Ut(o),!jn(e)&&Qo(o)&&!Qo(r)))return o.value=r,!0;const a=jn(e)&&Ga(n)?Number(n)<e.length:Qs(e,n),l=Reflect.set(e,n,r,s);return e===Ut(s)&&(a?Uh(r,o)&&yn(e,"set",n,r,o):yn(e,"add",n,r)),l}}function ig(i,t){const e=Qs(i,t),n=i[t],r=Reflect.deleteProperty(i,t);return r&&e&&yn(i,"delete",t,void 0,n),r}function ng(i,t){const e=Reflect.has(i,t);return(!Na(t)||!Hh.has(t))&&si(i,"has",t),e}function rg(i){return si(i,"iterate",jn(i)?"length":Wn),Reflect.ownKeys(i)}var sg={get:qf,set:tg,deleteProperty:ig,has:ng,ownKeys:rg},og={get:Jf,set(i,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,i),!0},deleteProperty(i,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,i),!0}},Wa=i=>to(i)?Ba(i):i,Xa=i=>to(i)?eu(i):i,za=i=>i,eo=i=>Reflect.getPrototypeOf(i);function us(i,t,e=!1,n=!1){i=i.__v_raw;const r=Ut(i),s=Ut(t);t!==s&&!e&&si(r,"get",t),!e&&si(r,"get",s);const{has:o}=eo(r),a=n?za:e?Xa:Wa;if(o.call(r,t))return a(i.get(t));if(o.call(r,s))return a(i.get(s));i!==r&&i.get(t)}function ds(i,t=!1){const e=this.__v_raw,n=Ut(e),r=Ut(i);return i!==r&&!t&&si(n,"has",i),!t&&si(n,"has",r),i===r?e.has(i):e.has(i)||e.has(r)}function fs(i,t=!1){return i=i.__v_raw,!t&&si(Ut(i),"iterate",Wn),Reflect.get(i,"size",i)}function Vl(i){i=Ut(i);const t=Ut(this);return eo(t).has.call(t,i)||(t.add(i),yn(t,"add",i,i)),this}function Ul(i,t){t=Ut(t);const e=Ut(this),{has:n,get:r}=eo(e);let s=n.call(e,i);s?Jh(e,n,i):(i=Ut(i),s=n.call(e,i));const o=r.call(e,i);return e.set(i,t),s?Uh(t,o)&&yn(e,"set",i,t,o):yn(e,"add",i,t),this}function Kl(i){const t=Ut(this),{has:e,get:n}=eo(t);let r=e.call(t,i);r?Jh(t,e,i):(i=Ut(i),r=e.call(t,i));const s=n?n.call(t,i):void 0,o=t.delete(i);return r&&yn(t,"delete",i,void 0,s),o}function $l(){const i=Ut(this),t=i.size!==0,e=Fr(i)?new Map(i):new Set(i),n=i.clear();return t&&yn(i,"clear",void 0,void 0,e),n}function gs(i,t){return function(n,r){const s=this,o=s.__v_raw,a=Ut(o),l=t?za:i?Xa:Wa;return!i&&si(a,"iterate",Wn),o.forEach((c,h)=>n.call(r,l(c),l(h),s))}}function _s(i,t,e){return function(...n){const r=this.__v_raw,s=Ut(r),o=Fr(s),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,c=r[i](...n),h=e?za:t?Xa:Wa;return!t&&si(s,"iterate",l?Jo:Wn),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function tn(i){return function(...t){{const e=t[0]?`on key "${t[0]}" `:"";console.warn(`${zf(i)} operation ${e}failed: target is readonly.`,Ut(this))}return i==="delete"?!1:this}}function ag(){const i={get(s){return us(this,s)},get size(){return fs(this)},has:ds,add:Vl,set:Ul,delete:Kl,clear:$l,forEach:gs(!1,!1)},t={get(s){return us(this,s,!1,!0)},get size(){return fs(this)},has:ds,add:Vl,set:Ul,delete:Kl,clear:$l,forEach:gs(!1,!0)},e={get(s){return us(this,s,!0)},get size(){return fs(this,!0)},has(s){return ds.call(this,s,!0)},add:tn("add"),set:tn("set"),delete:tn("delete"),clear:tn("clear"),forEach:gs(!0,!1)},n={get(s){return us(this,s,!0,!0)},get size(){return fs(this,!0)},has(s){return ds.call(this,s,!0)},add:tn("add"),set:tn("set"),delete:tn("delete"),clear:tn("clear"),forEach:gs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=_s(s,!1,!1),e[s]=_s(s,!0,!1),t[s]=_s(s,!1,!0),n[s]=_s(s,!0,!0)}),[i,e,t,n]}var[lg,cg,hg,ug]=ag();function qh(i,t){const e=t?i?ug:hg:i?cg:lg;return(n,r,s)=>r==="__v_isReactive"?!i:r==="__v_isReadonly"?i:r==="__v_raw"?n:Reflect.get(Qs(e,r)&&r in n?e:n,r,s)}var dg={get:qh(!1,!1)},fg={get:qh(!0,!1)};function Jh(i,t,e){const n=Ut(e);if(n!==e&&t.call(i,n)){const r=Vh(i);console.warn(`Reactive ${r} contains both the raw and reactive versions of the same object${r==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Qh=new WeakMap,gg=new WeakMap,tu=new WeakMap,_g=new WeakMap;function pg(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mg(i){return i.__v_skip||!Object.isExtensible(i)?0:pg(Vh(i))}function Ba(i){return i&&i.__v_isReadonly?i:iu(i,!1,sg,dg,Qh)}function eu(i){return iu(i,!0,og,fg,tu)}function iu(i,t,e,n,r){if(!to(i))return console.warn(`value cannot be made reactive: ${String(i)}`),i;if(i.__v_raw&&!(t&&i.__v_isReactive))return i;const s=r.get(i);if(s)return s;const o=mg(i);if(o===0)return i;const a=new Proxy(i,o===2?n:e);return r.set(i,a),a}function Ut(i){return i&&Ut(i.__v_raw)||i}function Qo(i){return!!(i&&i.__v_isRef===!0)}oi("nextTick",()=>Fa);oi("dispatch",i=>Dr.bind(Dr,i));oi("watch",(i,{evaluateLater:t,cleanup:e})=>(n,r)=>{let s=t(n),a=th(()=>{let l;return s(c=>l=c),l},r);e(a)});oi("store",Af);oi("data",i=>gh(i));oi("root",i=>Hs(i));oi("refs",i=>(i._x_refs_proxy||(i._x_refs_proxy=Jr(yg(i))),i._x_refs_proxy));function yg(i){let t=[],e=i;for(;e;)e._x_refs&&t.push(e._x_refs),e=e.parentNode;return t}var xo={};function nu(i){return xo[i]||(xo[i]=0),++xo[i]}function vg(i,t){return Zs(i,e=>{if(e._x_ids&&e._x_ids[t])return!0})}function xg(i,t){i._x_ids||(i._x_ids={}),i._x_ids[t]||(i._x_ids[t]=nu(t))}oi("id",(i,{cleanup:t})=>(e,n=null)=>{let r=`${e}${n?`-${n}`:""}`;return Eg(i,r,t,()=>{let s=vg(i,e),o=s?s._x_ids[e]:nu(e);return n?`${e}-${o}-${n}`:`${e}-${o}`})});Js((i,t)=>{i._x_id&&(t._x_id=i._x_id)});function Eg(i,t,e,n){if(i._x_id||(i._x_id={}),i._x_id[t])return i._x_id[t];let r=n();return i._x_id[t]=r,e(()=>{delete i._x_id[t]}),r}oi("el",i=>i);ru("Focus","focus","focus");ru("Persist","persist","persist");function ru(i,t,e){oi(t,n=>Gi(`You can't use [$${t}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${e}`,n))}he("modelable",(i,{expression:t},{effect:e,evaluateLater:n,cleanup:r})=>{let s=n(t),o=()=>{let h;return s(u=>h=u),h},a=n(`${t} = __placeholder`),l=h=>a(()=>{},{scope:{__placeholder:h}}),c=o();l(c),queueMicrotask(()=>{if(!i._x_model)return;i._x_removeModelListeners.default();let h=i._x_model.get,u=i._x_model.set,d=Wh({get(){return h()},set(f){u(f)}},{get(){return o()},set(f){l(f)}});r(d)})});he("teleport",(i,{modifiers:t,expression:e},{cleanup:n})=>{i.tagName.toLowerCase()!=="template"&&Gi("x-teleport can only be used on a <template> tag",i);let r=Hl(e),s=i.content.cloneNode(!0).firstElementChild;i._x_teleport=s,s._x_teleportBack=i,i.setAttribute("data-teleport-template",!0),s.setAttribute("data-teleport-target",!0),i._x_forwardEvents&&i._x_forwardEvents.forEach(a=>{s.addEventListener(a,l=>{l.stopPropagation(),i.dispatchEvent(new l.constructor(l.type,l))})}),qr(s,{},i);let o=(a,l,c)=>{c.includes("prepend")?l.parentNode.insertBefore(a,l):c.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};xe(()=>{o(s,r,t),ji(s),s._x_ignore=!0}),i._x_teleportPutBack=()=>{let a=Hl(e);xe(()=>{o(i._x_teleport,a,t)})},n(()=>s.remove())});var Cg=document.createElement("div");function Hl(i){let t=Qr(()=>document.querySelector(i),()=>Cg)();return t||Gi(`Cannot find x-teleport element for selector: "${i}"`),t}var su=()=>{};su.inline=(i,{modifiers:t},{cleanup:e})=>{t.includes("self")?i._x_ignoreSelf=!0:i._x_ignore=!0,e(()=>{t.includes("self")?delete i._x_ignoreSelf:delete i._x_ignore})};he("ignore",su);he("effect",Qr((i,{expression:t},{effect:e})=>{e(Ne(i,t))}));function ta(i,t,e,n){let r=i,s=l=>n(l),o={},a=(l,c)=>h=>c(l,h);if(e.includes("dot")&&(t=wg(t)),e.includes("camel")&&(t=bg(t)),e.includes("passive")&&(o.passive=!0),e.includes("capture")&&(o.capture=!0),e.includes("window")&&(r=window),e.includes("document")&&(r=document),e.includes("debounce")){let l=e[e.indexOf("debounce")+1]||"invalid-wait",c=Ms(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=Gh(s,c)}if(e.includes("throttle")){let l=e[e.indexOf("throttle")+1]||"invalid-wait",c=Ms(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=jh(s,c)}return e.includes("prevent")&&(s=a(s,(l,c)=>{c.preventDefault(),l(c)})),e.includes("stop")&&(s=a(s,(l,c)=>{c.stopPropagation(),l(c)})),e.includes("self")&&(s=a(s,(l,c)=>{c.target===i&&l(c)})),(e.includes("away")||e.includes("outside"))&&(r=document,s=a(s,(l,c)=>{i.contains(c.target)||c.target.isConnected!==!1&&(i.offsetWidth<1&&i.offsetHeight<1||i._x_isShown!==!1&&l(c))})),e.includes("once")&&(s=a(s,(l,c)=>{l(c),r.removeEventListener(t,s,o)})),s=a(s,(l,c)=>{Tg(t)&&Sg(c,e)||l(c)}),r.addEventListener(t,s,o),()=>{r.removeEventListener(t,s,o)}}function wg(i){return i.replace(/-/g,".")}function bg(i){return i.toLowerCase().replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function Ms(i){return!Array.isArray(i)&&!isNaN(i)}function Rg(i){return[" ","_"].includes(i)?i:i.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Tg(i){return["keydown","keyup"].includes(i)}function Sg(i,t){let e=t.filter(s=>!["window","document","prevent","stop","once","capture"].includes(s));if(e.includes("debounce")){let s=e.indexOf("debounce");e.splice(s,Ms((e[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.includes("throttle")){let s=e.indexOf("throttle");e.splice(s,Ms((e[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.length===0||e.length===1&&Zl(i.key).includes(e[0]))return!1;const r=["ctrl","shift","alt","meta","cmd","super"].filter(s=>e.includes(s));return e=e.filter(s=>!r.includes(s)),!(r.length>0&&r.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),i[`${o}Key`])).length===r.length&&Zl(i.key).includes(e[0]))}function Zl(i){if(!i)return[];i=Rg(i);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return t[i]=i,Object.keys(t).map(e=>{if(t[e]===i)return e}).filter(e=>e)}he("model",(i,{modifiers:t,expression:e},{effect:n,cleanup:r})=>{let s=i;t.includes("parent")&&(s=i.parentNode);let o=Ne(s,e),a;typeof e=="string"?a=Ne(s,`${e} = __placeholder`):typeof e=="function"&&typeof e()=="string"?a=Ne(s,`${e()} = __placeholder`):a=()=>{};let l=()=>{let d;return o(f=>d=f),ql(d)?d.get():d},c=d=>{let f;o(_=>f=_),ql(f)?f.set(d):a(()=>{},{scope:{__placeholder:d}})};typeof e=="string"&&i.type==="radio"&&xe(()=>{i.hasAttribute("name")||i.setAttribute("name",e)});var h=i.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(i.type)||t.includes("lazy")?"change":"input";let u=mn?()=>{}:ta(i,h,t,d=>{c(Ig(i,t,d,l()))});if(t.includes("fill")&&([void 0,null,""].includes(l())||i.type==="checkbox"&&Array.isArray(l()))&&i.dispatchEvent(new Event(h,{})),i._x_removeModelListeners||(i._x_removeModelListeners={}),i._x_removeModelListeners.default=u,r(()=>i._x_removeModelListeners.default()),i.form){let d=ta(i.form,"reset",[],f=>{Fa(()=>i._x_model&&i._x_model.set(i.value))});r(()=>d())}i._x_model={get(){return l()},set(d){c(d)}},i._x_forceModelUpdate=d=>{d===void 0&&typeof e=="string"&&e.match(/\./)&&(d=""),window.fromModel=!0,xe(()=>Dh(i,"value",d)),delete window.fromModel},n(()=>{let d=l();t.includes("unintrusive")&&document.activeElement.isSameNode(i)||i._x_forceModelUpdate(d)})});function Ig(i,t,e,n){return xe(()=>{if(e instanceof CustomEvent&&e.detail!==void 0)return e.detail!==null&&e.detail!==void 0?e.detail:e.target.value;if(i.type==="checkbox")if(Array.isArray(n)){let r=null;return t.includes("number")?r=Eo(e.target.value):t.includes("boolean")?r=Is(e.target.value):r=e.target.value,e.target.checked?n.concat([r]):n.filter(s=>!Og(s,r))}else return e.target.checked;else return i.tagName.toLowerCase()==="select"&&i.multiple?t.includes("number")?Array.from(e.target.selectedOptions).map(r=>{let s=r.value||r.text;return Eo(s)}):t.includes("boolean")?Array.from(e.target.selectedOptions).map(r=>{let s=r.value||r.text;return Is(s)}):Array.from(e.target.selectedOptions).map(r=>r.value||r.text):t.includes("number")?Eo(e.target.value):t.includes("boolean")?Is(e.target.value):t.includes("trim")?e.target.value.trim():e.target.value})}function Eo(i){let t=i?parseFloat(i):null;return Ag(t)?t:i}function Og(i,t){return i==t}function Ag(i){return!Array.isArray(i)&&!isNaN(i)}function ql(i){return i!==null&&typeof i=="object"&&typeof i.get=="function"&&typeof i.set=="function"}he("cloak",i=>queueMicrotask(()=>xe(()=>i.removeAttribute(xr("cloak")))));sh(()=>`[${xr("init")}]`);he("init",Qr((i,{expression:t},{evaluate:e})=>typeof t=="string"?!!t.trim()&&e(t,{},!1):e(t,{},!1)));he("text",(i,{expression:t},{effect:e,evaluateLater:n})=>{let r=n(t);e(()=>{r(s=>{xe(()=>{i.textContent=s})})})});he("html",(i,{expression:t},{effect:e,evaluateLater:n})=>{let r=n(t);e(()=>{r(s=>{xe(()=>{i.innerHTML=s,i._x_ignoreSelf=!0,ji(i),delete i._x_ignoreSelf})})})});Pa(bh(":",Rh(xr("bind:"))));var ou=(i,{value:t,modifiers:e,expression:n,original:r},{effect:s})=>{if(!t){let a={};Mf(a),Ne(i,n)(c=>{zh(i,c,r)},{scope:a});return}if(t==="key")return Lg(i,n);if(i._x_inlineBindings&&i._x_inlineBindings[t]&&i._x_inlineBindings[t].extract)return;let o=Ne(i,n);s(()=>o(a=>{a===void 0&&typeof n=="string"&&n.match(/\./)&&(a=""),xe(()=>Dh(i,t,a,e))}))};ou.inline=(i,{value:t,modifiers:e,expression:n})=>{t&&(i._x_inlineBindings||(i._x_inlineBindings={}),i._x_inlineBindings[t]={expression:n,extract:!1})};he("bind",ou);function Lg(i,t){i._x_keyExpression=t}rh(()=>`[${xr("data")}]`);he("data",(i,{expression:t},{cleanup:e})=>{if(Mg(i))return;t=t===""?"{}":t;let n={};zo(n,i);let r={};Df(r,n);let s=Gn(i,t,{scope:r});(s===void 0||s===!0)&&(s={}),zo(s,i);let o=yr(s);_h(o);let a=qr(i,o);o.init&&Gn(i,o.init),e(()=>{o.destroy&&Gn(i,o.destroy),a()})});Js((i,t)=>{i._x_dataStack&&(t._x_dataStack=i._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function Mg(i){return mn?Zo?!0:i.hasAttribute("data-has-alpine-state"):!1}he("show",(i,{modifiers:t,expression:e},{effect:n})=>{let r=Ne(i,e);i._x_doHide||(i._x_doHide=()=>{xe(()=>{i.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),i._x_doShow||(i._x_doShow=()=>{xe(()=>{i.style.length===1&&i.style.display==="none"?i.removeAttribute("style"):i.style.removeProperty("display")})});let s=()=>{i._x_doHide(),i._x_isShown=!1},o=()=>{i._x_doShow(),i._x_isShown=!0},a=()=>setTimeout(o),l=$o(u=>u?o():s(),u=>{typeof i._x_toggleAndCascadeWithTransitions=="function"?i._x_toggleAndCascadeWithTransitions(i,u,o,s):u?a():s()}),c,h=!0;n(()=>r(u=>{!h&&u===c||(t.includes("immediate")&&(u?a():s()),l(u),c=u,h=!1)}))});he("for",(i,{expression:t},{effect:e,cleanup:n})=>{let r=Dg(t),s=Ne(i,r.items),o=Ne(i,i._x_keyExpression||"index");i._x_prevKeys=[],i._x_lookup={},e(()=>Pg(i,r,s,o)),n(()=>{Object.values(i._x_lookup).forEach(a=>a.remove()),delete i._x_prevKeys,delete i._x_lookup})});function Pg(i,t,e,n){let r=o=>typeof o=="object"&&!Array.isArray(o),s=i;e(o=>{Fg(o)&&o>=0&&(o=Array.from(Array(o).keys(),m=>m+1)),o===void 0&&(o=[]);let a=i._x_lookup,l=i._x_prevKeys,c=[],h=[];if(r(o))o=Object.entries(o).map(([m,x])=>{let C=Jl(t,x,m,o);n(b=>h.push(b),{scope:{index:m,...C}}),c.push(C)});else for(let m=0;m<o.length;m++){let x=Jl(t,o[m],m,o);n(C=>h.push(C),{scope:{index:m,...x}}),c.push(x)}let u=[],d=[],f=[],_=[];for(let m=0;m<l.length;m++){let x=l[m];h.indexOf(x)===-1&&f.push(x)}l=l.filter(m=>!f.includes(m));let y="template";for(let m=0;m<h.length;m++){let x=h[m],C=l.indexOf(x);if(C===-1)l.splice(m,0,x),u.push([y,m]);else if(C!==m){let b=l.splice(m,1)[0],T=l.splice(C-1,1)[0];l.splice(m,0,T),l.splice(C,0,b),d.push([b,T])}else _.push(x);y=x}for(let m=0;m<f.length;m++){let x=f[m];a[x]._x_effects&&a[x]._x_effects.forEach(Jc),a[x].remove(),a[x]=null,delete a[x]}for(let m=0;m<d.length;m++){let[x,C]=d[m],b=a[x],T=a[C],L=document.createElement("div");xe(()=>{T||Gi('x-for ":key" is undefined or invalid',s),T.after(L),b.after(T),T._x_currentIfEl&&T.after(T._x_currentIfEl),L.before(b),b._x_currentIfEl&&b.after(b._x_currentIfEl),L.remove()}),T._x_refreshXForScope(c[h.indexOf(C)])}for(let m=0;m<u.length;m++){let[x,C]=u[m],b=x==="template"?s:a[x];b._x_currentIfEl&&(b=b._x_currentIfEl);let T=c[C],L=h[C],P=document.importNode(s.content,!0).firstElementChild,D=yr(T);qr(P,D,s),P._x_refreshXForScope=W=>{Object.entries(W).forEach(([z,V])=>{D[z]=V})},xe(()=>{b.after(P),ji(P)}),typeof L=="object"&&Gi("x-for key cannot be an object, it must be a string or an integer",s),a[L]=P}for(let m=0;m<_.length;m++)a[_[m]]._x_refreshXForScope(c[h.indexOf(_[m])]);s._x_prevKeys=h})}function Dg(i){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,e=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,r=i.match(n);if(!r)return;let s={};s.items=r[2].trim();let o=r[1].replace(e,"").trim(),a=o.match(t);return a?(s.item=o.replace(t,"").trim(),s.index=a[1].trim(),a[2]&&(s.collection=a[2].trim())):s.item=o,s}function Jl(i,t,e,n){let r={};return/^\[.*\]$/.test(i.item)&&Array.isArray(t)?i.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{r[o]=t[a]}):/^\{.*\}$/.test(i.item)&&!Array.isArray(t)&&typeof t=="object"?i.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{r[o]=t[o]}):r[i.item]=t,i.index&&(r[i.index]=e),i.collection&&(r[i.collection]=n),r}function Fg(i){return!Array.isArray(i)&&!isNaN(i)}function au(){}au.inline=(i,{expression:t},{cleanup:e})=>{let n=Hs(i);n._x_refs||(n._x_refs={}),n._x_refs[t]=i,e(()=>delete n._x_refs[t])};he("ref",au);he("if",(i,{expression:t},{effect:e,cleanup:n})=>{i.tagName.toLowerCase()!=="template"&&Gi("x-if can only be used on a <template> tag",i);let r=Ne(i,t),s=()=>{if(i._x_currentIfEl)return i._x_currentIfEl;let a=i.content.cloneNode(!0).firstElementChild;return qr(a,{},i),xe(()=>{i.after(a),ji(a)}),i._x_currentIfEl=a,i._x_undoIf=()=>{pn(a,l=>{l._x_effects&&l._x_effects.forEach(Jc)}),a.remove(),delete i._x_currentIfEl},a},o=()=>{i._x_undoIf&&(i._x_undoIf(),delete i._x_undoIf)};e(()=>r(a=>{a?s():o()})),n(()=>i._x_undoIf&&i._x_undoIf())});he("id",(i,{expression:t},{evaluate:e})=>{e(t).forEach(r=>xg(i,r))});Js((i,t)=>{i._x_ids&&(t._x_ids=i._x_ids)});Pa(bh("@",Rh(xr("on:"))));he("on",Qr((i,{value:t,modifiers:e,expression:n},{cleanup:r})=>{let s=n?Ne(i,n):()=>{};i.tagName.toLowerCase()==="template"&&(i._x_forwardEvents||(i._x_forwardEvents=[]),i._x_forwardEvents.includes(t)||i._x_forwardEvents.push(t));let o=ta(i,t,e,a=>{s(()=>{},{scope:{$event:a},params:[a]})});r(()=>o())}));io("Collapse","collapse","collapse");io("Intersect","intersect","intersect");io("Focus","trap","focus");io("Mask","mask","mask");function io(i,t,e){he(t,n=>Gi(`You can't use [x-${t}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${e}`,n))}ts.setEvaluator(xh);ts.setReactivityEngine({reactive:Ba,effect:Yf,release:Vf,raw:Ut});var kg=ts,Ue=kg;const Ng="modulepreload",Gg=function(i){return"/"+i},Ql={},ye=function(t,e,n){if(!e||e.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(e.map(s=>{if(s=Gg(s),s in Ql)return;Ql[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const u=r[h];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Ng,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},lu={plugins:[{name:"myButton",component:()=>ye(()=>import("./myButton-cc9ca7a4.js"),["assets/myButton-cc9ca7a4.js","assets/feather-becb2378.js","assets/myButton-4cf4f41f.css"]),enabled:!1,buttonDomOrder:2},{name:"zoomToWorld",component:()=>ye(()=>import("./zoomToWorld-9e128d0e.js"),["assets/zoomToWorld-9e128d0e.js","assets/feather-becb2378.js"]),enabled:!0,buttonDomOrder:5},{name:"layerPanelContainer",component:()=>ye(()=>import("./layerPanelContainer-274f5648.js"),["assets/layerPanelContainer-274f5648.js","assets/feather-becb2378.js","assets/layerPanelContainer-daf31c26.css"]),enabled:!1,buttonDomOrder:1,createsParentDOM:!0},{name:"mapSourceWarning",component:()=>ye(()=>import("./mapSourceWarning-d9eb6ed0.js"),[]),enabled:!1,buttonDomOrder:2},{name:"DAARDFilterButton",component:()=>ye(()=>import("./DAARDFilterButton-239539a6.js"),["assets/DAARDFilterButton-239539a6.js","assets/feather-becb2378.js"]),enabled:!0,buttonDomOrder:8},{name:"legend",component:()=>ye(()=>import("./legend-b4d685a5.js"),["assets/legend-b4d685a5.js","assets/feather-becb2378.js","assets/legend-cb8a6655.css"]),enabled:!0,buttonDomOrder:2},{name:"aboutLayer",component:()=>ye(()=>import("./aboutLayer-387a4023.js"),["assets/aboutLayer-387a4023.js","assets/aboutLayer-49bef4fd.css"]),enabled:!1,buttonDomOrder:!1},{name:"filterLayer",component:()=>ye(()=>import("./filterLayer-19a72d98.js"),[]),enabled:!1,buttonDomOrder:!1},{name:"daardLayerFilter",component:()=>ye(()=>import("./daardLayerFilter-7390e9fb.js"),["assets/daardLayerFilter-7390e9fb.js","assets/feather-becb2378.js"]),enabled:!0,buttonDomOrder:!1},{name:"attributeTable",component:()=>ye(()=>import("./attributeTable-d4c5229c.js"),["assets/attributeTable-d4c5229c.js","assets/contentDecorator-805dceda.js","assets/feather-becb2378.js","assets/attributeTable-9f76c8e5.css"]),enabled:!0,buttonDomOrder:3},{name:"compareTool",component:()=>ye(()=>import("./compareTool-3774c810.js").then(i=>i.c),["assets/compareTool-3774c810.js","assets/feather-becb2378.js","assets/bonesSvgGenerator-1d5190eb.js"]),enabled:!0,buttonDomOrder:4},{name:"featureInfo",component:()=>ye(()=>import("./featureInfo-61524e81.js"),[]),enabled:!1,buttonDomOrder:!1},{name:"featureInfo",component:()=>ye(()=>import("./featureInfo-df77ed8f.js"),["assets/featureInfo-df77ed8f.js","assets/contentDecorator-805dceda.js","assets/bonesSvgGenerator-1d5190eb.js","assets/featureInfo-576d5c2d.css"]),enabled:!0,buttonDomOrder:!1},{name:"mapMarker",component:()=>ye(()=>import("./mapMarker-13d8424e.js"),["assets/mapMarker-13d8424e.js","assets/feather-becb2378.js"]),enabled:!0,buttonDomOrder:!1},{name:"backgroundSwitcher",component:()=>ye(()=>import("./backgroundSwitcher-3ec4ce07.js"),["assets/backgroundSwitcher-3ec4ce07.js","assets/backgroundSwitcher-fd7ae92d.css"]),enabled:!0,buttonDomOrder:!1},{name:"layerPanel",component:()=>ye(()=>import("./layerPanel-a224b781.js"),["assets/layerPanel-a224b781.js","assets/feather-becb2378.js","assets/index-c4575d02.js","assets/layerPanel-9d965bcb.css"]),enabled:!1,buttonDomOrder:1,dependsOn:"layerPanelContainer"},{name:"layerStyle",component:()=>ye(()=>import("./layerStyle-e7ebca6f.js"),["assets/layerStyle-e7ebca6f.js","assets/feather-becb2378.js","assets/index-c4575d02.js"]),enabled:!1,buttonDomOrder:2,dependsOn:"layerPanelContainer"},{name:"debug",component:()=>ye(()=>import("./catchEvents-e13a8567.js"),[]),enabled:!1,buttonDomOrder:!1},{name:"afterMarkupFinish",component:()=>ye(()=>import("./afterMarkupFinish-049f33de.js"),["assets/afterMarkupFinish-049f33de.js","assets/feather-becb2378.js"]),enabled:!0,buttonDomOrder:!1}]},cu=(i,t,e=!1)=>{const n=[];for(const r of lu.plugins)if(r.enabled&&(e&&r.createsParentDOM||!e&&!r.createsParentDOM)){const s=r.component().then(o=>o.initialize&&o.initialize(r.buttonDomOrder)||null).catch(o=>(console.error("Error loading component for plugin:",r.name,o),null));n.push(s)}return n},jg=()=>lu.plugins.filter(i=>i.enabled&&i.name).map(i=>i.name);class Wg{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ei=Wg,gr={PROPERTYCHANGE:"propertychange"};class Xg{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Ya=Xg;function zg(i,t,e){let n,r;e=e||Yn;let s=0,o=i.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+e(i[n],t),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function Yn(i,t){return i>t?1:i<t?-1:0}function no(i,t,e){const n=i.length;if(i[0]<=t)return 0;if(t<=i[n-1])return n-1;{let r;if(e>0){for(r=1;r<n;++r)if(i[r]<t)return r-1}else if(e<0){for(r=1;r<n;++r)if(i[r]<=t)return r}else for(r=1;r<n;++r){if(i[r]==t)return r;if(i[r]<t)return typeof e=="function"?e(t,i[r-1],i[r])>0?r-1:r:i[r-1]-t<t-i[r]?r-1:r}return n-1}}function Bg(i,t,e){for(;t<e;){const n=i[t];i[t]=i[e],i[e]=n,++t,--e}}function ki(i,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let r=0;r<n;r++)i[i.length]=e[r]}function Kn(i,t){const e=i.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function Yg(i,t,e){const n=t||Yn;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||e&&o===0)})}function jr(){return!0}function ro(){return!1}function Vn(){}function Vg(i){let t=!1,e,n,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!Kn(s,n))&&(t=!0,r=this,n=s,e=i.apply(this,arguments)),e}}function es(i){for(const t in i)delete i[t]}function _r(i){let t;for(t in i)return!1;return!t}class Ug extends Ya{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=e?new Ei(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=r.length;c<h;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,Vn);delete o[n]}return l}disposeInternal(){this.listeners_&&es(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const r=n.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=Vn,++this.pendingRemovals_[t]):(n.splice(r,1),n.length===0&&delete this.listeners_[t]))}}}const is=Ug,ut={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function wt(i,t,e,n,r){if(n&&n!==i&&(e=e.bind(n)),r){const o=e;e=function(){i.removeEventListener(t,e),o.apply(this,arguments)}}const s={target:i,type:t,listener:e};return i.addEventListener(t,e),s}function Ps(i,t,e,n){return wt(i,t,e,n,!0)}function Bt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),es(i))}class so extends is{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ut.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=wt(this,t[s],e);return r}else return wt(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const r=t.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=Ps(this,t[s],e)}else n=Ps(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)Kg(n);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}so.prototype.on;so.prototype.once;so.prototype.un;function Kg(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)Bt(i[t]);else Bt(i)}const hu=so;function et(){throw new Error("Unimplemented abstract method.")}let $g=0;function At(i){return i.ol_uid||(i.ol_uid=String(++$g))}class tc extends Ei{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class Hg extends hu{constructor(t){super(),this.on,this.once,this.un,At(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new tc(n,t,e)),n=gr.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new tc(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const r=this.values_||(this.values_={});if(n)r[t]=e;else{const s=r[t];r[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],_r(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const Ci=Hg,Zg={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class qg extends Error{constructor(t){const e=Zg[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const uu=qg;function vt(i,t){if(!i)throw new uu(t)}class Va extends Ci{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Va(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Bt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=wt(t,ut.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?Jg(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Jg(i){if(typeof i=="function")return i;{let t;return Array.isArray(i)?t=i:(vt(typeof i.getZIndex=="function",41),t=[i]),function(){return t}}}const Qg=Va,vn=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",t_=vn.includes("firefox"),e_=vn.includes("safari")&&!vn.includes("chrom");e_&&(vn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(vn));const i_=vn.includes("webkit")&&!vn.includes("edge"),n_=vn.includes("macintosh"),du=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ua=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,r_=typeof Image<"u"&&Image.prototype.decode,fu=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();new Array(6);function yi(){return[1,0,0,1,0,0]}function ax(i,t){const e=i[0],n=i[1],r=i[2],s=i[3],o=i[4],a=i[5],l=t[0],c=t[1],h=t[2],u=t[3],d=t[4],f=t[5];return i[0]=e*l+r*c,i[1]=n*l+s*c,i[2]=e*h+r*u,i[3]=n*h+s*u,i[4]=e*d+r*f+o,i[5]=n*d+s*f+a,i}function s_(i,t,e,n,r,s,o){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=s,i[5]=o,i}function o_(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function ve(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function a_(i,t,e){return s_(i,t,0,0,e,0,0)}function vi(i,t,e,n,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return i[0]=n*c,i[1]=r*l,i[2]=-n*l,i[3]=r*c,i[4]=o*n*c-a*n*l+t,i[5]=o*r*l+a*r*c+e,i}function oo(i,t){const e=l_(t);vt(e!==0,32);const n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return i[0]=o/e,i[1]=-r/e,i[2]=-s/e,i[3]=n/e,i[4]=(s*l-o*a)/e,i[5]=-(n*l-r*a)/e,i}function l_(i){return i[0]*i[3]-i[1]*i[2]}let ec;function Ka(i){const t="matrix("+i.join(", ")+")";if(Ua)return t;const e=ec||(ec=document.createElement("div"));return e.style.transform=t,e.style.transform}const be={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ic(i){const t=qe();for(let e=0,n=i.length;e<n;++e)kr(t,i[e]);return t}function c_(i,t,e){const n=Math.min.apply(null,i),r=Math.min.apply(null,t),s=Math.max.apply(null,i),o=Math.max.apply(null,t);return xi(n,r,s,o,e)}function $a(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function gu(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function $n(i,t,e){let n,r;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?r=i[1]-e:i[3]<e?r=e-i[3]:r=0,n*n+r*r}function ns(i,t){return Ha(i,t[0],t[1])}function un(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function Ha(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function ea(i,t){const e=i[0],n=i[1],r=i[2],s=i[3],o=t[0],a=t[1];let l=be.UNKNOWN;return o<e?l=l|be.LEFT:o>r&&(l=l|be.RIGHT),a<n?l=l|be.BELOW:a>s&&(l=l|be.ABOVE),l===be.UNKNOWN&&(l=be.INTERSECTING),l}function qe(){return[1/0,1/0,-1/0,-1/0]}function xi(i,t,e,n,r){return r?(r[0]=i,r[1]=t,r[2]=e,r[3]=n,r):[i,t,e,n]}function rs(i){return xi(1/0,1/0,-1/0,-1/0,i)}function h_(i,t){const e=i[0],n=i[1];return xi(e,n,e,n,t)}function _u(i,t,e,n,r){const s=rs(r);return mu(s,i,t,e,n)}function pr(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function pu(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function kr(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function mu(i,t,e,n,r){for(;e<n;e+=r)u_(i,t[e],t[e+1]);return i}function u_(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function yu(i,t){let e;return e=t(ao(i)),e||(e=t(lo(i)),e)||(e=t(co(i)),e)||(e=t(Hn(i)),e)?e:!1}function ia(i){let t=0;return ho(i)||(t=Lt(i)*Te(i)),t}function ao(i){return[i[0],i[1]]}function lo(i){return[i[2],i[1]]}function Wi(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function d_(i,t){let e;return t==="bottom-left"?e=ao(i):t==="bottom-right"?e=lo(i):t==="top-left"?e=Hn(i):t==="top-right"?e=co(i):vt(!1,13),e}function cr(i,t,e,n,r){const[s,o,a,l,c,h,u,d]=na(i,t,e,n);return xi(Math.min(s,a,c,u),Math.min(o,l,h,d),Math.max(s,a,c,u),Math.max(o,l,h,d),r)}function na(i,t,e,n){const r=t*n[0]/2,s=t*n[1]/2,o=Math.cos(e),a=Math.sin(e),l=r*o,c=r*a,h=s*o,u=s*a,d=i[0],f=i[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function Te(i){return i[3]-i[1]}function Xn(i,t,e){const n=e||qe();return ke(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):rs(n),n}function Hn(i){return[i[0],i[3]]}function co(i){return[i[2],i[3]]}function Lt(i){return i[2]-i[0]}function ke(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function ho(i){return i[2]<i[0]||i[3]<i[1]}function f_(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function g_(i,t,e){let n=!1;const r=ea(i,t),s=ea(i,e);if(r===be.INTERSECTING||s===be.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],h=t[0],u=t[1],d=e[0],f=e[1],_=(f-u)/(d-h);let y,m;s&be.ABOVE&&!(r&be.ABOVE)&&(y=d-(f-c)/_,n=y>=o&&y<=l),!n&&s&be.RIGHT&&!(r&be.RIGHT)&&(m=f-(d-l)*_,n=m>=a&&m<=c),!n&&s&be.BELOW&&!(r&be.BELOW)&&(y=d-(f-a)/_,n=y>=o&&y<=l),!n&&s&be.LEFT&&!(r&be.LEFT)&&(m=f-(d-o)*_,n=m>=a&&m<=c)}return n}function __(i,t,e,n){let r=[];if(n>1){const a=i[2]-i[0],l=i[3]-i[1];for(let c=0;c<n;++c)r.push(i[0]+a*c/n,i[1],i[2],i[1]+l*c/n,i[2]-a*c/n,i[3],i[0],i[3]-l*c/n)}else r=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];t(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return c_(s,o,e)}function vu(i,t){const e=t.getExtent(),n=Wi(i);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const r=Lt(e),o=Math.floor((n[0]-e[0])/r)*r;i[0]-=o,i[2]-=o}return i}function p_(i,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[e[0],i[1],e[2],i[3]]];vu(i,t);const n=Lt(e);if(Lt(i)>n)return[[e[0],i[1],e[2],i[3]]];if(i[0]<e[0])return[[i[0]+n,i[1],e[2],i[3]],[e[0],i[1],i[2],i[3]]];if(i[2]>e[2])return[[i[0],i[1],e[2],i[3]],[e[0],i[1],i[2]-n,i[3]]]}return[i]}const Wr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class m_{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Wr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const xu=m_,ss=6378137,ar=Math.PI*ss,y_=[-ar,-ar,ar,ar],v_=[-180,-85,180,85],ps=ss*Math.log(Math.tan(Math.PI/2));class Qn extends xu{constructor(t){super({code:t,units:"m",extent:y_,global:!0,worldExtent:v_,getPointResolution:function(e,n){return e/Math.cosh(n[1]/ss)}})}}const nc=[new Qn("EPSG:3857"),new Qn("EPSG:102100"),new Qn("EPSG:102113"),new Qn("EPSG:900913"),new Qn("http://www.opengis.net/def/crs/EPSG/0/3857"),new Qn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function x_(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let r=0;r<n;r+=e){t[r]=ar*i[r]/180;let s=ss*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));s>ps?s=ps:s<-ps&&(s=-ps),t[r+1]=s}return t}function E_(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let r=0;r<n;r+=e)t[r]=180*i[r]/ar,t[r+1]=360*Math.atan(Math.exp(i[r+1]/ss))/Math.PI-90;return t}const C_=6378137,rc=[-180,-90,180,90],w_=Math.PI*C_/180;class On extends xu{constructor(t,e){super({code:t,units:"degrees",extent:rc,axisOrientation:e,global:!0,metersPerUnit:w_,worldExtent:rc})}}const sc=[new On("CRS:84"),new On("EPSG:4326","neu"),new On("urn:ogc:def:crs:OGC:1.3:CRS84"),new On("urn:ogc:def:crs:OGC:2:84"),new On("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new On("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new On("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ra={};function b_(i){return ra[i]||ra[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function R_(i,t){ra[i]=t}let hr={};function Ds(i,t,e){const n=i.getCode(),r=t.getCode();n in hr||(hr[n]={}),hr[n][r]=e}function T_(i,t){let e;return i in hr&&t in hr[i]&&(e=hr[i][t]),e}function ce(i,t,e){return Math.min(Math.max(i,t),e)}function S_(i,t,e,n,r,s){const o=r-e,a=s-n;if(o!==0||a!==0){const l=((i-e)*o+(t-n)*a)/(o*o+a*a);l>1?(e=r,n=s):l>0&&(e+=o*l,n+=a*l)}return zn(i,t,e,n)}function zn(i,t,e,n){const r=e-i,s=n-t;return r*r+s*s}function I_(i){const t=i.length;for(let n=0;n<t;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<t;a++){const l=Math.abs(i[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<t;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<t+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=i[n][t]/i[n][n];for(let r=n-1;r>=0;r--)i[r][t]-=i[r][n]*e[n]}return e}function Os(i){return i*Math.PI/180}function ur(i,t){const e=i%t;return e*t<0?e+t:e}function Di(i,t,e){return i+e*(t-i)}function Za(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function oc(i,t){return Math.round(Za(i,t))}function lr(i,t){return Math.floor(Za(i,t))}function dn(i,t){return Math.ceil(Za(i,t))}function O_(i,t){const e=(""+i).split("."),n=(""+t).split(".");for(let r=0;r<Math.max(e.length,n.length);r++){const s=parseInt(e[r]||"0",10),o=parseInt(n[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function A_(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function Fs(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function qa(i,t){const e=Math.cos(t),n=Math.sin(t),r=i[0]*e-i[1]*n,s=i[1]*e+i[0]*n;return i[0]=r,i[1]=s,i}function L_(i,t){return i[0]*=t,i[1]*=t,i}function Eu(i,t){if(t.canWrapX()){const e=Lt(t.getExtent()),n=M_(i,t,e);n&&(i[0]-=n*e)}return i}function M_(i,t,e){const n=t.getExtent();let r=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||Lt(n),r=Math.floor((i[0]-n[0])/e)),r}const P_=63710088e-1;function ac(i,t,e){e=e||P_;const n=Os(i[1]),r=Os(t[1]),s=(r-n)/2,o=Os(t[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let sa=!0;function Cu(i){sa=!(i===void 0?!0:i)}function Ja(i,t,e){if(t!==void 0){for(let n=0,r=i.length;n<r;++n)t[n]=i[n];t=t}else t=i.slice();return t}function wu(i,t,e){if(t!==void 0&&i!==t){for(let n=0,r=i.length;n<r;++n)t[n]=i[n];i=t}return i}function D_(i){R_(i.getCode(),i),Ds(i,i,Ja)}function F_(i){i.forEach(D_)}function ie(i){return typeof i=="string"?b_(i):i||null}function lc(i,t,e,n){i=ie(i);let r;const s=i.getPointResolutionFunc();if(s){if(r=s(t,e),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(r=r*o/Wr[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=t;else{const a=tl(i,ie("EPSG:4326"));if(a===wu&&o!=="degrees")r=t*i.getMetersPerUnit();else{let c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];c=a(c,c,2);const h=ac(c.slice(0,2),c.slice(2,4)),u=ac(c.slice(4,6),c.slice(6,8));r=(h+u)/2}const l=n?Wr[n]:i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function cc(i){F_(i),i.forEach(function(t){i.forEach(function(e){t!==e&&Ds(t,e,Ja)})})}function k_(i,t,e,n){i.forEach(function(r){t.forEach(function(s){Ds(r,s,e),Ds(s,r,n)})})}function Qa(i,t){return i?typeof i=="string"?ie(i):i:ie(t)}function N_(i,t){return Cu(),el(i,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function gi(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||tl(i,t)===Ja)&&e}function tl(i,t){const e=i.getCode(),n=t.getCode();let r=T_(e,n);return r||(r=wu),r}function Xr(i,t){const e=ie(i),n=ie(t);return tl(e,n)}function el(i,t,e){return Xr(t,e)(i,void 0,i.length)}function G_(i,t,e,n){const r=Xr(t,e);return __(i,r,void 0,n)}function oa(i,t){return i}function Mi(i,t){return sa&&!Fs(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(sa=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function bu(i,t){return i}function Fi(i,t){return i}function j_(){cc(nc),cc(sc),k_(sc,nc,x_,E_)}j_();function Bn(i,t,e,n,r,s){s=s||[];let o=0;for(let a=t;a<e;a+=n){const l=i[a],c=i[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function Ru(i,t,e,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],h=s[1];let u=0;for(let d=t;d<e;d+=n){const f=i[d]-c,_=i[d+1]-h;o[u++]=c+f*a-_*l,o[u++]=h+f*l+_*a;for(let y=d+2;y<d+n;++y)o[u++]=i[y]}return o&&o.length!=u&&(o.length=u),o}function W_(i,t,e,n,r,s,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=t;u<e;u+=n){const d=i[u]-l,f=i[u+1]-c;a[h++]=l+r*d,a[h++]=c+s*f;for(let _=u+2;_<u+n;++_)a[h++]=i[_]}return a&&a.length!=h&&(a.length=h),a}function X_(i,t,e,n,r,s,o){o=o||[];let a=0;for(let l=t;l<e;l+=n){o[a++]=i[l]+r,o[a++]=i[l+1]+s;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const hc=yi();class z_ extends Ci{constructor(){super(),this.extent_=qe(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vg(function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return et()}closestPointXY(t,e,n,r){return et()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return et()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&rs(e),this.extentRevision_=this.getRevision()}return f_(this.extent_,t)}rotate(t,e){et()}scale(t,e,n){et()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return et()}getType(){return et()}applyTransform(t){et()}intersectsExtent(t){return et()}translate(t,e){et()}transform(t,e){const n=ie(t),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=Te(c)/Te(l);return vi(hc,c[0],c[3],h,-h,0,0,0),Bn(s,0,s.length,a,hc,o),Xr(n,e)(s,o,a)}:Xr(n,e);return this.applyTransform(r),this}}const Tu=z_;class ks extends Tu{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Bt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(wt(this.geometries_[t],ut.CHANGE,this.changed,this))}clone(){const t=new ks(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,r){if(r<$n(this.getExtent(),t,e))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,e,n,r);return r}containsXY(t,e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].containsXY(t,e))return!0;return!1}computeExtent(t){rs(t);const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)pu(t,e[n].getExtent());return t}getGeometries(){return uc(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let r=!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(r=!0)}if(r){const s=new ks(null);return s.setGeometriesArray(e),s}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Wi(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(uc(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function uc(i){const t=[];for(let e=0,n=i.length;e<n;++e)t.push(i[e].clone());return t}const B_=ks;class Y_{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?ie(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=ie(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return et()}readFeature(t,e){return et()}readFeatures(t,e){return et()}readGeometry(t,e){return et()}readProjection(t){return et()}writeFeature(t,e){return et()}writeFeatures(t,e){return et()}writeGeometry(t,e){return et()}}function Su(i,t,e){const n=e?ie(e.featureProjection):null,r=e?ie(e.dataProjection):null;let s;if(n&&r&&!gi(n,r)?s=(t?i.clone():i).transform(t?n:r,t?r:n):s=i,t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*o)/o;return l};s===i&&(s=i.clone()),s.applyTransform(a)}return s}function lx(i,t){const e=t?ie(t.featureProjection):null,n=t?ie(t.dataProjection):null;return e&&n&&!gi(e,n)?G_(i,n,e):i}class V_ extends Y_{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(ms(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(ms(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return et()}readFeaturesFromObject(t,e){return et()}readGeometry(t,e){return this.readGeometryFromObject(ms(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return et()}readProjection(t){return this.readProjectionFromObject(ms(t))}readProjectionFromObject(t){return et()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return et()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return et()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return et()}}function ms(i){if(typeof i=="string"){const t=JSON.parse(i);return t||null}else return i!==null?i:null}const U_=V_;class K_ extends Tu{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return _u(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return et()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=dc(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){et()}setLayout(t,e,n){let r;if(t)r=dc(t);else{for(let s=0;s<n;++s)if(e.length===0){this.layout="XY",this.stride=2;return}else e=e[0];r=e.length,t=$_(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Ru(n,0,n.length,r,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=Wi(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();W_(r,0,r.length,s,t,e,n,r),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const r=this.getStride();X_(n,0,n.length,r,t,e,n),this.changed()}}}function $_(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function dc(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function H_(i,t,e){const n=i.getFlatCoordinates();if(n){const r=i.getStride();return Bn(n,0,n.length,r,t,e)}else return null}const Zn=K_;function fc(i,t,e,n,r,s,o){const a=i[t],l=i[t+1],c=i[e]-a,h=i[e+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((r-a)*c+(s-l)*h)/(c*c+h*h);if(d>1)u=e;else if(d>0){for(let f=0;f<n;++f)o[f]=Di(i[t+f],i[e+f],d);o.length=n;return}else u=t}for(let d=0;d<n;++d)o[d]=i[u+d];o.length=n}function il(i,t,e,n,r){let s=i[t],o=i[t+1];for(t+=n;t<e;t+=n){const a=i[t],l=i[t+1],c=zn(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function nl(i,t,e,n,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];r=il(i,t,a,n,r),t=a}return r}function Z_(i,t,e,n,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];r=nl(i,t,a,n,r),t=a[a.length-1]}return r}function rl(i,t,e,n,r,s,o,a,l,c,h){if(t==e)return c;let u,d;if(r===0)if(d=zn(o,a,i[t],i[t+1]),d<c){for(u=0;u<n;++u)l[u]=i[t+u];return l.length=n,d}else return c;h=h||[NaN,NaN];let f=t+n;for(;f<e;)if(fc(i,f-n,f,n,o,a,h),d=zn(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(fc(i,e-n,t,n,o,a,h),d=zn(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function sl(i,t,e,n,r,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const f=e[u];c=rl(i,t,f,n,r,s,o,a,l,c,h),t=f}return c}function q_(i,t,e,n,r,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const f=e[u];c=sl(i,t,f,n,r,s,o,a,l,c,h),t=f[f.length-1]}return c}function J_(i,t,e,n){for(let r=0,s=e.length;r<s;++r)i[t++]=e[r];return t}function uo(i,t,e,n){for(let r=0,s=e.length;r<s;++r){const o=e[r];for(let a=0;a<n;++a)i[t++]=o[a]}return t}function ol(i,t,e,n,r){r=r||[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=uo(i,t,e[o],n);r[s++]=l,t=l}return r.length=s,r}function Q_(i,t,e,n,r){r=r||[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=ol(i,t,e[o],n,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function al(i,t,e,n,r,s,o){const a=(e-t)/n;if(a<3){for(;t<e;t+=n)s[o++]=i[t],s[o++]=i[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,e-n];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const _=i[d],y=i[d+1],m=i[u],x=i[u+1];for(let C=d+n;C<u;C+=n){const b=i[C],T=i[C+1],L=S_(b,T,_,y,m,x);L>f&&(h=C,f=L)}f>r&&(l[(h-t)/n]=1,d+n<h&&c.push(d,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(s[o++]=i[t+u*n],s[o++]=i[t+u*n+1]);return o}function tp(i,t,e,n,r,s,o,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];o=al(i,t,h,n,r,s,o),a.push(o),t=h}return o}function Mn(i,t){return t*Math.round(i/t)}function ep(i,t,e,n,r,s,o){if(t==e)return o;let a=Mn(i[t],r),l=Mn(i[t+1],r);t+=n,s[o++]=a,s[o++]=l;let c,h;do if(c=Mn(i[t],r),h=Mn(i[t+1],r),t+=n,t==e)return s[o++]=c,s[o++]=h,o;while(c==a&&h==l);for(;t<e;){const u=Mn(i[t],r),d=Mn(i[t+1],r);if(t+=n,u==c&&d==h)continue;const f=c-a,_=h-l,y=u-a,m=d-l;if(f*m==_*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(_<0&&m<_||_==m||_>0&&m>_)){c=u,h=d;continue}s[o++]=c,s[o++]=h,a=c,l=h,c=u,h=d}return s[o++]=c,s[o++]=h,o}function Iu(i,t,e,n,r,s,o,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];o=ep(i,t,h,n,r,s,o),a.push(o),t=h}return o}function ip(i,t,e,n,r,s,o,a){for(let l=0,c=e.length;l<c;++l){const h=e[l],u=[];o=Iu(i,t,h,n,r,s,o,u),a.push(u),t=h[h.length-1]}return o}function Ou(i,t,e,n,r){let s;for(t+=n;t<e;t+=n)if(s=r(i.slice(t-n,t),i.slice(t,t+n)),s)return s;return!1}function fn(i,t,e,n,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<e;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function zr(i,t,e,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];r[s++]=fn(i,t,l,n,r[s]),t=l}return r.length=s,r}function aa(i,t,e,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];r[s++]=l.length===1&&l[0]===t?[]:zr(i,t,l,n,r[s]),t=l[l.length-1]}return r.length=s,r}function Au(i,t,e,n,r,s,o){let a,l;const c=(e-t)/n;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let h=i[t],u=i[t+1],d=0;const f=[0];for(let m=t+n;m<e;m+=n){const x=i[m],C=i[m+1];d+=Math.sqrt((x-h)*(x-h)+(C-u)*(C-u)),f.push(d),h=x,u=C}const _=r*d,y=zg(f,_);y<0?(l=(_-f[-y-2])/(f[-y-1]-f[-y-2]),a=t+(-y-2)*n):a=t+y*n}o=o>1?o:2,s=s||new Array(o);for(let h=0;h<o;++h)s[h]=a===void 0?NaN:l===void 0?i[a+h]:Di(i[a+h],i[a+n+h],l);return s}function la(i,t,e,n,r,s){if(e==t)return null;let o;if(r<i[t+n-1])return s?(o=i.slice(t,t+n),o[n-1]=r,o):null;if(i[e-1]<r)return s?(o=i.slice(e-n,e),o[n-1]=r,o):null;if(r==i[t+n-1])return i.slice(t,t+n);let a=t/n,l=e/n;for(;a<l;){const d=a+l>>1;r<i[(d+1)*n-1]?l=d:a=d+1}const c=i[a*n-1];if(r==c)return i.slice((a-1)*n,(a-1)*n+n);const h=i[(a+1)*n-1],u=(r-c)/(h-c);o=[];for(let d=0;d<n-1;++d)o.push(Di(i[(a-1)*n+d],i[a*n+d],u));return o.push(r),o}function np(i,t,e,n,r,s,o){if(o)return la(i,t,e[e.length-1],n,r,s);let a;if(r<i[n-1])return s?(a=i.slice(0,n),a[n-1]=r,a):null;if(i[i.length-1]<r)return s?(a=i.slice(i.length-n),a[n-1]=r,a):null;for(let l=0,c=e.length;l<c;++l){const h=e[l];if(t!=h){if(r<i[t+n-1])return null;if(r<=i[h-1])return la(i,t,h,n,r,!1);t=h}}return null}function rp(i,t,e,n,r){return!yu(r,function(o){return!Dn(i,t,e,n,o[0],o[1])})}function Dn(i,t,e,n,r,s){let o=0,a=i[e-n],l=i[e-n+1];for(;t<e;t+=n){const c=i[t],h=i[t+1];l<=s?h>s&&(c-a)*(s-l)-(r-a)*(h-l)>0&&o++:h<=s&&(c-a)*(s-l)-(r-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function ll(i,t,e,n,r,s){if(e.length===0||!Dn(i,t,e[0],n,r,s))return!1;for(let o=1,a=e.length;o<a;++o)if(Dn(i,e[o-1],e[o],n,r,s))return!1;return!0}function sp(i,t,e,n,r,s){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){const l=e[o];if(ll(i,t,l,n,r,s))return!0;t=l[l.length-1]}return!1}function fo(i,t,e,n,r){const s=mu(qe(),i,t,e,n);return ke(r,s)?un(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Ou(i,t,e,n,function(o,a){return g_(r,o,a)}):!1}function op(i,t,e,n,r){for(let s=0,o=e.length;s<o;++s){if(fo(i,t,e[s],n,r))return!0;t=e[s]}return!1}function Lu(i,t,e,n,r){return!!(fo(i,t,e,n,r)||Dn(i,t,e,n,r[0],r[1])||Dn(i,t,e,n,r[0],r[3])||Dn(i,t,e,n,r[2],r[1])||Dn(i,t,e,n,r[2],r[3]))}function Mu(i,t,e,n,r){if(!Lu(i,t,e[0],n,r))return!1;if(e.length===1)return!0;for(let s=1,o=e.length;s<o;++s)if(rp(i,e[s-1],e[s],n,r)&&!fo(i,e[s-1],e[s],n,r))return!1;return!0}function ap(i,t,e,n,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];if(Mu(i,t,a,n,r))return!0;t=a[a.length-1]}return!1}function Pu(i,t,e,n){let r=i[t],s=i[t+1],o=0;for(let a=t+n;a<e;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class Ns extends Zn{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?ki(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Ns(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<$n(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(il(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))}forEachSegment(t){return Ou(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,la(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=al(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ns(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return fo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uo(this.flatCoordinates,0,t,this.stride),this.changed()}}const ca=Ns;class Gs extends Zn{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const h=s[l];l===0&&(r=h.getLayout()),ki(o,h.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?ki(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Gs(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<$n(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sl(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,np(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return zr(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new ca(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=new ca(t.slice(s,l),n);r.push(c),s=l}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=Au(e,n,l,s,.5);ki(t,c),n=l}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=tp(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new Gs(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return op(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ol(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const lp=Gs;class cl extends Zn{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new cl(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){const s=this.flatCoordinates,o=zn(t,e,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}else return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return h_(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Ha(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=J_(this.flatCoordinates,0,t,this.stride),this.changed()}}const js=cl;class hl extends Zn{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?ki(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new hl(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){if(r<$n(this.getExtent(),t,e))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=zn(t,e,s[a],s[a+1]);if(c<r){r=c;for(let h=0;h<o;++h)n[h]=s[a+h];n.length=o}}return r}getCoordinates(){return fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new js(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=n){const a=new js(t.slice(s,s+n),e);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let r=0,s=e.length;r<s;r+=n){const o=e[r],a=e[r+1];if(Ha(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uo(this.flatCoordinates,0,t,this.stride),this.changed()}}const Du=hl;function Fu(i,t,e,n){let r=0,s=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function ku(i,t,e,n){let r=0;for(let s=0,o=e.length;s<o;++s){const a=e[s];r+=Fu(i,t,a,n),t=a}return r}function cp(i,t,e,n){let r=0;for(let s=0,o=e.length;s<o;++s){const a=e[s];r+=ku(i,t,a,n),t=a[a.length-1]}return r}class Ws extends Zn{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Ws(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,r){return r<$n(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(il(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))}getArea(){return Fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=al(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ws(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uo(this.flatCoordinates,0,t,this.stride),this.changed()}}const gc=Ws;function Nu(i,t,e,n,r,s,o){let a,l,c,h,u,d,f;const _=r[s+1],y=[];for(let C=0,b=e.length;C<b;++C){const T=e[C];for(h=i[T-n],d=i[T-n+1],a=t;a<T;a+=n)u=i[a],f=i[a+1],(_<=d&&f<=_||d<=_&&_<=f)&&(c=(_-d)/(f-d)*(u-h)+h,y.push(c)),h=u,d=f}let m=NaN,x=-1/0;for(y.sort(Yn),h=y[0],a=1,l=y.length;a<l;++a){u=y[a];const C=Math.abs(u-h);C>x&&(c=(h+u)/2,ll(i,t,e,n,c,_)&&(m=c,x=C)),h=u}return isNaN(m)&&(m=r[s]),o?(o.push(m,_,x),o):[m,_,x]}function hp(i,t,e,n,r){let s=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];s=Nu(i,t,l,n,r,2*o,s),t=l[l.length-1]}return s}function up(i,t,e,n){for(;t<e-n;){for(let r=0;r<n;++r){const s=i[t+r];i[t+r]=i[e-n+r],i[e-n+r]=s}t+=n,e-=n}}function Gu(i,t,e,n){let r=0,s=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function ju(i,t,e,n,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){const a=e[s],l=Gu(i,t,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function dp(i,t,e,n,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];if(!ju(i,t,a,n,r))return!1;a.length&&(t=a[a.length-1])}return!0}function ha(i,t,e,n,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){const a=e[s],l=Gu(i,t,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&up(i,t,a,n),t=a}return t}function _c(i,t,e,n,r){for(let s=0,o=e.length;s<o;++s)t=ha(i,t,e[s],n,r);return t}class xn extends Zn{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ki(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new xn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<$n(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sl(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))}containsXY(t,e){return ll(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return ku(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),ha(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,zr(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Wi(this.getExtent());this.flatInteriorPoint_=Nu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new js(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new gc(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new gc(e.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;ju(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ha(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Iu(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new xn(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return Mu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ol(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function pc(i){const t=i[0],e=i[1],n=i[2],r=i[3],s=[t,e,t,r,n,r,n,e,t,e];return new xn(s,"XY",[s.length])}function fp(i,t,e,n){const r=[];let s=qe();for(let o=0,a=e.length;o<a;++o){const l=e[o];s=_u(i,t,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class Xs extends Zn{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const h=s[l];l===0&&(r=h.getLayout());const u=o.length,d=h.getEnds();for(let f=0,_=d.length;f<_;++f)d[f]+=u;ki(o,h.getFlatCoordinates()),a.push(d)}e=r,t=o,n=a}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;ki(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let r=0,s=e.length;r<s;++r)e[r]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=this.endss_[r].slice();const n=new Xs(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,r){return r<$n(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Z_(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),q_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))}containsXY(t,e){return sp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return cp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),_c(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,aa(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=fp(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=hp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Du(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;dp(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=_c(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=ip(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new Xs(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const n=this.endss_[t].slice(),r=n[n.length-1];if(e!==0)for(let s=0,o=n.length;s<o;++s)n[s]-=e;return new xn(this.flatCoordinates.slice(e,r),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),c=l[l.length-1];if(s!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=s;const h=new xn(e.slice(s,c),t,l);r.push(h),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return ap(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Q_(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const gp=Xs;class _p extends U_{constructor(t){t=t||{},super(),this.dataProjection=ie(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=ie(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const r=ua(n.geometry,e),s=new Qg;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&s.setGeometryName(n.geometry_name),s.setGeometry(r),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(t,e){const n=t;let r=null;if(n.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],e))}else r=[this.readFeatureFromObject(t,e)];return r}readGeometryFromObject(t,e){return ua(t,e)}readProjectionFromObject(t){const e=t.crs;let n;return e?e.type=="name"?n=ie(e.properties.name):e.type==="EPSG"?n=ie("EPSG:"+e.properties.code):vt(!1,36):n=this.dataProjection,n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(n.id=r),!t.hasProperties())return n;const s=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=da(o,e),delete s[t.getGeometryName()]),_r(s)||(n.properties=s),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let r=0,s=t.length;r<s;++r)n.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return da(t,this.adaptOptions(e))}}function ua(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=mp(i);break}case"LineString":{e=yp(i);break}case"Polygon":{e=Cp(i);break}case"MultiPoint":{e=xp(i);break}case"MultiLineString":{e=vp(i);break}case"MultiPolygon":{e=Ep(i);break}case"GeometryCollection":{e=pp(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return Su(e,!1,t)}function pp(i,t){const e=i.geometries.map(function(n){return ua(n,t)});return new B_(e)}function mp(i){return new js(i.coordinates)}function yp(i){return new ca(i.coordinates)}function vp(i){return new lp(i.coordinates)}function xp(i){return new Du(i.coordinates)}function Ep(i){return new gp(i.coordinates)}function Cp(i){return new xn(i.coordinates)}function da(i,t){i=Su(i,!0,t);const e=i.getType();let n;switch(e){case"Point":{n=Ip(i);break}case"LineString":{n=bp(i);break}case"Polygon":{n=Op(i,t);break}case"MultiPoint":{n=Tp(i);break}case"MultiLineString":{n=Rp(i);break}case"MultiPolygon":{n=Sp(i,t);break}case"GeometryCollection":{n=wp(i,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function wp(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return da(n,t)})}}function bp(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function Rp(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function Tp(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function Sp(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function Ip(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function Op(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}const Ap=_p,kt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Lp extends Ci{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[kt.OPACITY]=t.opacity!==void 0?t.opacity:1,vt(typeof e[kt.OPACITY]=="number",64),e[kt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[kt.Z_INDEX]=t.zIndex,e[kt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[kt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[kt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[kt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=ce(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return et()}getLayerStatesArray(t){return et()}getExtent(){return this.get(kt.EXTENT)}getMaxResolution(){return this.get(kt.MAX_RESOLUTION)}getMinResolution(){return this.get(kt.MIN_RESOLUTION)}getMinZoom(){return this.get(kt.MIN_ZOOM)}getMaxZoom(){return this.get(kt.MAX_ZOOM)}getOpacity(){return this.get(kt.OPACITY)}getSourceState(){return et()}getVisible(){return this.get(kt.VISIBLE)}getZIndex(){return this.get(kt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(kt.EXTENT,t)}setMaxResolution(t){this.set(kt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(kt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(kt.MAX_ZOOM,t)}setMinZoom(t){this.set(kt.MIN_ZOOM,t)}setOpacity(t){vt(typeof t=="number",64),this.set(kt.OPACITY,t)}setVisible(t){this.set(kt.VISIBLE,t)}setZIndex(t){this.set(kt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Wu=Lp,_n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Mp extends Wu{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(kt.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(kt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Bt(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=wt(t,ut.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(kt.MAP,t)}getMapInternal(){return this.get(kt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Bt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Bt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=wt(t,_n.PRECOMPOSE,function(e){const r=e.frameState.layerStatesArray,s=this.getLayerState(!1);vt(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=wt(this,ut.CHANGE,t.render,t),this.changed())}setSource(t){this.set(kt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function ul(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const os=Mp;class Pp extends os{constructor(t){t=t||{},super(t)}}const Dp=Pp,mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Fp extends hu{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return et()}getData(t){return null}prepareFrame(t){return et()}renderFrame(t,e){return et()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(function(r,s){const o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,s,o)}).bind(this)}forEachFeatureAtCoordinate(t,e,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===mt.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=mt.LOADED&&e!=mt.ERROR&&t.addEventListener(ut.CHANGE,this.boundHandleImageChange_),e==mt.IDLE&&(t.load(),e=t.getState()),e==mt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const kp=Fp;class Np extends Ei{constructor(t,e,n,r){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=r}}const Xu=Np,Gp=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,jp=/^([a-z]*)$|^hsla?\(.*\)$/i;function zu(i){return typeof i=="string"?i:Bu(i)}function Wp(i){const t=document.createElement("div");if(t.style.color=i,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}const Xp=function(){const t={};let e=0;return function(n){let r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){let s=0;for(const o in t)s++&3||(delete t[o],--e)}r=zp(n),t[n]=r,++e}return r}}();function zs(i){return Array.isArray(i)?i:Xp(i)}function zp(i){let t,e,n,r,s;if(jp.exec(i)&&(i=Wp(i)),Gp.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(i.substr(1+0*a,a),16),e=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?r=parseInt(i.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,l&&(r=(r<<4)+r)),s=[t,e,n,r/255]}else i.startsWith("rgba(")?(s=i.slice(5,-1).split(",").map(Number),mc(s)):i.startsWith("rgb(")?(s=i.slice(4,-1).split(",").map(Number),s.push(1),mc(s)):vt(!1,14);return s}function mc(i){return i[0]=ce(i[0]+.5|0,0,255),i[1]=ce(i[1]+.5|0,0,255),i[2]=ce(i[2]+.5|0,0,255),i[3]=ce(i[3],0,1),i}function Bu(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+t+","+e+","+n+","+r+")"}function Ke(i,t,e,n){let r;return e&&e.length?r=e.shift():Ua?r=new OffscreenCanvas(i||300,t||300):r=document.createElement("canvas"),i&&(r.width=i),t&&(r.height=t),r.getContext("2d",n)}function Yu(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function yc(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function fa(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Bp(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Yp(i,t){const e=i.childNodes;for(let n=0;;++n){const r=e[n],s=t[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}const vc=[];let nr=null;function Vp(){const i=document.createElement("canvas");i.width=1,i.height=1,nr=i.getContext("2d")}class Up extends kp{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=yi(),this.pixelTransform=yi(),this.inversePixelTransform=yi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){nr||Vp(),nr.clearRect(0,0,1,1);let r;try{nr.drawImage(t,e,n,1,1,0,0,1,1),r=nr.getImageData(0,0,1,1).data}catch{return nr=null,null}return r}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!n||t&&t.style.backgroundColor&&Kn(zs(t.style.backgroundColor),zs(n)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Ke();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const r=Hn(n),s=co(n),o=lo(n),a=ao(n);ve(e.coordinateToPixelTransform,r),ve(e.coordinateToPixelTransform,s),ve(e.coordinateToPixelTransform,o),ve(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;ve(l,r),ve(l,s),ve(l,o),ve(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,n){const r=this.getLayer();if(r.hasListener(t)){const s=new Xu(t,this.inversePixelTransform,n,e);r.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(_n.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(_n.POSTRENDER,t,e)}getRenderTransform(t,e,n,r,s,o,a){const l=s/2,c=o/2,h=r/e,u=-h,d=-t[0]+a,f=-t[1];return vi(this.tempTransform,l,c,h,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const dl=Up,Re={ANIMATING:0,INTERACTING:1};class Kp extends dl{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(e.extent!==void 0&&(l=Xn(l,Fi(e.extent,r.projection))),!a[Re.ANIMATING]&&!a[Re.INTERACTING]&&!ho(l))if(o){const c=r.projection,h=o.getImage(l,s,n,c);h&&(this.loadImage(h)?this.image_=h:h.getState()===mt.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),r=ve(e.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!ns(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Lt(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const h=Te(o),u=Math.floor(a.height*((o[3]-r[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(t,e){const n=this.image_,r=n.getExtent(),s=n.getResolution(),o=n.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],l=t.pixelRatio,c=t.viewState,h=c.center,u=c.resolution,d=l*s/(u*o),f=t.extent,_=c.resolution,y=c.rotation,m=Math.round(Lt(f)/_*l),x=Math.round(Te(f)/_*l);vi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,y,-m/2,-x/2),oo(this.inversePixelTransform,this.pixelTransform);const C=Ka(this.pixelTransform);this.useContainer(e,C,this.getBackground(t));const b=this.context,T=b.canvas;T.width!=m||T.height!=x?(T.width=m,T.height=x):this.containerReused||b.clearRect(0,0,m,x);let L=!1,P=!0;if(a.extent){const ct=Fi(a.extent,c.projection);P=ke(ct,t.extent),L=P&&!un(ct,t.extent),L&&this.clipUnrotated(b,t,ct)}const D=n.getImage(),W=vi(this.tempTransform,m/2,x/2,d,d,0,o*(r[0]-h[0])/s,o*(h[1]-r[3])/s);this.renderedResolution=s*l/o;const z=D.width*W[0],V=D.height*W[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),P&&z>=.5&&V>=.5){const ct=W[4],rt=W[5],q=a.opacity;let Dt;q!==1&&(Dt=b.globalAlpha,b.globalAlpha=q),b.drawImage(D,0,0,+D.width,+D.height,ct,rt,z,V),q!==1&&(b.globalAlpha=Dt)}return this.postRender(b,t),L&&b.restore(),b.imageSmoothingEnabled=!0,C!==T.style.transform&&(T.style.transform=C),this.container}}const $p=Kp;class Hp extends Dp{constructor(t){super(t)}createRenderer(){return new $p(this)}getData(t){return super.getData(t)}}const Zp=Hp,Vu=.5;class qp extends is{constructor(t,e,n,r){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=r}changed(){this.dispatchEvent(ut.CHANGE)}getExtent(){return this.extent}getImage(){return et()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){et()}}const Uu=qp,Jp=10,xc=.25;class Qp{constructor(t,e,n,r,s,o){this.sourceProj_=t,this.targetProj_=e;let a={};const l=Xr(this.targetProj_,this.sourceProj_);this.transformInv_=function(C){const b=C[0]+"/"+C[1];return a[b]||(a[b]=l(C)),a[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Lt(r)==Lt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Lt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Lt(this.targetProj_.getExtent()):null;const c=Hn(n),h=co(n),u=lo(n),d=ao(n),f=this.transformInv_(c),_=this.transformInv_(h),y=this.transformInv_(u),m=this.transformInv_(d),x=Jp+(o?Math.max(0,Math.ceil(Math.log2(ia(n)/(o*o*256*256)))):0);if(this.addQuad_(c,h,u,d,f,_,y,m,x),this.wrapsXInSource_){let C=1/0;this.triangles_.forEach(function(b,T,L){C=Math.min(C,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach((function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-C>this.sourceWorldWidth_/2){const T=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];T[0][0]-C>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-C>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-C>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);const L=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-L<this.sourceWorldWidth_/2&&(b.source=T)}}).bind(this))}a={}}addTriangle_(t,e,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,e,n]})}addQuad_(t,e,n,r,s,o,a,l,c){const h=ic([s,o,a,l]),u=this.sourceWorldWidth_?Lt(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let _=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=ic([t,e,n,r]);_=Lt(m)/this.targetWorldWidth_>xc||_}!f&&this.sourceProj_.isGlobal()&&u&&(_=u>xc||_)}if(!_&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!ke(h,this.maxSourceExtent_))return;let y=0;if(!_&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)_=!0;else if(y=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(c>0){if(!_){const m=[(t[0]+n[0])/2,(t[1]+n[1])/2],x=this.transformInv_(m);let C;f?C=(ur(s[0],d)+ur(a[0],d))/2-ur(x[0],d):C=(s[0]+a[0])/2-x[0];const b=(s[1]+a[1])/2-x[1];_=C*C+b*b>this.errorThresholdSquared_}if(_){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const m=[(e[0]+n[0])/2,(e[1]+n[1])/2],x=this.transformInv_(m),C=[(r[0]+t[0])/2,(r[1]+t[1])/2],b=this.transformInv_(C);this.addQuad_(t,e,m,C,s,o,x,b,c-1),this.addQuad_(C,m,n,r,b,x,a,l,c-1)}else{const m=[(t[0]+e[0])/2,(t[1]+e[1])/2],x=this.transformInv_(m),C=[(n[0]+r[0])/2,(n[1]+r[1])/2],b=this.transformInv_(C);this.addQuad_(t,m,C,r,s,x,b,l,c-1),this.addQuad_(m,e,n,C,x,o,a,b,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}y&11||this.addTriangle_(t,n,r,s,a,l),y&14||this.addTriangle_(t,n,e,s,a,o),y&&(y&13||this.addTriangle_(e,r,t,o,l,s),y&7||this.addTriangle_(e,r,n,o,l,a))}calculateSourceExtent(){const t=qe();return this.triangles_.forEach(function(e,n,r){const s=e.source;kr(t,s[0]),kr(t,s[1]),kr(t,s[2])}),t}getTriangles(){return this.triangles_}}const Ku=Qp;let Co;const $u=[];function Ec(i,t,e,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,r)),i.restore()}function wo(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function tm(){if(Co===void 0){const i=document.createElement("canvas").getContext("2d");i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",Ec(i,4,5,4,0),Ec(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;Co=wo(t,0)||wo(t,4)||wo(t,8)}return Co}function Bs(i,t,e,n){const r=el(e,t,i);let s=lc(t,n,e);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||ns(l,r)){const c=lc(i,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function em(i,t,e,n){const r=Wi(e);let s=Bs(i,t,r,n);return(!isFinite(s)||s<=0)&&yu(e,function(o){return s=Bs(i,t,o,n),isFinite(s)&&s>0}),s}function Hu(i,t,e,n,r,s,o,a,l,c,h,u){const d=Ke(Math.round(e*i),Math.round(e*t),$u);if(u||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function f(T){return Math.round(T*e)/e}d.globalCompositeOperation="lighter";const _=qe();l.forEach(function(T,L,P){pu(_,T.extent)});const y=Lt(_),m=Te(_),x=Ke(Math.round(e*y/n),Math.round(e*m/n));u||(x.imageSmoothingEnabled=!1);const C=e/n;l.forEach(function(T,L,P){const D=T.extent[0]-_[0],W=-(T.extent[3]-_[3]),z=Lt(T.extent),V=Te(T.extent);T.image.width>0&&T.image.height>0&&x.drawImage(T.image,c,c,T.image.width-2*c,T.image.height-2*c,D*C,W*C,z*C,V*C)});const b=Hn(o);return a.getTriangles().forEach(function(T,L,P){const D=T.source,W=T.target;let z=D[0][0],V=D[0][1],ct=D[1][0],rt=D[1][1],q=D[2][0],Dt=D[2][1];const H=f((W[0][0]-b[0])/s),Z=f(-(W[0][1]-b[1])/s),N=f((W[1][0]-b[0])/s),dt=f(-(W[1][1]-b[1])/s),Gt=f((W[2][0]-b[0])/s),Tt=f(-(W[2][1]-b[1])/s),Jt=z,M=V;z=0,V=0,ct-=Jt,rt-=M,q-=Jt,Dt-=M;const Se=[[ct,rt,0,0,N-H],[q,Dt,0,0,Gt-H],[0,0,ct,rt,dt-Z],[0,0,q,Dt,Tt-Z]],bt=I_(Se);if(bt){if(d.save(),d.beginPath(),tm()||!u){d.moveTo(N,dt);const Ot=4,Ie=H-N,De=Z-dt;for(let ne=0;ne<Ot;ne++)d.lineTo(N+f((ne+1)*Ie/Ot),dt+f(ne*De/(Ot-1))),ne!=Ot-1&&d.lineTo(N+f((ne+1)*Ie/Ot),dt+f((ne+1)*De/(Ot-1)));d.lineTo(Gt,Tt)}else d.moveTo(N,dt),d.lineTo(H,Z),d.lineTo(Gt,Tt);d.clip(),d.transform(bt[0],bt[2],bt[1],bt[3],H,Z),d.translate(_[0]-Jt,_[3]-M),d.scale(n/e,-n/e),d.drawImage(x.canvas,0,0),d.restore()}}),h&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(T,L,P){const D=T.target,W=(D[0][0]-b[0])/s,z=-(D[0][1]-b[1])/s,V=(D[1][0]-b[0])/s,ct=-(D[1][1]-b[1])/s,rt=(D[2][0]-b[0])/s,q=-(D[2][1]-b[1])/s;d.beginPath(),d.moveTo(V,ct),d.lineTo(W,z),d.lineTo(rt,q),d.closePath(),d.stroke()}),d.restore()),d.canvas}class im extends Uu{constructor(t,e,n,r,s,o,a){const l=t.getExtent(),c=e.getExtent(),h=c?Xn(n,c):n,u=Wi(h),d=Bs(t,e,u,r),f=Vu,_=new Ku(t,e,h,l,d*f,r),y=_.calculateSourceExtent(),m=o(y,d,s),x=m?mt.IDLE:mt.EMPTY,C=m?m.getPixelRatio():1;super(n,r,C,x),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=_,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=m,this.sourcePixelRatio_=C,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==mt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==mt.LOADED){const e=Lt(this.targetExtent_)/this.targetResolution_,n=Te(this.targetExtent_)/this.targetResolution_;this.canvas_=Hu(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==mt.IDLE){this.state=mt.LOADING,this.changed();const t=this.sourceImage_.getState();t==mt.LOADED||t==mt.ERROR?this.reproject_():(this.sourceListenerKey_=wt(this.sourceImage_,ut.CHANGE,function(e){const n=this.sourceImage_.getState();(n==mt.LOADED||n==mt.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Bt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const nm=im;class rm extends Ci{constructor(t){super(),this.projection=ie(t.projection),this.attributions_=Cc(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,r){e.viewResolver=n,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return et()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Cc(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Cc(i){return i?Array.isArray(i)?function(t){return i}:typeof i=="function"?i:function(t){return[i]}:null}const fl=rm,bo={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class sm extends Ei{constructor(t,e){super(t),this.image=e}}class om extends fl{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}findNearestResolution(t){if(this.resolutions_){const e=no(this.resolutions_,t,0);t=this.resolutions_[e]}return t}getImage(t,e,n,r){const s=this.getProjection();if(!s||!r||gi(s,r))return s&&(r=s),this.getImageInternal(t,e,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&gi(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&pr(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new nm(s,r,t,e,n,(function(o,a,l){return this.getImageInternal(o,a,l,s)}).bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,r){return et()}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case mt.LOADING:this.loading=!0,n=bo.IMAGELOADSTART;break;case mt.LOADED:this.loading=!1,n=bo.IMAGELOADEND;break;case mt.ERROR:this.loading=!1,n=bo.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new sm(n,e))}}function am(i,t){i.getImage().src=t}const lm=om;class cm extends Uu{constructor(t,e,n,r,s,o){super(t,e,n,mt.IDLE),this.src_=r,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.state=mt.IDLE,this.imageLoadFunction_=o}getImage(){return this.image_}handleImageError_(){this.state=mt.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){this.resolution===void 0&&(this.resolution=Te(this.extent)/this.image_.height),this.state=mt.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==mt.IDLE||this.state==mt.ERROR)&&(this.state=mt.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=gl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=Te(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function gl(i,t,e){const n=i;let r=!0,s=!1,o=!1;const a=[Ps(n,ut.LOAD,function(){o=!0,s||t()})];return n.src&&r_?(s=!0,n.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():e())})):a.push(Ps(n,ut.ERROR,e)),function(){r=!1,a.forEach(Bt)}}const hm=cm,ys="1.3.0";function wc(i,t){const e=[];Object.keys(t).forEach(function(r){t[r]!==null&&t[r]!==void 0&&e.push(r+"="+encodeURIComponent(t[r]))});const n=e.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}const en=4,bc=[101,101];class um extends lm{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:am,this.params_=Object.assign({},t.params),this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getFeatureInfoUrl(t,e,n,r){if(this.url_===void 0)return;const s=ie(n),o=this.getProjection();o&&o!==s&&(e=Bs(o,s,t,e),t=el(t,s,o));const a=cr(t,e,0,bc),l={SERVICE:"WMS",VERSION:ys,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(l,this.params_,r);const c=lr((t[0]-a[0])/e,en),h=lr((a[3]-t[1])/e,en);return l[this.v13_?"I":"X"]=c,l[this.v13_?"J":"Y"]=h,this.getRequestUrl_(a,bc,1,o||s,l)}getLegendUrl(t,e){if(this.url_===void 0)return;const n={SERVICE:"WMS",VERSION:ys,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(t!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;n.SCALE=t*r/s}return Object.assign(n,e),wc(this.url_,n)}getParams(){return this.params_}getImageInternal(t,e,n,r){if(this.url_===void 0)return null;e=this.findNearestResolution(e),n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const s=e/n,o=Wi(t),a=dn(Lt(t)/s,en),l=dn(Te(t)/s,en),c=cr(o,s,0,[a,l]),h=dn(this.ratio_*Lt(t)/s,en),u=dn(this.ratio_*Te(t)/s,en),d=cr(o,s,0,[h,u]),f=this.image_;if(f&&this.renderedRevision_==this.getRevision()&&f.getResolution()==e&&f.getPixelRatio()==n&&un(f.getExtent(),c))return f;const _={SERVICE:"WMS",VERSION:ys,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(_,this.params_),this.imageSize_[0]=oc(Lt(d)/s,en),this.imageSize_[1]=oc(Te(d)/s,en);const y=this.getRequestUrl_(d,this.imageSize_,n,r,_);return this.image_=new hm(d,e,n,y,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(ut.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,n,r,s){if(vt(this.url_!==void 0,9),s[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(s.STYLES=""),n!=1)switch(this.serverType_){case"geoserver":const l=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+l:s.FORMAT_OPTIONS="dpi:"+l;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:vt(!1,8);break}s.WIDTH=e[0],s.HEIGHT=e[1];const o=r.getAxisOrientation();let a;return this.v13_&&o.substr(0,2)=="ne"?a=[t[1],t[0],t[3],t[2]]:a=t,s.BBOX=a.join(","),wc(this.url_,s)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const t=this.params_.VERSION||ys;this.v13_=O_(t,"1.3")>=0}}const dm=um,We={ADD:"add",REMOVE:"remove"},Rc={LENGTH:"length"};class vs extends Ei{constructor(t,e,n){super(t),this.element=e,this.index=n}}class fm extends Ci{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,r=e.length;n<r;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Rc.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new vs(We.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new vs(We.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new vs(We.REMOVE,r,t)),this.dispatchEvent(new vs(We.ADD,e,t))}updateLength_(){this.set(Rc.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new uu(58)}}const pi=fm;class cn extends Ei{constructor(t,e){super(t),this.layer=e}}const Ro={LAYERS:"layers"};class _l extends Wu{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ro.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new pi(n.slice(),{unique:!0}):vt(typeof n.getArray=="function",43):n=new pi(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Bt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(wt(t,We.ADD,this.handleLayersAdd_,this),wt(t,We.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Bt);es(this.listenerKeys_);const e=t.getArray();for(let n=0,r=e.length;n<r;n++){const s=e[n];this.registerLayerListeners_(s),this.dispatchEvent(new cn("addlayer",s))}this.changed()}registerLayerListeners_(t){const e=[wt(t,gr.PROPERTYCHANGE,this.handleLayerChange_,this),wt(t,ut.CHANGE,this.handleLayerChange_,this)];t instanceof _l&&e.push(wt(t,"addlayer",this.handleLayerGroupAdd_,this),wt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[At(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new cn("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new cn("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new cn("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=At(e);this.listenerKeys_[n].forEach(Bt),delete this.listenerKeys_[n],this.dispatchEvent(new cn("removelayer",e)),this.changed()}getLayers(){return this.get(Ro.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new cn("removelayer",n[r]))}this.set(Ro.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=n,a=e.length;o<a;o++){const l=e[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Xn(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}}const Er=_l;class gm{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const r=Tc(t,e,n);return r in this.cache_?this.cache_[r]:null}set(t,e,n,r){const s=Tc(t,e,n);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Tc(i,t,e){const n=e?zu(e):"null";return t+":"+i+":"+n}const Ys=new gm;class _m extends Ya{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){et()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;vi(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),oo(r,n)}forEachFeatureAtCoordinate(t,e,n,r,s,o,a,l){let c;const h=e.viewState;function u(T,L,P,D){return s.call(o,L,T?P:null,D)}const d=h.projection,f=Eu(t.slice(),d),_=[[0,0]];if(d.canWrapX()&&r){const T=d.getExtent(),L=Lt(T);_.push([-L,0],[L,0])}const y=e.layerStatesArray,m=y.length,x=[],C=[];for(let T=0;T<_.length;T++)for(let L=m-1;L>=0;--L){const P=y[L],D=P.layer;if(D.hasRenderer()&&ul(P,h)&&a.call(l,D)){const W=D.getRenderer(),z=D.getSource();if(W&&z){const V=z.getWrapX()?f:t,ct=u.bind(null,P.managed);C[0]=V[0]+_[T][0],C[1]=V[1]+_[T][1],c=W.forEachFeatureAtCoordinate(C,e,n,ct,x)}if(c)return c}}if(x.length===0)return;const b=1/x.length;return x.forEach((T,L)=>T.distanceSq+=L*b),x.sort((T,L)=>T.distanceSq-L.distanceSq),x.some(T=>c=T.callback(T.feature,T.layer,T.geometry)),c}hasFeatureAtCoordinate(t,e,n,r,s,o){return this.forEachFeatureAtCoordinate(t,e,n,r,jr,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){et()}scheduleExpireIconCache(t){Ys.canExpireCache()&&t.postRenderFunctions.push(pm)}}function pm(i,t){Ys.expire()}const mm=_m,xs="ol-hidden",go="ol-unselectable",pl="ol-control",Sc="ol-collapsed",ym=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Ic=["style","variant","weight","size","lineHeight","family"],Zu=function(i){const t=i.match(ym);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=Ic.length;n<r;++n){const s=t[n+1];s!==void 0&&(e[Ic[n]]=s)}return e.families=e.family.split(/,\s?/),e},qu="10px sans-serif",Ni="#000",Vs="round",Br=[],Yr=0,mr="round",Vr=10,Ur="#000",Kr="center",Us="middle",Fn=[0,0,0,0],$r=1,Pi=new Ci;let rr=null,ga;const _a={},vm=function(){const t="32px ",e=["monospace","serif"],n=e.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,h,u){let d=!0;for(let f=0;f<n;++f){const _=e[f];if(o=Ks(c+" "+h+" "+t+_,r),u!=_){const y=Ks(c+" "+h+" "+t+u+","+_,r);d=d&&y!=o}}return!!d}function l(){let c=!0;const h=Pi.getKeys();for(let u=0,d=h.length;u<d;++u){const f=h[u];Pi.get(f)<100&&(a.apply(this,f.split(`
`))?(es(_a),rr=null,ga=void 0,Pi.set(f,100)):(Pi.set(f,Pi.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const h=Zu(c);if(!h)return;const u=h.families;for(let d=0,f=u.length;d<f;++d){const _=u[d],y=h.style+`
`+h.weight+`
`+_;Pi.get(y)===void 0&&(Pi.set(y,100,!0),a(h.style,h.weight,_)||(Pi.set(y,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),xm=function(){let i;return function(t){let e=_a[t];if(e==null){if(Ua){const n=Zu(t),r=Ju(t,"g");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);_a[t]=e}return e}}();function Ju(i,t){return rr||(rr=Ke(1,1)),i!=ga&&(rr.font=i,ga=rr.font),rr.measureText(t)}function Ks(i,t){return Ju(i,t).width}function Oc(i,t,e){if(t in e)return e[t];const n=t.split(`
`).reduce((r,s)=>Math.max(r,Ks(i,s)),0);return e[t]=n,n}function Em(i,t){const e=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,h=t.length;c<=h;c+=2){const u=t[c];if(u===`
`||c===h){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const d=t[c+1]||i.font,f=Ks(d,u);e.push(f),o+=f;const _=xm(d);n.push(_),l=Math.max(l,_)}return{width:s,height:a,widths:e,heights:n,lineWidths:r}}function Cm(i,t,e,n,r,s,o,a,l,c,h){i.save(),e!==1&&(i.globalAlpha*=e),t&&i.setTransform.apply(i,t),n.contextInstructions?(i.translate(l,c),i.scale(h[0],h[1]),wm(n,i)):h[0]<0||h[1]<0?(i.translate(l,c),i.scale(h[0],h[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,c,o*h[0],a*h[1]),i.restore()}function wm(i,t){const e=i.contextInstructions;for(let n=0,r=e.length;n<r;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}class bm extends mm{constructor(t){super(t),this.fontChangeListenerKey_=wt(Pi,gr.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=go+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const r=new Xu(t,void 0,e);n.dispatchEvent(r)}}disposeInternal(){Bt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(_n.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=t.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=e.length;o<a;++o){const l=e[o];t.layerIndex=o;const c=l.layer,h=c.getSourceState();if(!ul(l,n)||h!="ready"&&h!="undefined"){c.unrender();continue}const u=c.render(t,s);u&&(u!==s&&(this.children_.push(u),s=u),"getDeclutter"in c&&r.push(c))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);Yp(this.element_,this.children_),this.dispatchRenderEvent(_n.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}const Rm=bm;class Tm extends Ei{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}const sr=Tm;class Sm extends sr{constructor(t,e,n,r,s,o){super(t,e,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const an=Sm,ee={SINGLECLICK:"singleclick",CLICK:ut.CLICK,DBLCLICK:ut.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},pa={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Im extends is{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=wt(n,pa.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=wt(n,pa.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_,fu?{passive:!1}:!1)}emulateClick_(t){let e=new an(ee.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new an(ee.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;const n=new an(ee.SINGLECLICK,this.map_,t);this.dispatchEvent(n)}).bind(this),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==ee.POINTERUP||e.type==ee.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==ee.POINTERDOWN||e.type==ee.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new an(ee.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Bt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new an(ee.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const n in t){const r=t[n];this.down_[n]=typeof r=="function"?Vn:r}if(this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(wt(n,ee.POINTERMOVE,this.handlePointerMove_,this),wt(n,ee.POINTERUP,this.handlePointerUp_,this),wt(this.element_,ee.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(wt(this.element_.getRootNode(),ee.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new an(ee.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new an(ee.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Bt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Bt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Bt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Om=Im,ln={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Pe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},$s=1/0;class Am{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,es(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(t){vt(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=$s?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,r=e.length,s=e[t],o=n[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<r&&n[c]<n[l]?c:l;e[t]=e[h],n[t]=n[h],t=h}e[t]=s,n[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const n=this.elements_,r=this.priorities_,s=n[e],o=r[e];for(;e>t;){const a=this.getParentIndex_(e);if(r[a]>o)n[e]=n[a],r[e]=r[a],e=a;else break}n[e]=s,r[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let r=0;const s=e.length;let o,a,l;for(a=0;a<s;++a)o=e[a],l=t(o),l==$s?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,e[r++]=o);e.length=r,n.length=r,this.heapify_()}}const Lm=Am,tt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Mm extends Lm{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(ut.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===tt.LOADED||n===tt.ERROR||n===tt.EMPTY){n!==tt.ERROR&&e.removeEventListener(ut.CHANGE,this.boundHandleTileChange_);const r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0,r,s,o;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===tt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,s.load())}}const Pm=Mm;function Dm(i,t,e,n,r){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return $s;const s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}const ni={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Fm=42,ml=256;function Ac(i,t,e){return function(n,r,s,o,a){if(!n)return;if(!r&&!t)return n;const l=t?0:s[0]*r,c=t?0:s[1]*r,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,f=i[2]-l/2+h,_=i[1]+c/2+u,y=i[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),_>y&&(_=(y+_)/2,y=_);let m=ce(n[0],d,f),x=ce(n[1],_,y);if(o&&e&&r){const C=30*r;m+=-C*Math.log(1+Math.max(0,d-n[0])/C)+C*Math.log(1+Math.max(0,n[0]-f)/C),x+=-C*Math.log(1+Math.max(0,_-n[1])/C)+C*Math.log(1+Math.max(0,n[1]-y)/C)}return[m,x]}}function km(i){return i}function yl(i,t,e,n){const r=Lt(t)/e[0],s=Te(t)/e[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function vl(i,t,e){let n=Math.min(i,t);const r=50;return n*=Math.log(1+r*Math.max(0,i/t-1))/r+1,e&&(n=Math.max(n,e),n/=Math.log(1+r*Math.max(0,e/i-1))/r+1),ce(n,e/2,t*2)}function Nm(i,t,e,n){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=i[0],c=i[i.length-1],h=e?yl(l,e,o,n):l;if(a)return t?vl(r,h,c):ce(r,c,h);const u=Math.min(h,r),d=Math.floor(no(i,u,s));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}else return}}function Gm(i,t,e,n,r,s){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(o,a,l,c){if(o!==void 0){const h=r?yl(t,r,l,s):t;if(c)return n?vl(o,h,e):ce(o,e,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(i)-u),f=-a*(.5-u)+.5,_=Math.min(h,o),y=Math.floor(Math.log(t/_)/Math.log(i)+f),m=Math.max(d,y),x=t/Math.pow(i,m);return ce(x,e,h)}else return}}function Lc(i,t,e,n,r){return e=e!==void 0?e:!0,function(s,o,a,l){if(s!==void 0){const c=n?yl(i,n,a,r):i;return!e||!l?ce(s,t,c):vl(s,c,t)}else return}}function xl(i){if(i!==void 0)return 0}function Mc(i){if(i!==void 0)return i}function jm(i){const t=2*Math.PI/i;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Wm(i){return i=i||Os(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=i?0:t}}function Qu(i){return Math.pow(i,3)}function Cr(i){return 1-Qu(1-i)}function Xm(i){return 3*i*i-2*i*i*i}function zm(i){return i}const To=0;class Bm extends Ci{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Qa(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Cu(),t.center&&(t.center=Mi(t.center,this.projection_)),t.extent&&(t.extent=Fi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in ni)delete e[a];this.setProperties(e,!0);const n=Vm(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const r=Ym(t),s=n.constraint,o=Um(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenter();if(n){const r=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-e[3]+e[1]-r[1]),a=s/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=Mi(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Mi(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===e){n&&Es(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<e;++r){const h=arguments[r],u={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Xm,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=ur(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}Km(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(Re.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Re.ANIMATING]>0}getInteracting(){return this.hints_[Re.INTERACTING]>0}cancelAnimations(){this.setHint(Re.ANIMATING,-this.hints_[Re.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const r=this.animations_[e];if(r[0].callback&&Es(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],_=l.targetCenter[0],y=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+u*(_-d),x=f+u*(y-f);this.targetCenter_=[m,x]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(_,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?ur(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(Re.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Es(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-e[0],r[1]-e[1]],qa(n,t-this.getRotation()),A_(n,e)),n}calculateCenterZoom(t,e){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=e[0]-t*(e[0]-r[0])/s,a=e[1]-t*(e[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}else return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&oa(t,this.getProjection())}getCenterInternal(){return this.get(ni.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return bu(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();vt(e,1);const n=this.getResolution();vt(n!==void 0,2);const r=this.getRotation();return vt(r!==void 0,3),cr(e,n,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ni.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Fi(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Lt(t)/e[0],r=Te(t)/e[1];return Math.max(n,r)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(e/n)/Math.log(t);return function(s){return e/Math.pow(t,s*r)}}getRotation(){return this.get(ni.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/e;return function(o){return Math.log(n/o)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=So(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],e,n)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,r;if(this.resolutions_){const s=no(this.resolutions_,t,1);e=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(n/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=ce(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,ce(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(vt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){vt(!ho(t),25);const r=Fi(t,this.getProjection());n=pc(r)}else if(t.getType()==="Circle"){const r=Fi(t.getExtent(),this.getProjection());n=pc(r),n.rotate(this.getRotation(),Wi(r))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=s.length;u<d;u+=o){const f=s[u]*n-s[u+1]*r,_=s[u]*r+s[u+1]*n;a=Math.min(a,f),l=Math.min(l,_),c=Math.max(c,f),h=Math.max(h,_)}return[a,l,c,h]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const r=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=Wi(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*u-d[1]*h,_=d[1]*u+d[0]*h,y=this.getConstrainedCenter([f,_],l),m=e.callback?e.callback:Vn;e.duration!==void 0?this.animateInternal({resolution:l,center:y,duration:e.duration,easing:e.easing},m):(this.targetResolution_=l,this.targetCenter_=y,this.applyTargetState_(!1,!0),Es(m,!0))}centerOn(t,e,n){this.centerOnInternal(Mi(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(So(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),l=So(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,n);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=oa(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Mi(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Mi(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Mi(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ni.ROTATION)!==r&&this.set(ni.ROTATION,r),this.get(ni.RESOLUTION)!==o&&(this.set(ni.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ni.CENTER)||!Fs(this.get(ni.CENTER),a))&&this.set(ni.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const r=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Fs(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:Cr,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Re.INTERACTING,1)}endInteraction(t,e,n){n=n&&Mi(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.setHint(Re.INTERACTING,-1),this.resolveConstraints(t,e,n)}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function Es(i,t){setTimeout(function(){i(t)},0)}function Ym(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Ac(i.extent,i.constrainOnlyCenter,e)}const t=Qa(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Ac(e,!1,!1)}return km}function Vm(i){let t,e,n,o=i.minZoom!==void 0?i.minZoom:To,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,u=i.showFullExtent!==void 0?i.showFullExtent:!1,d=Qa(i.projection,"EPSG:3857"),f=d.getExtent();let _=i.constrainOnlyCenter,y=i.extent;if(!c&&!y&&d.isGlobal()&&(_=!1,y=f),i.resolutions!==void 0){const m=i.resolutions;e=m[o],n=m[a]!==void 0?m[a]:m[m.length-1],i.constrainResolution?t=Nm(m,h,!_&&y,u):t=Lc(e,n,h,!_&&y,u)}else{const x=(f?Math.max(Lt(f),Te(f)):360*Wr.degrees/d.getMetersPerUnit())/ml/Math.pow(2,To),C=x/Math.pow(2,28-To);e=i.maxResolution,e!==void 0?o=0:e=x/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(l,a):n=x/Math.pow(l,a):n=C),a=o+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,a-o),i.constrainResolution?t=Gm(l,e,n,h,!_&&y,u):t=Lc(e,n,h,!_&&y,u)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:l}}function Um(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?Wm():e===!1?Mc:typeof e=="number"?jm(e):Mc}else return xl}function Km(i){return!(i.sourceCenter&&i.targetCenter&&!Fs(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function So(i,t,e,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(t[0]/2-e[0])*n,l+=(e[1]-t[1]/2)*n,o=-o;const c=a*s-l*o,h=l*s+a*o;return[c,h]}const hn=Bm;class $m extends Ci{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){fa(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&fa(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Bt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Vn&&this.listenerKeys.push(wt(t,ln.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const El=$m;class Hm extends El{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+go+" "+pl+(this.collapsed_&&this.collapsible_?" "+Sc:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},n=[];let r=!0;const s=t.layerStatesArray;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(!ul(l,t.viewState))continue;const c=l.layer.getSource();if(!c)continue;const h=c.getAttributions();if(!h)continue;const u=h(t);if(u)if(r=r&&c.getAttributionsCollapsible()!==!1,Array.isArray(u))for(let d=0,f=u.length;d<f;++d)u[d]in e||(n.push(u[d]),e[u[d]]=!0);else u in e||(n.push(u),e[u]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Kn(e,this.renderedAttributions_)){Bp(this.ulElement_);for(let r=0,s=e.length;r<s;++r){const o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Sc),this.collapsed_?yc(this.collapseLabel_,this.label_):yc(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const Zm=Hm;class qm extends El{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+go+" "+pl,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(xs)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Cr}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(xs);!s&&n===0?this.element.classList.add(xs):s&&n!==0&&this.element.classList.remove(xs)}this.label_.style.transform=r}this.rotation_=n}}const Jm=qm;class Qm extends El{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(ut.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(ut.CLICK,this.handleClick_.bind(this,-n),!1);const d=e+" "+go+" "+pl,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:Cr})):n.setZoom(s)}}}const ty=Qm;function ey(i){i=i||{};const t=new pi;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new ty(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new Jm(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new Zm(i.attributionOptions)),t}const Pc={ACTIVE:"active"};class iy extends Ci{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Pc.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Pc.ACTIVE,t)}setMap(t){this.map_=t}}function ny(i,t,e){const n=i.getCenterInternal();if(n){const r=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:zm,center:i.getConstrainedCenter(r)})}}function Cl(i,t,e,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+t),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:e,duration:n!==void 0?n:250,easing:Cr})}const as=iy;class ry extends as{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==ee.DBLCLICK){const n=t.originalEvent,r=t.map,s=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();Cl(a,o,s,this.duration_),n.preventDefault(),e=!0}return!e}}const sy=ry;class oy extends as{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ee.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ee.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==ee.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==ee.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function wl(i){const t=i.length;let e=0,n=0;for(let r=0;r<t;r++)e+=i[r].clientX,n+=i[r].clientY;return[e/t,n/t]}const ls=oy;function ma(i){const t=arguments;return function(e){let n=!0;for(let r=0,s=t.length;r<s&&(n=n&&t[r](e),!!n);++r);return n}}const ay=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ly=function(i){const t=i.map.getTargetElement(),e=i.map.getOwnerDocument().activeElement;return t.contains(e)},td=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?ly(i):!0},cy=jr,ed=function(i){const t=i.originalEvent;return t.button==0&&!(i_&&n_&&t.ctrlKey)},id=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},hy=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},nd=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Io=function(i){const t=i.originalEvent;return vt(t!==void 0,56),t.pointerType=="mouse"},uy=function(i){const t=i.originalEvent;return vt(t!==void 0,56),t.isPrimary&&t.button===0};class dy extends ls{constructor(t){super({stopDown:ro}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:ma(id,uy);this.condition_=t.onFocusOnly?ma(td,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,n=wl(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const r=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],o=t.map.getView();L_(r,o.getResolution()),qa(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Cr})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}}const fy=dy;class gy extends ls{constructor(t){t=t||{},super({stopDown:ro}),this.condition_=t.condition?t.condition:ay,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Io(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===xl)return;const r=e.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Io(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Io(t)&&ed(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const _y=gy;class py extends Ya{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+n,r.top=Math.min(t[1],e[1])+n,r.width=Math.abs(e[0]-t[0])+n,r.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new xn([r])}getGeometry(){return this.geometry_}}const my=py,Cs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Oo extends Ei{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class yy extends ls{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new my(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:ed,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const r=n[0]-e[0],s=n[1]-e[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Oo(Cs.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Oo(e?Cs.BOXEND:Cs.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Oo(Cs.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const vy=yy;class xy extends vy{constructor(t){t=t||{};const e=t.condition?t.condition:hy;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:Cr})}}const Ey=xy,An={LEFT:37,UP:38,RIGHT:39,DOWN:40};class Cy extends as{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return id(e)&&nd(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==ut.KEYDOWN){const n=t.originalEvent,r=n.keyCode;if(this.condition_(t)&&(r==An.DOWN||r==An.LEFT||r==An.RIGHT||r==An.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==An.DOWN?c=-a:r==An.LEFT?l=-a:r==An.RIGHT?l=a:c=a;const h=[l,c];qa(h,o.getRotation()),ny(o,h,this.duration_),n.preventDefault(),e=!0}}return!e}}const wy=Cy;class by extends as{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:nd,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==ut.KEYDOWN||t.type==ut.KEYPRESS){const n=t.originalEvent,r=n.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){const s=t.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_,a=s.getView();Cl(a,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const Ry=by;class Ty{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Sy=Ty;class Iy extends as{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:cy;this.condition_=t.onFocusOnly?ma(td,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ut.WHEEL)return!0;const n=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==ut.WHEEL&&(s=r.deltaY,t_&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=du),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-ce(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Cl(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const Oy=Iy;class Ay extends ls{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=ro),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const h=s-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=h}this.lastAngle_=s;const o=t.map,a=o.getView();if(a.getConstraints().rotation===xl)return;const l=o.getViewport().getBoundingClientRect(),c=wl(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=o.getCoordinateFromPixelInternal(c),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}}const Ly=Ay;class My extends ls{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=ro),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();e!=1&&(this.lastScaleDelta_=e);const h=l.getViewport().getBoundingClientRect(),u=wl(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=l.getCoordinateFromPixelInternal(u),l.render(),c.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}else return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}}const Py=My;function Dy(i){i=i||{};const t=new pi,e=new Sy(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new _y),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new sy({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new fy({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new Ly),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new Py({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new wy),t.push(new Ry({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new Oy({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new Ey({duration:i.zoomDuration})),t}function Dc(i){return i[0]>0&&i[1]>0}function Fy(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function Ve(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}function rd(i){if(i instanceof os){i.setMapInternal(null);return}i instanceof Er&&i.getLayers().forEach(rd)}function sd(i,t){if(i instanceof os){i.setMapInternal(t);return}if(i instanceof Er){const e=i.getLayers().getArray();for(let n=0,r=e.length;n<r;++n)sd(e[n],t)}}let ky=class extends Ci{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=Ny(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:du,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=yi(),this.pixelToCoordinateTransform_=yi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||ey(),this.interactions=e.interactions||Dy({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Pm(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Pe.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Pe.VIEW,this.handleViewChanged_),this.addChangeListener(Pe.SIZE,this.handleSizeChanged_),this.addChangeListener(Pe.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof hn)&&t.view.then(function(r){n.setView(new hn(r))}),this.controls.addEventListener(We.ADD,(function(r){r.element.setMap(this)}).bind(this)),this.controls.addEventListener(We.REMOVE,(function(r){r.element.setMap(null)}).bind(this)),this.interactions.addEventListener(We.ADD,(function(r){r.element.setMap(this)}).bind(this)),this.interactions.addEventListener(We.REMOVE,(function(r){r.element.setMap(null)}).bind(this)),this.overlays_.addEventListener(We.ADD,(function(r){this.addOverlayInternal_(r.element)}).bind(this)),this.overlays_.addEventListener(We.REMOVE,(function(r){const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}).bind(this)),this.controls.forEach((function(r){r.setMap(this)}).bind(this)),this.interactions.forEach((function(r){r.setMap(this)}).bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){sd(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:jr,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(r){n.push(r)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(r){r instanceof Er?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const r=e.layerFilter!==void 0?e.layerFilter:jr,s=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]}getTarget(){return this.get(Pe.TARGET)}getTargetElement(){const t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null}getCoordinateFromPixel(t){return oa(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ve(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Pe.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof pi){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const r=t[e];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Mi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ve(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Pe.SIZE)}getView(){return this.get(Pe.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,r){return Dm(this.frameState_,t,e,n,r)}handleBrowserEvent(t,e){e=e||t.type;const n=new an(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===pa.POINTERDOWN||n===ut.WHEEL||n===ut.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[Re.ANIMATING]||o[Re.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(_n.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_n.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new sr(ln.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new sr(ln.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let r=0,s=n.length;r<s;++r)n[r](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,n=this.targetChangeHandlerKeys_.length;e<n;++e)Bt(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ut.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,fa(this.viewport_)}const t=this.getTargetElement();if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Rm(this)),this.mapBrowserEventHandler_=new Om(this,this.moveTolerance_);for(const r in ee)this.mapBrowserEventHandler_.addEventListener(ee[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ut.WHEEL,this.boundHandleBrowserEvent_,fu?{passive:!1}:!1);const e=this.getOwnerDocument().defaultView,n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[wt(n,ut.KEYDOWN,this.handleBrowserEvent,this),wt(n,ut.KEYPRESS,this.handleBrowserEvent,this),wt(e,ut.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Bt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Bt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=wt(t,gr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=wt(t,ut.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Bt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new cn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[wt(t,gr.PROPERTYCHANGE,this.render,this),wt(t,ut.CHANGE,this.render,this),wt(t,"addlayer",this.handleLayerAdd_,this),wt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){rd(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(e!==void 0&&Dc(e)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:cr(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:At(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=cr(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!ho(this.previousExtent_)&&!pr(s.extent,this.previousExtent_))&&(this.dispatchEvent(new sr(ln.MOVESTART,this,r)),this.previousExtent_=rs(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Re.ANIMATING]&&!s.viewHints[Re.INTERACTING]&&!pr(s.extent,this.previousExtent_)&&(this.dispatchEvent(new sr(ln.MOVEEND,this,s)),gu(s.extent,this.previousExtent_))),this.dispatchEvent(new sr(ln.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(ln.LOADSTART)||this.hasListener(ln.LOADEND)||this.hasListener(_n.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new cn("removelayer",e)),this.set(Pe.LAYERGROUP,t)}setSize(t){this.set(Pe.SIZE,t)}setTarget(t){this.set(Pe.TARGET,t)}setView(t){if(!t||t instanceof hn){this.set(Pe.VIEW,t);return}this.set(Pe.VIEW,new hn);const e=this;t.then(function(n){e.setView(new hn(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),s=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(e=[r,s],!Dc(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}};function Ny(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Er({layers:i.layers});e[Pe.LAYERGROUP]=n,e[Pe.TARGET]=i.target,e[Pe.VIEW]=i.view instanceof hn?i.view:new hn;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new pi(i.controls.slice()):(vt(typeof i.controls.getArray=="function",47),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new pi(i.interactions.slice()):(vt(typeof i.interactions.getArray=="function",48),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new pi(i.overlays.slice()):(vt(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new pi,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}const Gy=ky;class jy extends is{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(ut.CHANGE)}release(){this.state===tt.ERROR&&this.setState(tt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==tt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==tt.LOADED){t.interimTile=null;break}else t.getState()==tt.LOADING?e=t:t.getState()==tt.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==tt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){et()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const r=e-n+1e3/60;return r>=this.transition_?1:Qu(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const od=jy;class Wy extends od{constructor(t,e,n,r,s,o){super(t,e,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=tt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=tt.ERROR,this.unlistenImage_(),this.image_=Xy(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=tt.LOADED:this.state=tt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==tt.ERROR&&(this.state=tt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==tt.IDLE&&(this.state=tt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=gl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Xy(){const i=Ke(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const ad=Wy;class zy extends od{constructor(t,e,n,r,s,o,a,l,c,h,u,d){super(s,tt.IDLE,{interpolate:!!d}),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const m=_?Xn(f,_):f;if(ia(m)===0){this.state=tt.EMPTY;return}const x=t.getExtent();x&&(y?y=Xn(y,x):y=x);const C=r.getResolution(this.wrappedTileCoord_[0]),b=em(t,n,m,C);if(!isFinite(b)||b<=0){this.state=tt.EMPTY;return}const T=h!==void 0?h:Vu;if(this.triangulation_=new Ku(t,n,m,y,b*T,C),this.triangulation_.getTriangles().length===0){this.state=tt.EMPTY;return}this.sourceZ_=e.getZForResolution(b);let L=this.triangulation_.calculateSourceExtent();if(y&&(t.canWrapX()?(L[1]=ce(L[1],y[1],y[3]),L[3]=ce(L[3],y[1],y[3])):L=Xn(L,y)),!ia(L))this.state=tt.EMPTY;else{const P=e.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let D=P.minX;D<=P.maxX;D++)for(let W=P.minY;W<=P.maxY;W++){const z=c(this.sourceZ_,D,W,a);z&&this.sourceTiles_.push(z)}this.sourceTiles_.length===0&&(this.state=tt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((function(e,n,r){e&&e.getState()==tt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}).bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=tt.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Hu(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=tt.LOADED}this.changed()}load(){if(this.state==tt.IDLE){this.state=tt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(e,n,r){const s=e.getState();if(s==tt.IDLE||s==tt.LOADING){t++;const o=wt(e,ut.CHANGE,function(a){const l=e.getState();(l==tt.LOADED||l==tt.ERROR||l==tt.EMPTY)&&(Bt(o),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}).bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,r){e.getState()==tt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Bt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Yu(this.canvas_.getContext("2d")),$u.push(this.canvas_),this.canvas_=null),super.release()}}const ya=zy;class By{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return vt(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return vt(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){vt(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const Yy=By;function Fc(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function _o(i,t,e){return i+"/"+t+"/"+e}function ld(i){return _o(i[0],i[1],i[2])}function Vy(i){return i.split("/").map(Number)}function Uy(i){return(i[1]<<i[0])+i[2]}function Ky(i,t){const e=i[0],n=i[1],r=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const s=t.getFullTileRange(e);return s?s.containsXY(n,r):!0}class $y extends Yy{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),n=Vy(t)[0];this.forEach((function(r){r.tileCoord[0]!==n&&(this.remove(ld(r.tileCoord)),r.release())}).bind(this))}}const cd=$y,Ao={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class hd{constructor(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function tr(i,t,e,n,r){return r!==void 0?(r.minX=i,r.maxX=t,r.minY=e,r.maxY=n,r):new hd(i,t,e,n)}const ud=hd,Hy=[0,0,0],nn=5;class Zy{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,vt(Yg(this.resolutions_,function(r,s){return s-r},!0),17);let e;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,vt(this.origins_.length==this.resolutions_.length,20));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Hn(n)),vt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,vt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:ml,vt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new ud(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const r=this.getTileRangeForExtentAndZ(t,e);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([e,s,a])}forEachTileCoordParentTileRange(t,e,n,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=tr(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,c,n),e(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return tr(s,s+1,o,o+1,e)}const r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(e===r)return tr(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-r),c=Math.floor(s*l),h=Math.floor(o*l);if(e<r)return tr(c,c,h,h,n);const u=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return tr(c,u,h,d,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeExtent(t,e,n){const r=this.getOrigin(t),s=this.getResolution(t),o=Ve(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*s,l=r[0]+(e.maxX+1)*o[0]*s,c=r[1]+e.minY*o[1]*s,h=r[1]+(e.maxY+1)*o[1]*s;return xi(a,c,l,h,n)}getTileRangeForExtentAndZ(t,e,n){const r=Hy;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),tr(s,r[1],o,r[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Ve(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ve(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*s[0]*r,a=n[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return xi(o,a,l,c,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=Ve(this.getTileSize(o),this.tmpSize_);let h=a*(t-l[0])/n/c[0],u=a*(l[1]-e)/n/c[1];return r?(h=dn(h,nn)-1,u=dn(u,nn)-1):(h=lr(h,nn),u=lr(u,nn)),Fc(o,h,u,s)}getTileCoordForXYAndZ_(t,e,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=Ve(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/l[0],h=(o[1]-e)/a/l[1];return r?(c=dn(c,nn)-1,h=dn(h,nn)-1):(c=lr(c,nn),h=lr(h,nn)),Fc(n,c,h,s)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=no(this.resolutions_,t,e||0);return ce(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Lu(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n}}const dd=Zy;function fd(i){let t=i.getDefaultTileGrid();return t||(t=tv(i),i.setDefaultTileGrid(t)),t}function qy(i,t,e){const n=t[0],r=i.getTileCoordCenter(t),s=bl(e);if(ns(s,r))return t;{const o=Lt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}}function Jy(i,t,e,n){n=n!==void 0?n:"top-left";const r=gd(i,t,e);return new dd({extent:i,origin:d_(i,n),resolutions:r,tileSize:e})}function Qy(i){const t=i||{},e=t.extent||ie("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:gd(e,t.maxZoom,t.tileSize,t.maxResolution)};return new dd(n)}function gd(i,t,e,n){t=t!==void 0?t:Fm,e=Ve(e!==void 0?e:ml);const r=Te(i),s=Lt(i);n=n>0?n:Math.max(s/e[0],r/e[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function tv(i,t,e,n){const r=bl(i);return Jy(r,t,e,n)}function bl(i){i=ie(i);let t=i.getExtent();if(!t){const e=180*Wr.degrees/i.getMetersPerUnit();t=xi(-e,-e,e,e)}return t}class ev extends fl{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Ve(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new cd(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,c;for(let h=n.minX;h<=n.maxX;++h)for(let u=n.minY;u<=n.maxY;++u)l=_o(e,h,u),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===tt.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,n,r,s){return et()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:fd(t)}getTileCacheForProjection(t){const e=this.getProjection();return vt(e===null||gi(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),o=Ve(r.getTileSize(t),this.tmpSize);return s==1?o:Fy(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=qy(n,t,e)),Ky(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,r){}}class iv extends Ei{constructor(t,e){super(t),this.tile=e}}const nv=ev;function rv(i,t){const e=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(e,o[0].toString()).replace(n,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],h=t.getFullTileRange(c);return vt(h,55),(h.getHeight()-o[2]-1).toString()})}}function sv(i,t){const e=i.length,n=new Array(e);for(let r=0;r<e;++r)n[r]=rv(i[r],t);return ov(n)}function ov(i){return i.length===1?i[0]:function(t,e,n){if(t){const r=Uy(t),s=ur(r,i.length);return i[s](t,e,n)}else return}}function av(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const n=e[1].charCodeAt(0),r=e[2].charCodeAt(0);let s;for(s=n;s<=r;++s)t.push(i.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const n=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=n;r++)t.push(i.replace(e[0],r.toString()));return t}return t.push(i),t}class Rl extends nv{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Rl.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=At(e),r=e.getState();let s;r==tt.LOADING?(this.tileLoadingKeys_[n]=!0,s=Ao.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==tt.ERROR?Ao.TILELOADERROR:r==tt.LOADED?Ao.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new iv(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=av(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(sv(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const r=_o(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const lv=Rl;class cv extends lv{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:hv,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:ad,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!gi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!gi(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||gi(e,t)))return this.tileGrid;{const n=At(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=fd(t)),this.tileGridForProjection[n]}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||gi(e,t))return this.tileCache;{const n=At(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new cd(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}}createTile_(t,e,n,r,s,o){const a=[t,e,n],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(a,c!==void 0?tt.IDLE:tt.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(ut.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,r,s){const o=this.getProjection();if(!o||!s||gi(o,s))return this.getTileInternal(t,e,n,r,o||s);{const a=this.getTileCacheForProjection(s),l=[t,e,n];let c;const h=ld(l);a.containsKey(h)&&(c=a.get(h));const u=this.getKey();if(c&&c.key==u)return c;{const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),_=this.getTileCoordForTileUrlFunction(l,s),y=new ya(o,d,s,f,l,_,this.getTilePixelRatio(r),this.getGutter(),(function(m,x,C,b){return this.getTileInternal(m,x,C,b,o)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return y.key=u,c?(y.interimTile=c,y.refreshInterimChain(),a.replace(h,y)):a.set(h,y),y}}}getTileInternal(t,e,n,r,s){let o=null;const a=_o(t,e,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,n,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,e,n,r,s,l),c.getState()==tt.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=ie(t);if(n){const r=At(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function hv(i,t){i.getImage().src=t}const uv=cv;class dv extends uv{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:Qy({extent:bl(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const fv=dv,gv='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class _v extends fv{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[gv];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const pv=_v,ws={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class mv extends os{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(ws.PRELOAD)}setPreload(t){this.set(ws.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(ws.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(ws.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const yv=mv;class vv extends dl{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=qe(),this.tmpTileRange_=new ud(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==tt.LOADED||n==tt.EMPTY||n==tt.ERROR&&!r}getTile(t,e,n,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,e,n,s,o);return c.getState()==tt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),r=ve(e.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!ns(s,r))return null;const o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,c=n.getRenderSource(),h=c.getTileGridForProjection(l.projection),u=c.getTilePixelRatio(e.pixelRatio);for(let d=h.getZForResolution(l.resolution);d>=h.getMinZoom();--d){const f=h.getTileCoordForCoordAndZ(r,d),_=c.getTile(d,f[1],f[2],o,a);if(!(_ instanceof ad||_ instanceof ya)||_ instanceof ya&&_.getState()===tt.EMPTY)return null;if(_.getState()!==tt.LOADED)continue;const y=h.getOrigin(d),m=Ve(h.getTileSize(d)),x=h.getResolution(d),C=Math.floor(u*((r[0]-y[0])/x-f[1]*m[0])),b=Math.floor(u*((y[1]-r[1])/x-f[2]*m[1])),T=Math.round(u*c.getGutterForProjection(l.projection));return this.getImageData(_.getImage(),C+T,b+T)}return null}loadedTileCallback(t,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(t,e,n):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),f=u.getTileGridForProjection(s),_=f.getZForResolution(o,u.zDirection),y=f.getResolution(_);let m=t.extent;const x=t.viewState.resolution,C=u.getTilePixelRatio(c),b=Math.round(Lt(m)/x*c),T=Math.round(Te(m)/x*c),L=n.extent&&Fi(n.extent);L&&(m=Xn(m,Fi(n.extent)));const P=y*b/2/C,D=y*T/2/C,W=[a[0]-P,a[1]-D,a[0]+P,a[1]+D],z=f.getTileRangeForExtentAndZ(m,_),V={};V[_]={};const ct=this.createLoadedTileFinder(u,s,V),rt=this.tmpExtent,q=this.tmpTileRange_;this.newTiles_=!1;const Dt=l?na(r.center,x,l,t.size):void 0;for(let Se=z.minX;Se<=z.maxX;++Se)for(let bt=z.minY;bt<=z.maxY;++bt){if(l&&!f.tileCoordIntersectsViewport([_,Se,bt],Dt))continue;const Ot=this.getTile(_,Se,bt,t);if(this.isDrawableTile(Ot)){const ne=At(this);if(Ot.getState()==tt.LOADED){V[_][Ot.tileCoord.toString()]=Ot;let Ge=Ot.inTransition(ne);Ge&&n.opacity!==1&&(Ot.endTransition(ne),Ge=!1),!this.newTiles_&&(Ge||!this.renderedTiles.includes(Ot))&&(this.newTiles_=!0)}if(Ot.getAlpha(ne,t.time)===1)continue}const Ie=f.getTileCoordChildTileRange(Ot.tileCoord,q,rt);let De=!1;Ie&&(De=ct(_+1,Ie)),De||f.forEachTileCoordParentTileRange(Ot.tileCoord,ct,q,rt)}const H=y/o*c/C;vi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-b/2,-T/2);const Z=Ka(this.pixelTransform);this.useContainer(e,Z,this.getBackground(t));const N=this.context,dt=N.canvas;oo(this.inversePixelTransform,this.pixelTransform),vi(this.tempTransform,b/2,T/2,H,H,0,-b/2,-T/2),dt.width!=b||dt.height!=T?(dt.width=b,dt.height=T):this.containerReused||N.clearRect(0,0,b,T),L&&this.clipUnrotated(N,t,L),u.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;let Gt=Object.keys(V).map(Number);Gt.sort(Yn);let Tt,Jt,M;n.opacity===1&&(!this.containerReused||u.getOpaque(t.viewState.projection))?Gt=Gt.reverse():(Tt=[],Jt=[]);for(let Se=Gt.length-1;Se>=0;--Se){const bt=Gt[Se],Ot=u.getTilePixelSize(bt,c,s),De=f.getResolution(bt)/y,ne=Ot[0]*De*H,Ge=Ot[1]*De*H,Ae=f.getTileCoordForCoordAndZ(Hn(W),bt),Xi=f.getTileCoordExtent(Ae),Ee=ve(this.tempTransform,[C*(Xi[0]-W[0])/y,C*(W[3]-Xi[3])/y]),Xe=C*u.getGutterForProjection(s),ue=V[bt];for(const Le in ue){const $e=ue[Le],re=$e.tileCoord,zi=Ae[1]-re[1],Bi=Math.round(Ee[0]-(zi-1)*ne),se=Ae[2]-re[2],En=Math.round(Ee[1]-(se-1)*Ge),de=Math.round(Ee[0]-zi*ne),Kt=Math.round(Ee[1]-se*Ge),fe=Bi-de,Ce=En-Kt,Je=_===bt,ze=Je&&$e.getAlpha(At(this),t.time)!==1;let Oe=!1;if(!ze)if(Tt){M=[de,Kt,de+fe,Kt,de+fe,Kt+Ce,de,Kt+Ce];for(let Qe=0,wi=Tt.length;Qe<wi;++Qe)if(_!==bt&&bt<Jt[Qe]){const Qt=Tt[Qe];ke([de,Kt,de+fe,Kt+Ce],[Qt[0],Qt[3],Qt[4],Qt[7]])&&(Oe||(N.save(),Oe=!0),N.beginPath(),N.moveTo(M[0],M[1]),N.lineTo(M[2],M[3]),N.lineTo(M[4],M[5]),N.lineTo(M[6],M[7]),N.moveTo(Qt[6],Qt[7]),N.lineTo(Qt[4],Qt[5]),N.lineTo(Qt[2],Qt[3]),N.lineTo(Qt[0],Qt[1]),N.clip())}Tt.push(M),Jt.push(bt)}else N.clearRect(de,Kt,fe,Ce);this.drawTileImage($e,t,de,Kt,fe,Ce,Xe,Je),Tt&&!ze?(Oe&&N.restore(),this.renderedTiles.unshift($e)):this.renderedTiles.push($e),this.updateUsedTiles(t.usedTiles,u,$e)}}return this.renderedRevision=d,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!pr(this.renderedExtent_,W),this.renderedExtent_=W,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(t,u,f,c,s,m,_,h.getPreload()),this.scheduleExpireCache(t,u),this.postRender(N,t),n.extent&&N.restore(),N.imageSmoothingEnabled=!0,Z!==dt.style.transform&&(dt.style.transform=Z),this.container}drawTileImage(t,e,n,r,s,o,a,l){const c=this.getTileImage(t);if(!c)return;const h=At(this),u=e.layerStatesArray[e.layerIndex],d=u.opacity*(l?t.getAlpha(h,e.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,r,s,o),f&&this.context.restore(),d!==u.opacity?e.animate=!0:l&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=(function(r,s,o){const a=At(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const r=At(e);r in t||(t[r]={}),t[r][n.getKey()]=!0}manageTilePyramid(t,e,n,r,s,o,a,l,c){const h=At(e);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=t.tileQueue,f=n.getMinZoom(),_=t.viewState.rotation,y=_?na(t.viewState.center,t.viewState.resolution,_,t.size):void 0;let m=0,x,C,b,T,L,P;for(P=f;P<=a;++P)for(C=n.getTileRangeForExtentAndZ(o,P,C),b=n.getResolution(P),T=C.minX;T<=C.maxX;++T)for(L=C.minY;L<=C.maxY;++L)_&&!n.tileCoordIntersectsViewport([P,T,L],y)||(a-P<=l?(++m,x=e.getTile(P,T,L,r,s),x.getState()==tt.IDLE&&(u[x.getKey()]=!0,d.isKeyQueued(x.getKey())||d.enqueue([x,h,n.getTileCoordCenter(x.tileCoord),b])),c!==void 0&&c(x)):e.useTile(P,T,L,s));e.updateCacheSize(m,s)}}const xv=vv;class Ev extends yv{constructor(t){super(t)}createRenderer(){return new xv(this)}}const Cv=Ev;function wv(i,t,e,n,r){_d(i,t,e||0,n||i.length-1,r||bv)}function _d(i,t,e,n,r){for(;n>e;){if(n-e>600){var s=n-e+1,o=t-e+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),h=Math.max(e,Math.floor(t-o*l/s+c)),u=Math.min(n,Math.floor(t+(s-o)*l/s+c));_d(i,t,h,u,r)}var d=i[t],f=e,_=n;for(Or(i,e,t),r(i[n],d)>0&&Or(i,e,n);f<_;){for(Or(i,f,_),f++,_--;r(i[f],d)<0;)f++;for(;r(i[_],d)>0;)_--}r(i[e],d)===0?Or(i,e,_):(_++,Or(i,_,n)),_<=t&&(e=_+1),t<=_&&(n=_-1)}}function Or(i,t,e){var n=i[t];i[t]=i[e],i[e]=n}function bv(i,t){return i<t?-1:i>t?1:0}let pd=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!Rs(t,e))return n;const r=this.toBBox,s=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],l=e.leaf?r(a):a;Rs(t,l)&&(e.leaf?n.push(a):Mo(t,l)?this._all(a,n):s.push(a))}e=s.pop()}return n}collides(t){let e=this.data;if(!Rs(t,e))return!1;const n=[];for(;e;){for(let r=0;r<e.children.length;r++){const s=e.children[r],o=e.leaf?this.toBBox(s):s;if(Rs(t,o)){if(e.leaf||Mo(t,o))return!0;n.push(s)}}e=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=or([]),this}remove(t,e){if(!t)return this;let n=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),n.leaf){const h=Rv(t,n.children,e);if(h!==-1)return n.children.splice(h,1),s.push(n),this._condense(s),this}!c&&!n.leaf&&Mo(n,r)?(s.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,r){const s=n-e+1;let o=this._maxEntries,a;if(s<=o)return a=or(t.slice(e,n+1)),er(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=or([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));kc(t,e,n,c,this.compareMinX);for(let h=e;h<=n;h+=c){const u=Math.min(h+c-1,n);kc(t,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(t,d,f,r-1))}}return er(a,this.toBBox),a}_chooseSubtree(t,e,n,r){for(;r.push(e),!(e.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let l=0;l<e.children.length;l++){const c=e.children[l],h=Lo(c),u=Iv(t,c)-h;u<o?(o=u,s=h<s?h:s,a=c):u===o&&h<s&&(s=h,a=c)}e=a||e.children[0]}return e}_insert(t,e,n){const r=n?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,e,s);for(o.children.push(t),Pr(o,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)}_split(t,e){const n=t[e],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=or(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,er(n,this.toBBox),er(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this.data=or([t,e]),this.data.height=t.height+1,this.data.leaf=!1,er(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,s=1/0,o=1/0;for(let a=e;a<=n-e;a++){const l=Mr(t,0,a,this.toBBox),c=Mr(t,a,n,this.toBBox),h=Ov(l,c),u=Lo(l)+Lo(c);h<s?(s=h,r=a,o=u<o?u:o):h===s&&u<o&&(o=u,r=a)}return r||n-e}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:Tv,s=t.leaf?this.compareMinY:Sv,o=this._allDistMargin(t,e,n,r),a=this._allDistMargin(t,e,n,s);o<a&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const s=this.toBBox,o=Mr(t,0,e,s),a=Mr(t,n-e,n,s);let l=bs(o)+bs(a);for(let c=e;c<n-e;c++){const h=t.children[c];Pr(o,t.leaf?s(h):h),l+=bs(o)}for(let c=n-e-1;c>=e;c--){const h=t.children[c];Pr(a,t.leaf?s(h):h),l+=bs(a)}return l}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)Pr(e[r],t)}_condense(t){for(let e=t.length-1,n;e>=0;e--)t[e].children.length===0?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():er(t[e],this.toBBox)}};function Rv(i,t,e){if(!e)return t.indexOf(i);for(let n=0;n<t.length;n++)if(e(i,t[n]))return n;return-1}function er(i,t){Mr(i,0,i.children.length,t,i)}function Mr(i,t,e,n,r){r||(r=or(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<e;s++){const o=i.children[s];Pr(r,i.leaf?n(o):o)}return r}function Pr(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function Tv(i,t){return i.minX-t.minX}function Sv(i,t){return i.minY-t.minY}function Lo(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function bs(i){return i.maxX-i.minX+(i.maxY-i.minY)}function Iv(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function Ov(i,t){const e=Math.max(i.minX,t.minX),n=Math.max(i.minY,t.minY),r=Math.min(i.maxX,t.maxX),s=Math.min(i.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,s-n)}function Mo(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function Rs(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function or(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kc(i,t,e,n,r){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=n)continue;const o=t+Math.ceil((e-t)/n/2)*n;wv(i,o,t,e,r),s.push(t,o,o,e)}}class Tl{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ve(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Tl({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return et()}getImage(t){return et()}getHitDetectionImage(){return et()}getPixelRatio(t){return 1}getImageState(){return et()}getImageSize(){return et()}getOrigin(){return et()}getSize(){return et()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ve(t)}listenImageChange(t){et()}load(){et()}unlistenImageChange(t){et()}}const md=Tl;function mi(i){return Array.isArray(i)?Bu(i):i}class Sl extends md{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Sl({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,r=Ke(n.size*t,n.size*t);this.draw_(n,r,t),e=r.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return mt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const P=r;r=s,s=P}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),h=r-c,u=Math.sqrt(l*l+h*h),d=u/l;if(t==="miter"&&d<=n)return d*e;const f=e/2/d,_=e/2*(h/u),m=Math.sqrt((r+f)*(r+f)+_*_)-r;if(this.radius2_===void 0||t==="bevel")return m*2;const x=r*Math.sin(a),C=Math.sqrt(r*r-x*x),b=s-C,L=Math.sqrt(x*x+b*b)/x;if(L<=n){const P=L*e/2-s-r;return 2*Math.max(m,P)}return m*2}createRenderOptions(){let t=mr,e=0,n=null,r=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=Ur),s=mi(s),o=this.stroke_.getWidth(),o===void 0&&(o=$r),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=mr),e=this.stroke_.getMiterLimit(),e===void 0&&(e=Vr));const a=this.calculateLineJoinSize_(t,o,e),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:s,strokeWidth:o,size:c,lineDash:n,lineDashOffset:r,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=Ni),e.fillStyle=mi(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if(typeof e=="string"&&(e=zs(e)),e===null?n=1:Array.isArray(e)&&(n=e.length===4?e[3]:1),n===0){const r=Ke(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const l=s+a*o,c=a%2===0?n:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ni,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const yd=Sl;class Il extends yd{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Il({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const vd=Il;class Ol{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new Ol({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const Al=Ol;class Ll{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Ll({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const xd=Ll;class po{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Nc,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new po({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Nc,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Av(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(vt(typeof i.getZIndex=="function",41),e=[i]),t=function(){return e}}return t}let Po=null;function Lv(i,t){if(!Po){const e=new Al({color:"rgba(255,255,255,0.4)"}),n=new xd({color:"#3399CC",width:1.25});Po=[new po({image:new vd({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return Po}function Nc(i){return i.getGeometry()}const va=po;let Ar=null;class Mv extends is{constructor(t,e,n,r,s,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=n,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===mt.LOADED){Ar||(Ar=Ke(1,1)),Ar.drawImage(this.image_,0,0);try{Ar.getImageData(0,0,1,1),this.tainted_=!1}catch{Ar=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ut.CHANGE)}handleImageError_(){this.imageState_=mt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=mt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Ke(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===mt.IDLE){this.image_||this.initializeImage_(),this.imageState_=mt.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=gl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==mt.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const r=n.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=zu(this.color_),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Pv(i,t,e,n,r,s){let o=Ys.get(t,n,s);return o||(o=new Mv(i,t,e,n,r,s),Ys.set(t,n,s,o)),o}class Ml extends md{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:n,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let a=t.src;vt(!(a!==void 0&&o),4),vt(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||At(o)),vt(a!==void 0&&a.length>0,6);const l=t.src!==void 0?mt.IDLE:mt.LOADED;this.color_=t.color!==void 0?zs(t.color):null,this.iconImage_=Pv(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null}clone(){const t=this.getScale();return new Ml({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(ut.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ut.CHANGE,t)}}const Ed=Ml,Dv="#333";class Pl{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ve(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Al({color:Dv}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new Pl({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ve(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Fv=Pl;function Gc(i){return new va({fill:Hr(i,""),stroke:Zr(i,""),text:kv(i),image:Nv(i)})}function Hr(i,t){const e=i[t+"fill-color"];if(e)return new Al({color:e})}function Zr(i,t){const e=i[t+"stroke-width"],n=i[t+"stroke-color"];if(!(!e&&!n))return new xd({width:e,color:n,lineCap:i[t+"stroke-line-cap"],lineJoin:i[t+"stroke-line-join"],lineDash:i[t+"stroke-line-dash"],lineDashOffset:i[t+"stroke-line-dash-offset"],miterLimit:i[t+"stroke-miter-limit"]})}function kv(i){const t=i["text-value"];return t?new Fv({text:t,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:Hr(i,"text-"),backgroundFill:Hr(i,"text-background-"),stroke:Zr(i,"text-"),backgroundStroke:Zr(i,"text-background-")}):void 0}function Nv(i){const t=i["icon-src"],e=i["icon-img"];if(t||e)return new Ed({src:t,img:e,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const s="shape-";return new yd({points:n,fill:Hr(i,s),stroke:Zr(i,s),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const r=i["circle-radius"];if(r){const s="circle-";return new vd({radius:r,fill:Hr(i,s),stroke:Zr(i,s),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const jc={RENDER_ORDER:"renderOrder"};class Gv extends os{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(jc.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new pd(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(jc.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=Lv;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof va)e=t;else if(Array.isArray(t)){const n=t.length,r=new Array(n);for(let s=0;s<n;++s){const o=t[s];o instanceof va?r[s]=o:r[s]=Gc(o)}e=r}else e=Gc(t);this.style_=e,this.styleFunction_=t===null?void 0:Av(this.style_),this.changed()}}const jv=Gv,cs={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ts=[cs.FILL],gn=[cs.STROKE],kn=[cs.BEGIN_PATH],Wc=[cs.CLOSE_PATH],nt=cs;class Wv{drawCustom(t,e,n,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Cd=Wv;class Xv extends Cd{constructor(t,e,n,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=e)r[0]=t[a],r[1]=t[a+1],ns(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,e,n,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(e+=r);let h=t[e],u=t[e+1];const d=this.tmpCoordinate_;let f=!0,_,y,m;for(_=e+r;_<n;_+=r)d[0]=t[_],d[1]=t[_+1],m=ea(c,d),m!==y?(f&&(a[l++]=h,a[l++]=u,f=!1),a[l++]=d[0],a[l++]=d[1]):m===be.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,h=d[0],u=d[1],y=m;return(s&&f||_===e+r)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(t,e,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(t,e,l,r,!1,!1);s.push(c),e=l}return e}drawCustom(t,e,n,r){this.beginGeometry(t,e);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,h,u,d;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),u=[];const f=t.getEndss();d=0;for(let _=0,y=f.length;_<y;++_){const m=[];d=this.drawCustomCoordinates_(l,d,f[_],o,m),u.push(m)}this.instructions.push([nt.CUSTOM,a,u,t,n,aa]),this.hitDetectionInstructions.push([nt.CUSTOM,a,u,t,r||n,aa]);break;case"Polygon":case"MultiLineString":h=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,h),this.instructions.push([nt.CUSTOM,a,h,t,n,zr]),this.hitDetectionInstructions.push([nt.CUSTOM,a,h,t,r||n,zr]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([nt.CUSTOM,a,c,t,n,fn]),this.hitDetectionInstructions.push([nt.CUSTOM,a,c,t,r||n,fn]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([nt.CUSTOM,a,c,t,n,fn]),this.hitDetectionInstructions.push([nt.CUSTOM,a,c,t,r||n,fn]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([nt.CUSTOM,a,c,t,n]),this.hitDetectionInstructions.push([nt.CUSTOM,a,c,t,r||n]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[nt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[nt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const n=t.length;let r,s,o=-1;for(e=0;e<n;++e)r=t[e],s=r[0],s==nt.END_GEOMETRY?o=e:s==nt.BEGIN_GEOMETRY&&(r[2]=e,Bg(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const r=t.getColor();n.fillStyle=mi(r||Ni)}else n.fillStyle=void 0;if(e){const r=e.getColor();n.strokeStyle=mi(r||Ur);const s=e.getLineCap();n.lineCap=s!==void 0?s:Vs;const o=e.getLineDash();n.lineDash=o?o.slice():Br;const a=e.getLineDashOffset();n.lineDashOffset=a||Yr;const l=e.getLineJoin();n.lineJoin=l!==void 0?l:mr;const c=e.getWidth();n.lineWidth=c!==void 0?c:$r;const h=e.getMiterLimit();n.miterLimit=h!==void 0?h:Vr,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[nt.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[nt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||s!=t.currentLineDash&&!Kn(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(n!==void 0&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[nt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=gu(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;$a(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const hs=Xv;class zv extends hs{constructor(t,e,n,r){super(t,e,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([nt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([nt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const Bv=zv;class Yv extends hs{constructor(t,e,n,r){super(t,e,n,r)}drawFlatCoordinates_(t,e,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),a=[nt.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(t,e){const n=this.state,r=n.strokeStyle,s=n.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Br,Yr],kn);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(gn),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,r=n.strokeStyle,s=n.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],kn);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let h=0,u=o.length;h<u;++h)c=this.drawFlatCoordinates_(a,c,o[h],l);this.hitDetectionInstructions.push(gn),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(gn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(gn),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(kn)}}const Vv=Yv;class Uv extends hs{constructor(t,e,n,r){super(t,e,n,r)}drawFlatCoordinatess_(t,e,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(kn),this.hitDetectionInstructions.push(kn);for(let c=0;c<l;++c){const h=n[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,h,r,!0,!a),f=[nt.MOVE_TO_LINE_TO,u,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(Wc),this.hitDetectionInstructions.push(Wc)),e=h}return o&&(this.instructions.push(Ts),this.hitDetectionInstructions.push(Ts)),a&&(this.instructions.push(gn),this.hitDetectionInstructions.push(gn)),e}drawCircle(t,e){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_FILL_STYLE,Ni]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[nt.CIRCLE,l];this.instructions.push(kn,c),this.hitDetectionInstructions.push(kn,c),n.fillStyle!==void 0&&(this.instructions.push(Ts),this.hitDetectionInstructions.push(Ts)),n.strokeStyle!==void 0&&(this.instructions.push(gn),this.hitDetectionInstructions.push(gn)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_FILL_STYLE,Ni]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_FILL_STYLE,Ni]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let h=0,u=o.length;h<u;++h)c=this.drawFlatCoordinatess_(a,c,o[h],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let n=0,r=e.length;n<r;++n)e[n]=Mn(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const Xc=Uv;function Kv(i,t,e,n,r){let s=e,o=e,a=0,l=0,c=e,h,u,d,f,_,y,m,x,C,b;for(u=e;u<n;u+=r){const T=t[u],L=t[u+1];_!==void 0&&(C=T-_,b=L-y,f=Math.sqrt(C*C+b*b),m!==void 0&&(l+=d,h=Math.acos((m*C+x*b)/(d*f)),h>i&&(l>a&&(a=l,s=c,o=u),l=0,c=u-r)),d=f,m=C,x=b),_=T,y=L}return l+=f,l>a?[c,u]:[s,o]}const Nr={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class $v extends hs{constructor(t,e,n,r){super(t,e,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!n&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,h=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!ke(this.getBufferedMaxExtent(),t.getExtent()))return;let u;if(c=t.getFlatCoordinates(),l=="LineString")u=[c.length];else if(l=="MultiLineString")u=t.getEnds();else if(l=="Polygon")u=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const y=t.getEndss();u=[];for(let m=0,x=y.length;m<x;++m)u.push(y[m][0])}this.beginGeometry(t,e);const d=s.textAlign;let f=0,_;for(let y=0,m=u.length;y<m;++y){if(d==null){const C=Kv(s.maxAngle,c,f,u[y],h);f=C[0],_=C[1]}else _=u[y];for(let C=f;C<_;C+=h)o.push(c[C],c[C+1]);const x=o.length;f=u[y],this.drawChars_(a,x),a=x}this.endGeometry(e)}else{let u=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),h=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||u.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const m=t.getFlatInteriorPoints();c=[];for(let x=0,C=m.length;x<C;x+=3)s.overflow||u.push(m[x+2]/this.resolution),c.push(m[x],m[x+1]);if(c.length===0)return;h=2;break}const d=this.appendFlatPointCoordinates(c,h);if(d===a)return;if(u&&(d-a)/2!==c.length/h){let m=a/2;u=u.filter((x,C)=>{const b=o[(m+C)*2]===c[C*h]&&o[(m+C)*2+1]===c[C*h+1];return b||--m,b})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let f=s.padding;if(f!=Fn&&(s.scale[0]<0||s.scale[1]<0)){let m=s.padding[0],x=s.padding[1],C=s.padding[2],b=s.padding[3];s.scale[0]<0&&(x=-x,b=-b),s.scale[1]<0&&(m=-m,C=-C),f=[m,x,C,b]}const _=this.pixelRatio;this.instructions.push([nt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==Fn?Fn:f.map(function(m){return m*_}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);const y=1/_;this.hitDetectionInstructions.push([nt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,void 0,this.declutterImageWithText_,f,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Kr,justify:e.justify,textBaseline:e.textBaseline||Us,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Nr[r.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([nt.DRAW_CHARS,t,e,c,r.overflow,a,r.maxAngle,l,h,s,d*l,u,o,1]),this.hitDetectionInstructions.push([nt.DRAW_CHARS,t,e,c,r.overflow,a,r.maxAngle,1,h,s,d,u,o,1/l])}setTextStyle(t,e){let n,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=mi(o.getColor()||Ni)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),y=a.getLineDashOffset(),m=a.getWidth(),x=a.getMiterLimit();s.lineCap=a.getLineCap()||Vs,s.lineDash=_?_.slice():Br,s.lineDashOffset=y===void 0?Yr:y,s.lineJoin=a.getLineJoin()||mr,s.lineWidth=m===void 0?$r:m,s.miterLimit=x===void 0?Vr:x,s.strokeStyle=mi(a.getColor()||Ur)}n=this.textState_;const l=t.getFont()||qu;vm(l);const c=t.getScaleArray();n.overflow=t.getOverflow(),n.font=l,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Us,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Fn,n.scale=c===void 0?[1,1]:c;const h=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:At(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+At(r.fillStyle):""}this.declutterImageWithText_=e}}const Hv={Circle:Xc,Default:hs,Image:Bv,LineString:Vv,Polygon:Xc,Text:$v};class Zv{constructor(t,e,n,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const r in n){const s=n[r].finish();t[e][r]=s}}return t}getBuilder(t,e){const n=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[e];if(s===void 0){const o=Hv[e];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s}return s}}const zc=Zv;function qv(i,t,e,n,r,s,o,a,l,c,h,u){let d=i[t],f=i[t+1],_=0,y=0,m=0,x=0;function C(){_=d,y=f,t+=n,d=i[t],f=i[t+1],x+=m,m=Math.sqrt((d-_)*(d-_)+(f-y)*(f-y))}do C();while(t<e-n&&x+m<s);let b=m===0?0:(s-x)/m;const T=Di(_,d,b),L=Di(y,f,b),P=t-n,D=x,W=s+a*l(c,r,h);for(;t<e-n&&x+m<W;)C();b=m===0?0:(W-x)/m;const z=Di(_,d,b),V=Di(y,f,b);let ct;if(u){const Z=[T,L,z,V];Ru(Z,0,4,2,u,Z,Z),ct=Z[0]>Z[2]}else ct=T>z;const rt=Math.PI,q=[],Dt=P+n===t;t=P,m=0,x=D,d=i[t],f=i[t+1];let H;if(Dt){C(),H=Math.atan2(f-y,d-_),ct&&(H+=H>0?-rt:rt);const Z=(z+T)/2,N=(V+L)/2;return q[0]=[Z,N,(W-s)/2,H,r],q}r=r.replace(/\n/g," ");for(let Z=0,N=r.length;Z<N;){C();let dt=Math.atan2(f-y,d-_);if(ct&&(dt+=dt>0?-rt:rt),H!==void 0){let bt=dt-H;if(bt+=bt>rt?-2*rt:bt<-rt?2*rt:0,Math.abs(bt)>o)return null}H=dt;const Gt=Z;let Tt=0;for(;Z<N;++Z){const bt=ct?N-Z-1:Z,Ot=a*l(c,r[bt],h);if(t+n<e&&x+m<s+Tt+Ot/2)break;Tt+=Ot}if(Z===Gt)continue;const Jt=ct?r.substring(N-Gt,N-Z):r.substring(Gt,Z);b=m===0?0:(s+Tt/2-x)/m;const M=Di(_,d,b),Se=Di(y,f,b);q.push([M,Se,Tt/2,dt,Jt]),s+=Tt}return q}const ir=qe(),rn=[],Ai=[],Li=[],sn=[];function Bc(i){return i[3].declutterBox}const Jv=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Yc(i,t){return(t==="start"||t==="end")&&!Jv.test(i)&&(t=t==="start"?"left":"right"),Nr[t]}function Qv(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}class t0{constructor(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=yi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,r){const s=t+e+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[e],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=Array.isArray(t),d=l.justify?Nr[l.justify]:Yc(Array.isArray(t)?t[0]:t,l.textAlign||Kr),f=r&&o.lineWidth?o.lineWidth:0,_=u?t:t.split(`
`).reduce(Qv,[]),{width:y,height:m,widths:x,heights:C,lineWidths:b}=Em(l,_),T=y+f,L=[],P=(T+2)*h[0],D=(m+f)*h[1],W={width:P<0?Math.floor(P):Math.ceil(P),height:D<0?Math.floor(D):Math.ceil(D),contextInstructions:L};(h[0]!=1||h[1]!=1)&&L.push("scale",h),r&&(L.push("strokeStyle",o.strokeStyle),L.push("lineWidth",f),L.push("lineCap",o.lineCap),L.push("lineJoin",o.lineJoin),L.push("miterLimit",o.miterLimit),L.push("setLineDash",[o.lineDash]),L.push("lineDashOffset",o.lineDashOffset)),n&&L.push("fillStyle",a.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");const z=.5-d;let V=d*T+z*f;const ct=[],rt=[];let q=0,Dt=0,H=0,Z=0,N;for(let dt=0,Gt=_.length;dt<Gt;dt+=2){const Tt=_[dt];if(Tt===`
`){Dt+=q,q=0,V=d*T+z*f,++Z;continue}const Jt=_[dt+1]||l.font;Jt!==N&&(r&&ct.push("font",Jt),n&&rt.push("font",Jt),N=Jt),q=Math.max(q,C[H]);const M=[Tt,V+z*x[H]+d*(x[H]-b[Z]),.5*(f+q)+Dt];V+=x[H],r&&ct.push("strokeText",M),n&&rt.push("fillText",M),++H}return Array.prototype.push.apply(L,ct),Array.prototype.push.apply(L,rt),this.labels_[s]=W,W}replayTextBackground_(t,e,n,r,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,r,s,o,a,l,c,h,u,d,f,_,y,m){a*=d[0],l*=d[1];let x=n-a,C=r-l;const b=s+c>t?t-c:s,T=o+h>e?e-h:o,L=_[3]+b*d[0]+_[1],P=_[0]+T*d[1]+_[2],D=x-_[3],W=C-_[0];(y||u!==0)&&(rn[0]=D,sn[0]=D,rn[1]=W,Ai[1]=W,Ai[0]=D+L,Li[0]=Ai[0],Li[1]=W+P,sn[1]=Li[1]);let z;return u!==0?(z=vi(yi(),n,r,1,1,u,-n,-r),ve(z,rn),ve(z,Ai),ve(z,Li),ve(z,sn),xi(Math.min(rn[0],Ai[0],Li[0],sn[0]),Math.min(rn[1],Ai[1],Li[1],sn[1]),Math.max(rn[0],Ai[0],Li[0],sn[0]),Math.max(rn[1],Ai[1],Li[1],sn[1]),ir)):xi(Math.min(D,D+L),Math.min(W,W+P),Math.max(D,D+L),Math.max(W,W+P),ir),f&&(x=Math.round(x),C=Math.round(C)),{drawImageX:x,drawImageY:C,drawImageW:b,drawImageH:T,originX:c,originY:h,declutterBox:{minX:ir[0],minY:ir[1],maxX:ir[2],maxY:ir[3],value:m},canvasTransform:z,scale:d}}replayImageOrLabel_(t,e,n,r,s,o,a){const l=!!(o||a),c=r.declutterBox,h=t.canvas,u=a?a[2]*r.scale[0]/2:0;return c.minX-u<=h.width/e&&c.maxX+u>=0&&c.minY-u<=h.height/e&&c.maxY+u>=0&&(l&&this.replayTextBackground_(t,rn,Ai,Li,sn,o,a),Cm(t,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const e=ve(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,r){const s=this.textStates[e],o=this.createLabel(t,e,r,n),a=this.strokeStates[n],l=this.pixelRatio,c=Yc(Array.isArray(t)?t[0]:t,s.textAlign||Kr),h=Nr[s.textBaseline||Us],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*u,_=h*o.height/l+2*(.5-h)*u;return{label:o,anchorX:f,anchorY:_}}execute_(t,e,n,r,s,o,a,l){let c;this.pixelCoordinates_&&Kn(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Bn(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),o_(this.renderedTransform_,n));let h=0;const u=r.length;let d=0,f,_,y,m,x,C,b,T,L,P,D,W,z=0,V=0,ct=null,rt=null;const q=this.coordinateCache_,Dt=this.viewRotation_,H=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Z={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Dt},N=this.instructions!=r||this.overlaps?0:200;let dt,Gt,Tt,Jt;for(;h<u;){const M=r[h];switch(M[0]){case nt.BEGIN_GEOMETRY:dt=M[1],Jt=M[3],dt.getGeometry()?a!==void 0&&!ke(a,Jt.getExtent())?h=M[2]+1:++h:h=M[2];break;case nt.BEGIN_PATH:z>N&&(this.fill_(t),z=0),V>N&&(t.stroke(),V=0),!z&&!V&&(t.beginPath(),m=NaN,x=NaN),++h;break;case nt.CIRCLE:d=M[1];const bt=c[d],Ot=c[d+1],Ie=c[d+2],De=c[d+3],ne=Ie-bt,Ge=De-Ot,Ae=Math.sqrt(ne*ne+Ge*Ge);t.moveTo(bt+Ae,Ot),t.arc(bt,Ot,Ae,0,2*Math.PI,!0),++h;break;case nt.CLOSE_PATH:t.closePath(),++h;break;case nt.CUSTOM:d=M[1],f=M[2];const Xi=M[3],Ee=M[4],Xe=M.length==6?M[5]:void 0;Z.geometry=Xi,Z.feature=dt,h in q||(q[h]=[]);const ue=q[h];Xe?Xe(c,d,f,2,ue):(ue[0]=c[d],ue[1]=c[d+1],ue.length=2),Ee(ue,Z),++h;break;case nt.DRAW_IMAGE:d=M[1],f=M[2],T=M[3],_=M[4],y=M[5];let Le=M[6];const $e=M[7],re=M[8],zi=M[9],Bi=M[10];let se=M[11];const En=M[12];let de=M[13];const Kt=M[14],fe=M[15];if(!T&&M.length>=20){L=M[19],P=M[20],D=M[21],W=M[22];const ae=this.drawLabelWithPointPlacement_(L,P,D,W);T=ae.label,M[3]=T;const hi=M[23];_=(ae.anchorX-hi)*this.pixelRatio,M[4]=_;const we=M[24];y=(ae.anchorY-we)*this.pixelRatio,M[5]=y,Le=T.height,M[6]=Le,de=T.width,M[13]=de}let Ce;M.length>25&&(Ce=M[25]);let Je,ze,Oe;M.length>17?(Je=M[16],ze=M[17],Oe=M[18]):(Je=Fn,ze=!1,Oe=!1),Bi&&H?se+=Dt:!Bi&&!H&&(se-=Dt);let Qe=0;for(;d<f;d+=2){if(Ce&&Ce[Qe++]<de/this.pixelRatio)continue;const ae=this.calculateImageOrLabelDimensions_(T.width,T.height,c[d],c[d+1],de,Le,_,y,re,zi,se,En,s,Je,ze||Oe,dt),hi=[t,e,T,ae,$e,ze?ct:null,Oe?rt:null];if(l){if(Kt==="none")continue;if(Kt==="obstacle"){l.insert(ae.declutterBox);continue}else{let we,Be;if(fe){const ge=f-d;if(!fe[ge]){fe[ge]=hi;continue}if(we=fe[ge],delete fe[ge],Be=Bc(we),l.collides(Be))continue}if(l.collides(ae.declutterBox))continue;we&&(l.insert(Be),this.replayImageOrLabel_.apply(this,we)),l.insert(ae.declutterBox)}}this.replayImageOrLabel_.apply(this,hi)}++h;break;case nt.DRAW_CHARS:const wi=M[1],Qt=M[2],ai=M[3],bi=M[4];W=M[5];const je=M[6],Cn=M[7],wn=M[8];D=M[9];const Yi=M[10];L=M[11],P=M[12];const bn=[M[13],M[13]],He=this.textStates[P],li=He.font,Ri=[He.scale[0]*Cn,He.scale[1]*Cn];let Ze;li in this.widths_?Ze=this.widths_[li]:(Ze={},this.widths_[li]=Ze);const ci=Pu(c,wi,Qt,2),Ti=Math.abs(Ri[0])*Oc(li,L,Ze);if(bi||Ti<=ci){const ae=this.textStates[P].textAlign,hi=(ci-Ti)*Nr[ae],we=qv(c,wi,Qt,2,L,hi,je,Math.abs(Ri[0]),Oc,li,Ze,H?0:this.viewRotation_);t:if(we){const Be=[];let ge,Vi,Ui,le,v;if(D)for(ge=0,Vi=we.length;ge<Vi;++ge){v=we[ge],Ui=v[4],le=this.createLabel(Ui,P,"",D),_=v[2]+(Ri[0]<0?-Yi:Yi),y=ai*le.height+(.5-ai)*2*Yi*Ri[1]/Ri[0]-wn;const w=this.calculateImageOrLabelDimensions_(le.width,le.height,v[0],v[1],le.width,le.height,_,y,0,0,v[3],bn,!1,Fn,!1,dt);if(l&&l.collides(w.declutterBox))break t;Be.push([t,e,le,w,1,null,null])}if(W)for(ge=0,Vi=we.length;ge<Vi;++ge){v=we[ge],Ui=v[4],le=this.createLabel(Ui,P,W,""),_=v[2],y=ai*le.height-wn;const w=this.calculateImageOrLabelDimensions_(le.width,le.height,v[0],v[1],le.width,le.height,_,y,0,0,v[3],bn,!1,Fn,!1,dt);if(l&&l.collides(w.declutterBox))break t;Be.push([t,e,le,w,1,null,null])}l&&l.load(Be.map(Bc));for(let w=0,S=Be.length;w<S;++w)this.replayImageOrLabel_.apply(this,Be[w])}}++h;break;case nt.END_GEOMETRY:if(o!==void 0){dt=M[1];const ae=o(dt,Jt);if(ae)return ae}++h;break;case nt.FILL:N?z++:this.fill_(t),++h;break;case nt.MOVE_TO_LINE_TO:for(d=M[1],f=M[2],Gt=c[d],Tt=c[d+1],C=Gt+.5|0,b=Tt+.5|0,(C!==m||b!==x)&&(t.moveTo(Gt,Tt),m=C,x=b),d+=2;d<f;d+=2)Gt=c[d],Tt=c[d+1],C=Gt+.5|0,b=Tt+.5|0,(d==f-2||C!==m||b!==x)&&(t.lineTo(Gt,Tt),m=C,x=b);++h;break;case nt.SET_FILL_STYLE:ct=M,this.alignFill_=M[2],z&&(this.fill_(t),z=0,V&&(t.stroke(),V=0)),t.fillStyle=M[1],++h;break;case nt.SET_STROKE_STYLE:rt=M,V&&(t.stroke(),V=0),this.setStrokeStyle_(t,M),++h;break;case nt.STROKE:N?V++:t.stroke(),++h;break;default:++h;break}}z&&this.fill_(t),V&&t.stroke()}execute(t,e,n,r,s,o){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,n,r,s){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,s)}}const e0=t0,Do=["Polygon","Circle","LineString","Image","Text","Default"];class i0{constructor(t,e,n,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=yi(),this.createExecutors_(s)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];n===void 0&&(n={},this.executorsByZIndex_[e]=n);const r=t[e];for(const s in r){const o=r[s];n[s]=new e0(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let r=0,s=t.length;r<s;++r)if(t[r]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,r,s,o){r=Math.round(r);const a=r*2+1,l=vi(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Ke(a,a));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=qe(),kr(u,t),$a(u,e*(this.renderBuffer_+r),u));const d=n0(r);let f;function _(L,P){const D=h.getImageData(0,0,a,a).data;for(let W=0,z=d.length;W<z;W++)if(D[d[W]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(L)){const V=(d[W]-3)/4,ct=r-V%a,rt=r-(V/a|0),q=s(L,P,ct*ct+rt*rt);if(q)return q}h.clearRect(0,0,a,a);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(Yn);let m,x,C,b,T;for(m=y.length-1;m>=0;--m){const L=y[m].toString();for(C=this.executorsByZIndex_[L],x=Do.length-1;x>=0;--x)if(f=Do[x],b=C[f],b!==void 0&&(T=b.executeHitDetection(h,l,n,_,u),T))return T}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],r=e[1],s=e[2],o=e[3],a=[n,r,n,o,s,o,s,r];return Bn(a,0,8,2,t,a),a}isEmpty(){return _r(this.executorsByZIndex_)}execute(t,e,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Yn),this.maxExtent_&&(t.save(),this.clip(t,n)),o=o||Do;let c,h,u,d,f,_;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const y=l[c].toString();for(f=this.executorsByZIndex_[y],u=0,d=o.length;u<d;++u){const m=o[u];_=f[m],_!==void 0&&_.execute(t,e,n,r,s,a)}}this.maxExtent_&&t.restore()}}const Fo={};function n0(i){if(Fo[i]!==void 0)return Fo[i];const t=i*2+1,e=i*i,n=new Array(e+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>e)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+s)*t+(i+o))*4+3),s>0&&l.push(((i-s)*t+(i+o))*4+3),o>0&&(l.push(((i+s)*t+(i-o))*4+3),s>0&&l.push(((i-s)*t+(i-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return Fo[i]=r,r}const Vc=i0;class r0 extends Cd{constructor(t,e,n,r,s,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=yi()}drawImages_(t,e,n,r){if(!this.image_)return;const s=Bn(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=s.length;h<u;h+=2){const d=s[h]-this.imageAnchorX_,f=s[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const _=d+this.imageAnchorX_,y=f+this.imageAnchorY_;vi(a,_,y,1,1,c,-_,-y),o.setTransform.apply(o,a),o.translate(_,y),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Bn(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=r){const l=s[e]+this.textOffsetX_,c=s[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,e,n,r,s){const o=this.context_,a=Bn(t,e,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),n}drawRings_(t,e,n,r){for(let s=0,o=n.length;s<o;++s)e=this.moveToLineTo_(t,e,n[s],r,!0);return e}drawCircle(t){if(ke(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=H_(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const n=e.getGeometryFunction()(t);!n||!ke(this.extent_,n.getExtent())||(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ke(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(ke(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ke(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ke(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(n,r,c,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),Kn(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:Kr;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:mi(n||Ni)}}if(!e)this.strokeState_=null;else{const n=e.getColor(),r=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),h=s||Br;this.strokeState_={lineCap:r!==void 0?r:Vs,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(o||Yr)*this.pixelRatio_,lineJoin:a!==void 0?a:mr,lineWidth:(l!==void 0?l:$r)*this.pixelRatio_,miterLimit:c!==void 0?c:Vr,strokeStyle:mi(n||Ur)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const f=e.getColor();this.textFillState_={fillStyle:mi(f||Ni)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),_=n.getLineCap(),y=n.getLineDash(),m=n.getLineDashOffset(),x=n.getLineJoin(),C=n.getWidth(),b=n.getMiterLimit();this.textStrokeState_={lineCap:_!==void 0?_:Vs,lineDash:y||Br,lineDashOffset:m||Yr,lineJoin:x!==void 0?x:mr,lineWidth:C!==void 0?C:$r,miterLimit:b!==void 0?b:Vr,strokeStyle:mi(f||Ur)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:r!==void 0?r:qu,textAlign:u!==void 0?u:Kr,textBaseline:d!==void 0?d:Us},this.text_=h!==void 0?Array.isArray(h)?h.reduce((f,_,y)=>f+=y%2?" ":_,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const s0=r0,_i=.5;function o0(i,t,e,n,r,s,o){const a=i[0]*_i,l=i[1]*_i,c=Ke(a,l);c.imageSmoothingEnabled=!1;const h=c.canvas,u=new s0(c,_i,r,null,o),d=e.length,f=Math.floor((256*256*256-1)/d),_={};for(let m=1;m<=d;++m){const x=e[m-1],C=x.getStyleFunction()||n;if(!n)continue;let b=C(x,s);if(!b)continue;Array.isArray(b)||(b=[b]);const L="#"+("000000"+(m*f).toString(16)).slice(-6);for(let P=0,D=b.length;P<D;++P){const W=b[P],z=W.getGeometryFunction()(x);if(!z||!ke(r,z.getExtent()))continue;const V=W.clone(),ct=V.getFill();ct&&ct.setColor(L);const rt=V.getStroke();rt&&(rt.setColor(L),rt.setLineDash(null)),V.setText(void 0);const q=W.getImage();if(q&&q.getOpacity()!==0){const Z=q.getImageSize();if(!Z)continue;const N=Ke(Z[0],Z[1],void 0,{alpha:!1}),dt=N.canvas;N.fillStyle=L,N.fillRect(0,0,dt.width,dt.height),V.setImage(new Ed({img:dt,imgSize:Z,anchor:q.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:q.getOrigin(),opacity:1,size:q.getSize(),scale:q.getScale(),rotation:q.getRotation(),rotateWithView:q.getRotateWithView()}))}const Dt=V.getZIndex()||0;let H=_[Dt];H||(H={},_[Dt]=H,H.Polygon=[],H.Circle=[],H.LineString=[],H.Point=[]),H[z.getType().replace("Multi","")].push(z,V)}}const y=Object.keys(_).map(Number).sort(Yn);for(let m=0,x=y.length;m<x;++m){const C=_[y[m]];for(const b in C){const T=C[b];for(let L=0,P=T.length;L<P;L+=2){u.setStyle(T[L+1]);for(let D=0,W=t.length;D<W;++D)u.setTransform(t[D]),u.drawGeometry(T[L])}}}return c.getImageData(0,0,h.width,h.height)}function a0(i,t,e){const n=[];if(e){const r=Math.floor(Math.round(i[0])*_i),s=Math.floor(Math.round(i[1])*_i),o=(ce(r,0,e.width-1)+ce(s,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],h=e.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);h&&h%u===0&&n.push(t[h/u-1])}return n}const l0=.5,wd={Point:m0,LineString:g0,Polygon:v0,MultiPoint:y0,MultiLineString:_0,MultiPolygon:p0,GeometryCollection:f0,Circle:u0};function c0(i,t){return parseInt(At(i),10)-parseInt(At(t),10)}function h0(i,t){const e=xa(i,t);return e*e}function xa(i,t){return l0*i/t}function u0(i,t,e,n,r){const s=e.getFill(),o=e.getStroke();if(s||o){const l=i.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,n)}const a=e.getText();if(a&&a.getText()){const l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n)}}function Uc(i,t,e,n,r,s,o){let a=!1;const l=e.getImage();if(l){const c=l.getImageState();c==mt.LOADED||c==mt.ERROR?l.unlistenImageChange(r):(c==mt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return d0(i,t,e,n,s,o),a}function d0(i,t,e,n,r,s){const o=e.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(n,r);if(e.getRenderer())bd(i,a,e,t);else{const c=wd[a.getType()];c(i,a,e,t,s)}}function bd(i,t,e,n){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)bd(i,s[o],e,n);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer())}function f0(i,t,e,n,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=wd[s[o].getType()];l(i,s[o],e,n,r)}}function g0(i,t,e,n,r){const s=e.getStroke();if(s){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,n)}const o=e.getText();if(o&&o.getText()){const a=(r||i).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,n)}}function _0(i,t,e,n,r){const s=e.getStroke();if(s){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,n)}const o=e.getText();if(o&&o.getText()){const a=(r||i).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,n)}}function p0(i,t,e,n,r){const s=e.getFill(),o=e.getStroke();if(o||s){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,n)}const a=e.getText();if(a&&a.getText()){const l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n)}}function m0(i,t,e,n,r){const s=e.getImage(),o=e.getText();let a;if(s){if(s.getImageState()!=mt.LOADED)return;let l=i;if(r){const h=s.getDeclutterMode();if(h!=="none")if(l=r,h==="obstacle"){const u=i.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(t,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(e.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(t,n)}if(o&&o.getText()){let l=i;r&&(l=r);const c=l.getBuilder(e.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,n)}}function y0(i,t,e,n,r){const s=e.getImage(),o=e.getText();let a;if(s){if(s.getImageState()!=mt.LOADED)return;let l=i;if(r){const h=s.getDeclutterMode();if(h!=="none")if(l=r,h==="obstacle"){const u=i.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(t,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(e.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(t,n)}if(o&&o.getText()){let l=i;r&&(l=r);const c=l.getBuilder(e.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,n)}}function v0(i,t,e,n,r){const s=e.getFill(),o=e.getStroke();if(s||o){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,n)}const a=e.getText();if(a&&a.getText()){const l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n)}}class x0 extends dl{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=qe(),this.wrappedRenderedExtent_=qe(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const r=e.extent,s=e.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=e.pixelRatio,f=e.viewHints,_=!(f[Re.ANIMATING]||f[Re.INTERACTING]),y=this.compositionContext_,m=Math.round(e.size[0]*d),x=Math.round(e.size[1]*d),C=u.getWrapX()&&l.canWrapX(),b=C?Lt(h):null,T=C?Math.ceil((r[2]-h[2])/b)+1:1;let L=C?Math.floor((r[0]-h[0])/b):0;do{const P=this.getRenderTransform(o,a,c,d,m,x,L*b);t.execute(y,1,P,c,_,void 0,n)}while(++L<T)}setupCompositionContext_(){if(this.opacity_!==1){const t=Ke(this.context.canvas.width,this.context.canvas.height,vc);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Yu(this.compositionContext_),vc.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];a_(this.pixelTransform,1/n,1/n),oo(this.inversePixelTransform,this.pixelTransform);const s=Ka(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const h=Math.round(t.size[0]*n),u=Math.round(t.size[1]*n);a.width!=h||a.height!=u?(a.width=h,a.height=u,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,h,u),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let f=!1,_=!0;if(r.extent&&this.clipping){const y=Fi(r.extent);_=ke(y,t.extent),f=_&&!un(y,t.extent),f&&this.clipUnrotated(this.compositionContext_,t,y)}return _&&this.renderWorlds(l,t),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];ve(this.pixelTransform,n);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=n[0]*_i,d=n[1]*_i;h.push(this.getRenderTransform(r,s,o,_i,u,d,0).slice());const f=c.getSource(),_=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!un(_,l)){let y=l[0];const m=Lt(_);let x=0,C;for(;y<_[0];)--x,C=m*x,h.push(this.getRenderTransform(r,s,o,_i,u,d,C).slice()),y+=m;for(x=0,y=l[2];y>_[2];)++x,C=m*x,h.push(this.getRenderTransform(r,s,o,_i,u,d,C).slice()),y-=m}this.hitDetectionImageData_=o0(n,h,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}e(a0(t,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))}forEachFeatureAtCoordinate(t,e,n,r,s){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),c={},h=function(f,_,y){const m=At(f),x=c[m];if(x){if(x!==!0&&y<x.distanceSq){if(y===0)return c[m]=!0,s.splice(s.lastIndexOf(x),1),r(f,l,_);x.geometry=_,x.distanceSq=y}}else{if(y===0)return c[m]=!0,r(f,l,_);s.push(c[m]={feature:f,layer:l,geometry:_,distanceSq:y,callback:r})}};let u;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>u=f.forEachFeatureAtCoordinate(t,o,a,n,h,f===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(_=>_.value):null)),u}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const r=t.viewHints[Re.ANIMATING],s=t.viewHints[Re.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,u=c.resolution,d=t.pixelRatio,f=e.getRevision(),_=e.getRenderBuffer();let y=e.getRenderOrder();y===void 0&&(y=c0);const m=c.center.slice(),x=$a(l,_*u),C=x.slice(),b=[x.slice()],T=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!un(T,t.extent)){const H=Lt(T),Z=Math.max(Lt(x)/2,H);x[0]=T[0]-Z,x[2]=T[2]+Z,Eu(m,h);const N=vu(b[0],h);N[0]<T[0]&&N[2]<T[2]?b.push([N[0]+H,N[1],N[2]+H,N[3]]):N[0]>T[0]&&N[2]>T[2]&&b.push([N[0]-H,N[1],N[2]-H,N[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==y&&un(this.wrappedRenderedExtent_,x))return Kn(this.renderedExtent_,C)||(this.hitDetectionImageData_=null,this.renderedExtent_=C),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const L=new zc(xa(u,d),x,u,d);let P;this.getLayer().getDeclutter()&&(P=new zc(xa(u,d),x,u,d));let D;for(let H=0,Z=b.length;H<Z;++H)n.loadFeatures(b[H],u,h);const W=h0(u,d);let z=!0;const V=(function(H){let Z;const N=H.getStyleFunction()||e.getStyleFunction();if(N&&(Z=N(H,u)),Z){const dt=this.renderFeature(H,W,Z,L,D,P);z=z&&!dt}}).bind(this),ct=bu(x),rt=n.getFeaturesInExtent(ct);y&&rt.sort(y);for(let H=0,Z=rt.length;H<Z;++H)V(rt[H]);this.renderedFeatures_=rt,this.ready=z;const q=L.finish(),Dt=new Vc(x,u,d,n.getOverlaps(),q,e.getRenderBuffer());return P&&(this.declutterExecutorGroup=new Vc(x,u,d,n.getOverlaps(),P.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=y,this.renderedExtent_=C,this.wrappedRenderedExtent_=x,this.renderedCenter_=m,this.renderedProjection_=h,this.replayGroup_=Dt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=Uc(r,t,n[l],e,this.boundHandleStyleImageChange_,s,o)||a;else a=Uc(r,t,n,e,this.boundHandleStyleImageChange_,s,o);return a}}const E0=x0;class C0 extends jv{constructor(t){super(t)}createRenderer(){return new E0(this)}}const Rd=C0;class w0{constructor(t){this.rbush_=new pd(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[At(e)]=n}load(t,e){const n=new Array(e.length);for(let r=0,s=e.length;r<s;r++){const o=t[r],a=e[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[At(a)]=l}this.rbush_.load(n)}remove(t){const e=At(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(t,e){const n=this.items_[At(e)],r=[n.minX,n.minY,n.maxX,n.maxY];pr(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let r=0,s=t.length;r<s;r++)if(n=e(t[r]),n)return n;return n}isEmpty(){return _r(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return xi(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const Kc=w0,ri={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function b0(i,t){return[[-1/0,-1/0,1/0,1/0]]}let R0=!1;function T0(i,t,e,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(e,n,r):i,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=R0,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let h;c=="json"||c=="text"?h=a.responseText:c=="xml"?(h=a.responseXML,h||(h=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(h=a.response),h?s(t.readFeatures(h,{extent:e,featureProjection:r}),t.readProjection(h)):o()}else o()},a.onerror=o,a.send()}function $c(i,t){return function(e,n,r,s,o){const a=this;T0(i,t,e,n,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||Vn)}}class on extends Ei{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class S0 extends fl{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Vn,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(vt(this.format_,7),this.loader_=$c(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:b0;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Kc:null,this.loadedExtentsRtree_=new Kc,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),!e&&n===void 0&&(n=new pi(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=At(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new on(ri.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[wt(e,ut.CHANGE,this.handleFeatureChange_,this),wt(e,gr.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const r=e.getId();return r!==void 0&&(r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e),n&&(vt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=At(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=At(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();e.push(h),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(ri.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new on(ri.ADDFEATURE,n[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(ri.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener(ri.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(We.ADD,(function(n){e||(e=!0,this.addFeature(n.element),e=!1)}).bind(this)),t.addEventListener(We.REMOVE,(function(n){e||(e=!0,this.removeFeature(n.element),e=!1)}).bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Bt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=(function(r){this.removeFeatureInternal(r)}).bind(this);this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new on(ri.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(r){if(r.getGeometry().intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){const s=e(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),_r(this.nullGeometryFeatures_)||ki(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=p_(t,e);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||jr,this.featuresRtree_.forEachInExtent(l,function(c){if(e(c)){const h=c.getGeometry(),u=a;if(a=h.closestPointXY(n,r,o,a),a<u){s=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=At(e),r=e.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const s=e.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new on(ri.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:At(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_r(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,n){const r=this.loadedExtentsRtree_,s=this.strategy_(t,e,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(h){return un(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new on(ri.FEATURESLOADSTART)),this.loader_.call(this,l,e,n,(function(h){--this.loadingExtentsCount_,this.dispatchEvent(new on(ri.FEATURESLOADEND,void 0,h))}).bind(this),(function(){--this.loadingExtentsCount_,this.dispatchEvent(new on(ri.FEATURESLOADERROR))}).bind(this)),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(r){if(pr(r.extent,t))return n=r,!0}),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=At(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=At(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(Bt),delete this.featureChangeKeys_[e];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new on(ri.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){vt(this.format_,7),this.url_=t,this.setLoader($c(t,this.format_))}}const Td=S0,I0=[{id:"osm-color",url:"https://tile.openstreetmap.de/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',visible:!0,img:"/assets/img/basemaps/osm-color-de.jpeg"},{id:"osm-grey",url:"https://{a-c}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a>',visible:!1,img:"/assets/img/basemaps/carto-grey.jpeg"},{id:"osm-france",url:"https://tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',visible:!1,img:"/assets/img/basemaps/osm-hot-fr.jpeg"}],O0=[{type:"geonode",url:"https://geoserver.dainst.org/",id:6006,name:"Daard Database",visible:!0}],ux=i=>typeof i!="string"||i.length===0?(console.error("Invalid URL provided:",i),""):i.substring(0,i.lastIndexOf("/")+1),A0=i=>{try{return new URL(i),!0}catch{return!1}},dx=i=>{let t=i;return A0(i)&&(t=`<a href="${i}" target="_blank">${i}`),t},L0=(i,t)=>{const e=new CustomEvent(i,{detail:t});document.dispatchEvent(e)},M0=(i,t)=>new Promise(async(e,n)=>{if(await i(),document.querySelector(t))return e();function r(o,a){document.querySelector(t)&&(a.disconnect(),e())}const s=new MutationObserver(r);s.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),setTimeout(()=>{s.disconnect(),n(`Element ${t} not found`)},1e4)}),fx=async i=>{const t=i.map(e=>M0(...e));try{await Promise.all(t),Ue.store("pluginStatus").increasePluginLoadingStatus()}catch(e){console.error(e)}},gx=i=>String(i).replace(/[\u0300-\u036f]/g,"").trim().toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/:/g,"_"),P0=i=>{console.debug("1. Running function to update json definition for geonode");const t=i.map(e=>e.type==="geonode"?fetch(`${e.url}api/v2/datasets/${e.id}`).then(n=>n.json()).then(n=>(console.debug("- loading data for ",n.dataset.alternate),{...e,...n,url:`${e.url}gs/wms`,dataset:n.dataset,params:{LAYERS:n.dataset.alternate,TILED:!0}})).catch(n=>(console.error(`Error fetching data for layer ID ${e.id}:`,n),e)):Promise.resolve(e));return Promise.all(t).then(e=>(console.debug("2. Following promises finished updating json ",e),e))},D0=i=>i.map(t=>new Cv({source:new pv({url:t.url,attributions:t.attribution}),visible:t.visible,name:t.id,id:t.id,img:t.img})),F0=i=>{console.debug("4. Start working on updating geonode json data and building ol feature layers ");const t=[];return i.forEach(e=>{switch(console.debug(`- Working on ${e.name}`),e.type){case"WMS":case"geonode":const n=new dm({url:e.url,params:e.params,serverType:"geoserver"}),r=new Zp({source:n,name:e.name,dataset:e.dataset||{},visible:e.visible,type:e.type});t.push(r);break;case"GeoJSON":const s=new Td({url:e.url,format:new Ap}),o=new Rd({source:s,name:e.name,visible:e.visible});t.push(o);break}}),t},k0=D0(I0),N0=new Td({wrapX:!1}),G0=new Rd({source:N0,zIndex:1e3}),Dl=new hn({center:N_([0,0]),zoom:1}),Fl=new Gy({layers:[...k0,G0],target:"map",view:Dl});let j0=new Er({layers:[]});P0(O0).then(i=>{console.debug(`3. JSON data has updated and now is ${i}`),console.debug("4. Calling createFeatureLayersFromJson()");let t=F0(i);Fl.getLayers().extend(t),j0=new Er({layers:t}),console.debug("5. Map Setup done"),console.debug("6. Dispatch event featureMaplayersFinished");const e=new CustomEvent("featureMaplayersFinished",{});document.dispatchEvent(e)}).catch(i=>{console.error("Error updating JSON:",i)});var W0=Object.create,kl=Object.defineProperty,X0=Object.getPrototypeOf,z0=Object.prototype.hasOwnProperty,B0=Object.getOwnPropertyNames,Y0=Object.getOwnPropertyDescriptor,V0=i=>kl(i,"__esModule",{value:!0}),Sd=(i,t)=>()=>(t||(t={exports:{}},i(t.exports,t)),t.exports),U0=(i,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of B0(t))!z0.call(i,n)&&n!=="default"&&kl(i,n,{get:()=>t[n],enumerable:!(e=Y0(t,n))||e.enumerable});return i},Id=i=>U0(V0(kl(i!=null?W0(X0(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i),K0=Sd(i=>{Object.defineProperty(i,"__esModule",{value:!0});function t(p){var g=p.getBoundingClientRect();return{width:g.width,height:g.height,top:g.top,right:g.right,bottom:g.bottom,left:g.left,x:g.left,y:g.top}}function e(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var g=p.ownerDocument;return g&&g.defaultView||window}return p}function n(p){var g=e(p),E=g.pageXOffset,O=g.pageYOffset;return{scrollLeft:E,scrollTop:O}}function r(p){var g=e(p).Element;return p instanceof g||p instanceof Element}function s(p){var g=e(p).HTMLElement;return p instanceof g||p instanceof HTMLElement}function o(p){if(typeof ShadowRoot>"u")return!1;var g=e(p).ShadowRoot;return p instanceof g||p instanceof ShadowRoot}function a(p){return{scrollLeft:p.scrollLeft,scrollTop:p.scrollTop}}function l(p){return p===e(p)||!s(p)?n(p):a(p)}function c(p){return p?(p.nodeName||"").toLowerCase():null}function h(p){return((r(p)?p.ownerDocument:p.document)||window.document).documentElement}function u(p){return t(h(p)).left+n(p).scrollLeft}function d(p){return e(p).getComputedStyle(p)}function f(p){var g=d(p),E=g.overflow,O=g.overflowX,A=g.overflowY;return/auto|scroll|overlay|hidden/.test(E+A+O)}function _(p,g,E){E===void 0&&(E=!1);var O=h(g),A=t(p),k=s(g),B={scrollLeft:0,scrollTop:0},j={x:0,y:0};return(k||!k&&!E)&&((c(g)!=="body"||f(O))&&(B=l(g)),s(g)?(j=t(g),j.x+=g.clientLeft,j.y+=g.clientTop):O&&(j.x=u(O))),{x:A.left+B.scrollLeft-j.x,y:A.top+B.scrollTop-j.y,width:A.width,height:A.height}}function y(p){var g=t(p),E=p.offsetWidth,O=p.offsetHeight;return Math.abs(g.width-E)<=1&&(E=g.width),Math.abs(g.height-O)<=1&&(O=g.height),{x:p.offsetLeft,y:p.offsetTop,width:E,height:O}}function m(p){return c(p)==="html"?p:p.assignedSlot||p.parentNode||(o(p)?p.host:null)||h(p)}function x(p){return["html","body","#document"].indexOf(c(p))>=0?p.ownerDocument.body:s(p)&&f(p)?p:x(m(p))}function C(p,g){var E;g===void 0&&(g=[]);var O=x(p),A=O===((E=p.ownerDocument)==null?void 0:E.body),k=e(O),B=A?[k].concat(k.visualViewport||[],f(O)?O:[]):O,j=g.concat(B);return A?j:j.concat(C(m(B)))}function b(p){return["table","td","th"].indexOf(c(p))>=0}function T(p){return!s(p)||d(p).position==="fixed"?null:p.offsetParent}function L(p){var g=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,E=navigator.userAgent.indexOf("Trident")!==-1;if(E&&s(p)){var O=d(p);if(O.position==="fixed")return null}for(var A=m(p);s(A)&&["html","body"].indexOf(c(A))<0;){var k=d(A);if(k.transform!=="none"||k.perspective!=="none"||k.contain==="paint"||["transform","perspective"].indexOf(k.willChange)!==-1||g&&k.willChange==="filter"||g&&k.filter&&k.filter!=="none")return A;A=A.parentNode}return null}function P(p){for(var g=e(p),E=T(p);E&&b(E)&&d(E).position==="static";)E=T(E);return E&&(c(E)==="html"||c(E)==="body"&&d(E).position==="static")?g:E||L(p)||g}var D="top",W="bottom",z="right",V="left",ct="auto",rt=[D,W,z,V],q="start",Dt="end",H="clippingParents",Z="viewport",N="popper",dt="reference",Gt=rt.reduce(function(p,g){return p.concat([g+"-"+q,g+"-"+Dt])},[]),Tt=[].concat(rt,[ct]).reduce(function(p,g){return p.concat([g,g+"-"+q,g+"-"+Dt])},[]),Jt="beforeRead",M="read",Se="afterRead",bt="beforeMain",Ot="main",Ie="afterMain",De="beforeWrite",ne="write",Ge="afterWrite",Ae=[Jt,M,Se,bt,Ot,Ie,De,ne,Ge];function Xi(p){var g=new Map,E=new Set,O=[];p.forEach(function(k){g.set(k.name,k)});function A(k){E.add(k.name);var B=[].concat(k.requires||[],k.requiresIfExists||[]);B.forEach(function(j){if(!E.has(j)){var K=g.get(j);K&&A(K)}}),O.push(k)}return p.forEach(function(k){E.has(k.name)||A(k)}),O}function Ee(p){var g=Xi(p);return Ae.reduce(function(E,O){return E.concat(g.filter(function(A){return A.phase===O}))},[])}function Xe(p){var g;return function(){return g||(g=new Promise(function(E){Promise.resolve().then(function(){g=void 0,E(p())})})),g}}function ue(p){for(var g=arguments.length,E=new Array(g>1?g-1:0),O=1;O<g;O++)E[O-1]=arguments[O];return[].concat(E).reduce(function(A,k){return A.replace(/%s/,k)},p)}var Le='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',$e='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',re=["name","enabled","phase","fn","effect","requires","options"];function zi(p){p.forEach(function(g){Object.keys(g).forEach(function(E){switch(E){case"name":typeof g.name!="string"&&console.error(ue(Le,String(g.name),'"name"','"string"','"'+String(g.name)+'"'));break;case"enabled":typeof g.enabled!="boolean"&&console.error(ue(Le,g.name,'"enabled"','"boolean"','"'+String(g.enabled)+'"'));case"phase":Ae.indexOf(g.phase)<0&&console.error(ue(Le,g.name,'"phase"',"either "+Ae.join(", "),'"'+String(g.phase)+'"'));break;case"fn":typeof g.fn!="function"&&console.error(ue(Le,g.name,'"fn"','"function"','"'+String(g.fn)+'"'));break;case"effect":typeof g.effect!="function"&&console.error(ue(Le,g.name,'"effect"','"function"','"'+String(g.fn)+'"'));break;case"requires":Array.isArray(g.requires)||console.error(ue(Le,g.name,'"requires"','"array"','"'+String(g.requires)+'"'));break;case"requiresIfExists":Array.isArray(g.requiresIfExists)||console.error(ue(Le,g.name,'"requiresIfExists"','"array"','"'+String(g.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+g.name+'" modifier, valid properties are '+re.map(function(O){return'"'+O+'"'}).join(", ")+'; but "'+E+'" was provided.')}g.requires&&g.requires.forEach(function(O){p.find(function(A){return A.name===O})==null&&console.error(ue($e,String(g.name),O,O))})})})}function Bi(p,g){var E=new Set;return p.filter(function(O){var A=g(O);if(!E.has(A))return E.add(A),!0})}function se(p){return p.split("-")[0]}function En(p){var g=p.reduce(function(E,O){var A=E[O.name];return E[O.name]=A?Object.assign({},A,O,{options:Object.assign({},A.options,O.options),data:Object.assign({},A.data,O.data)}):O,E},{});return Object.keys(g).map(function(E){return g[E]})}function de(p){var g=e(p),E=h(p),O=g.visualViewport,A=E.clientWidth,k=E.clientHeight,B=0,j=0;return O&&(A=O.width,k=O.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(B=O.offsetLeft,j=O.offsetTop)),{width:A,height:k,x:B+u(p),y:j}}var Kt=Math.max,fe=Math.min,Ce=Math.round;function Je(p){var g,E=h(p),O=n(p),A=(g=p.ownerDocument)==null?void 0:g.body,k=Kt(E.scrollWidth,E.clientWidth,A?A.scrollWidth:0,A?A.clientWidth:0),B=Kt(E.scrollHeight,E.clientHeight,A?A.scrollHeight:0,A?A.clientHeight:0),j=-O.scrollLeft+u(p),K=-O.scrollTop;return d(A||E).direction==="rtl"&&(j+=Kt(E.clientWidth,A?A.clientWidth:0)-k),{width:k,height:B,x:j,y:K}}function ze(p,g){var E=g.getRootNode&&g.getRootNode();if(p.contains(g))return!0;if(E&&o(E)){var O=g;do{if(O&&p.isSameNode(O))return!0;O=O.parentNode||O.host}while(O)}return!1}function Oe(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function Qe(p){var g=t(p);return g.top=g.top+p.clientTop,g.left=g.left+p.clientLeft,g.bottom=g.top+p.clientHeight,g.right=g.left+p.clientWidth,g.width=p.clientWidth,g.height=p.clientHeight,g.x=g.left,g.y=g.top,g}function wi(p,g){return g===Z?Oe(de(p)):s(g)?Qe(g):Oe(Je(h(p)))}function Qt(p){var g=C(m(p)),E=["absolute","fixed"].indexOf(d(p).position)>=0,O=E&&s(p)?P(p):p;return r(O)?g.filter(function(A){return r(A)&&ze(A,O)&&c(A)!=="body"}):[]}function ai(p,g,E){var O=g==="clippingParents"?Qt(p):[].concat(g),A=[].concat(O,[E]),k=A[0],B=A.reduce(function(j,K){var ot=wi(p,K);return j.top=Kt(ot.top,j.top),j.right=fe(ot.right,j.right),j.bottom=fe(ot.bottom,j.bottom),j.left=Kt(ot.left,j.left),j},wi(p,k));return B.width=B.right-B.left,B.height=B.bottom-B.top,B.x=B.left,B.y=B.top,B}function bi(p){return p.split("-")[1]}function je(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function Cn(p){var g=p.reference,E=p.element,O=p.placement,A=O?se(O):null,k=O?bi(O):null,B=g.x+g.width/2-E.width/2,j=g.y+g.height/2-E.height/2,K;switch(A){case D:K={x:B,y:g.y-E.height};break;case W:K={x:B,y:g.y+g.height};break;case z:K={x:g.x+g.width,y:j};break;case V:K={x:g.x-E.width,y:j};break;default:K={x:g.x,y:g.y}}var ot=A?je(A):null;if(ot!=null){var Y=ot==="y"?"height":"width";switch(k){case q:K[ot]=K[ot]-(g[Y]/2-E[Y]/2);break;case Dt:K[ot]=K[ot]+(g[Y]/2-E[Y]/2);break}}return K}function wn(){return{top:0,right:0,bottom:0,left:0}}function Yi(p){return Object.assign({},wn(),p)}function bn(p,g){return g.reduce(function(E,O){return E[O]=p,E},{})}function He(p,g){g===void 0&&(g={});var E=g,O=E.placement,A=O===void 0?p.placement:O,k=E.boundary,B=k===void 0?H:k,j=E.rootBoundary,K=j===void 0?Z:j,ot=E.elementContext,Y=ot===void 0?N:ot,Mt=E.altBoundary,Yt=Mt===void 0?!1:Mt,It=E.padding,Ct=It===void 0?0:It,jt=Yi(typeof Ct!="number"?Ct:bn(Ct,rt)),Rt=Y===N?dt:N,Ht=p.elements.reference,Wt=p.rects.popper,Zt=p.elements[Yt?Rt:Y],lt=ai(r(Zt)?Zt:Zt.contextElement||h(p.elements.popper),B,K),Nt=t(Ht),Pt=Cn({reference:Nt,element:Wt,strategy:"absolute",placement:A}),Vt=Oe(Object.assign({},Wt,Pt)),zt=Y===N?Vt:Nt,oe={top:lt.top-zt.top+jt.top,bottom:zt.bottom-lt.bottom+jt.bottom,left:lt.left-zt.left+jt.left,right:zt.right-lt.right+jt.right},qt=p.modifiersData.offset;if(Y===N&&qt){var te=qt[A];Object.keys(oe).forEach(function(ii){var Me=[z,W].indexOf(ii)>=0?1:-1,Ii=[D,W].indexOf(ii)>=0?"y":"x";oe[ii]+=te[Ii]*Me})}return oe}var li="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",Ri="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",Ze={placement:"bottom",modifiers:[],strategy:"absolute"};function ci(){for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];return!g.some(function(O){return!(O&&typeof O.getBoundingClientRect=="function")})}function Ti(p){p===void 0&&(p={});var g=p,E=g.defaultModifiers,O=E===void 0?[]:E,A=g.defaultOptions,k=A===void 0?Ze:A;return function(j,K,ot){ot===void 0&&(ot=k);var Y={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ze,k),modifiersData:{},elements:{reference:j,popper:K},attributes:{},styles:{}},Mt=[],Yt=!1,It={state:Y,setOptions:function(Ht){jt(),Y.options=Object.assign({},k,Y.options,Ht),Y.scrollParents={reference:r(j)?C(j):j.contextElement?C(j.contextElement):[],popper:C(K)};var Wt=Ee(En([].concat(O,Y.options.modifiers)));Y.orderedModifiers=Wt.filter(function(qt){return qt.enabled});{var Zt=Bi([].concat(Wt,Y.options.modifiers),function(qt){var te=qt.name;return te});if(zi(Zt),se(Y.options.placement)===ct){var lt=Y.orderedModifiers.find(function(qt){var te=qt.name;return te==="flip"});lt||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var Nt=d(K),Pt=Nt.marginTop,Vt=Nt.marginRight,zt=Nt.marginBottom,oe=Nt.marginLeft;[Pt,Vt,zt,oe].some(function(qt){return parseFloat(qt)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return Ct(),It.update()},forceUpdate:function(){if(!Yt){var Ht=Y.elements,Wt=Ht.reference,Zt=Ht.popper;if(!ci(Wt,Zt)){console.error(li);return}Y.rects={reference:_(Wt,P(Zt),Y.options.strategy==="fixed"),popper:y(Zt)},Y.reset=!1,Y.placement=Y.options.placement,Y.orderedModifiers.forEach(function(te){return Y.modifiersData[te.name]=Object.assign({},te.data)});for(var lt=0,Nt=0;Nt<Y.orderedModifiers.length;Nt++){if(lt+=1,lt>100){console.error(Ri);break}if(Y.reset===!0){Y.reset=!1,Nt=-1;continue}var Pt=Y.orderedModifiers[Nt],Vt=Pt.fn,zt=Pt.options,oe=zt===void 0?{}:zt,qt=Pt.name;typeof Vt=="function"&&(Y=Vt({state:Y,options:oe,name:qt,instance:It})||Y)}}},update:Xe(function(){return new Promise(function(Rt){It.forceUpdate(),Rt(Y)})}),destroy:function(){jt(),Yt=!0}};if(!ci(j,K))return console.error(li),It;It.setOptions(ot).then(function(Rt){!Yt&&ot.onFirstUpdate&&ot.onFirstUpdate(Rt)});function Ct(){Y.orderedModifiers.forEach(function(Rt){var Ht=Rt.name,Wt=Rt.options,Zt=Wt===void 0?{}:Wt,lt=Rt.effect;if(typeof lt=="function"){var Nt=lt({state:Y,name:Ht,instance:It,options:Zt}),Pt=function(){};Mt.push(Nt||Pt)}})}function jt(){Mt.forEach(function(Rt){return Rt()}),Mt=[]}return It}}var ae={passive:!0};function hi(p){var g=p.state,E=p.instance,O=p.options,A=O.scroll,k=A===void 0?!0:A,B=O.resize,j=B===void 0?!0:B,K=e(g.elements.popper),ot=[].concat(g.scrollParents.reference,g.scrollParents.popper);return k&&ot.forEach(function(Y){Y.addEventListener("scroll",E.update,ae)}),j&&K.addEventListener("resize",E.update,ae),function(){k&&ot.forEach(function(Y){Y.removeEventListener("scroll",E.update,ae)}),j&&K.removeEventListener("resize",E.update,ae)}}var we={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hi,data:{}};function Be(p){var g=p.state,E=p.name;g.modifiersData[E]=Cn({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})}var ge={name:"popperOffsets",enabled:!0,phase:"read",fn:Be,data:{}},Vi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ui(p){var g=p.x,E=p.y,O=window,A=O.devicePixelRatio||1;return{x:Ce(Ce(g*A)/A)||0,y:Ce(Ce(E*A)/A)||0}}function le(p){var g,E=p.popper,O=p.popperRect,A=p.placement,k=p.offsets,B=p.position,j=p.gpuAcceleration,K=p.adaptive,ot=p.roundOffsets,Y=ot===!0?Ui(k):typeof ot=="function"?ot(k):k,Mt=Y.x,Yt=Mt===void 0?0:Mt,It=Y.y,Ct=It===void 0?0:It,jt=k.hasOwnProperty("x"),Rt=k.hasOwnProperty("y"),Ht=V,Wt=D,Zt=window;if(K){var lt=P(E),Nt="clientHeight",Pt="clientWidth";lt===e(E)&&(lt=h(E),d(lt).position!=="static"&&(Nt="scrollHeight",Pt="scrollWidth")),lt=lt,A===D&&(Wt=W,Ct-=lt[Nt]-O.height,Ct*=j?1:-1),A===V&&(Ht=z,Yt-=lt[Pt]-O.width,Yt*=j?1:-1)}var Vt=Object.assign({position:B},K&&Vi);if(j){var zt;return Object.assign({},Vt,(zt={},zt[Wt]=Rt?"0":"",zt[Ht]=jt?"0":"",zt.transform=(Zt.devicePixelRatio||1)<2?"translate("+Yt+"px, "+Ct+"px)":"translate3d("+Yt+"px, "+Ct+"px, 0)",zt))}return Object.assign({},Vt,(g={},g[Wt]=Rt?Ct+"px":"",g[Ht]=jt?Yt+"px":"",g.transform="",g))}function v(p){var g=p.state,E=p.options,O=E.gpuAcceleration,A=O===void 0?!0:O,k=E.adaptive,B=k===void 0?!0:k,j=E.roundOffsets,K=j===void 0?!0:j;{var ot=d(g.elements.popper).transitionProperty||"";B&&["transform","top","right","bottom","left"].some(function(Mt){return ot.indexOf(Mt)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var Y={placement:se(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:A};g.modifiersData.popperOffsets!=null&&(g.styles.popper=Object.assign({},g.styles.popper,le(Object.assign({},Y,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:B,roundOffsets:K})))),g.modifiersData.arrow!=null&&(g.styles.arrow=Object.assign({},g.styles.arrow,le(Object.assign({},Y,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:K})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})}var w={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:v,data:{}};function S(p){var g=p.state;Object.keys(g.elements).forEach(function(E){var O=g.styles[E]||{},A=g.attributes[E]||{},k=g.elements[E];!s(k)||!c(k)||(Object.assign(k.style,O),Object.keys(A).forEach(function(B){var j=A[B];j===!1?k.removeAttribute(B):k.setAttribute(B,j===!0?"":j)}))})}function F(p){var g=p.state,E={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,E.popper),g.styles=E,g.elements.arrow&&Object.assign(g.elements.arrow.style,E.arrow),function(){Object.keys(g.elements).forEach(function(O){var A=g.elements[O],k=g.attributes[O]||{},B=Object.keys(g.styles.hasOwnProperty(O)?g.styles[O]:E[O]),j=B.reduce(function(K,ot){return K[ot]="",K},{});!s(A)||!c(A)||(Object.assign(A.style,j),Object.keys(k).forEach(function(K){A.removeAttribute(K)}))})}}var U={name:"applyStyles",enabled:!0,phase:"write",fn:S,effect:F,requires:["computeStyles"]};function X(p,g,E){var O=se(p),A=[V,D].indexOf(O)>=0?-1:1,k=typeof E=="function"?E(Object.assign({},g,{placement:p})):E,B=k[0],j=k[1];return B=B||0,j=(j||0)*A,[V,z].indexOf(O)>=0?{x:j,y:B}:{x:B,y:j}}function G(p){var g=p.state,E=p.options,O=p.name,A=E.offset,k=A===void 0?[0,0]:A,B=Tt.reduce(function(Y,Mt){return Y[Mt]=X(Mt,g.rects,k),Y},{}),j=B[g.placement],K=j.x,ot=j.y;g.modifiersData.popperOffsets!=null&&(g.modifiersData.popperOffsets.x+=K,g.modifiersData.popperOffsets.y+=ot),g.modifiersData[O]=B}var yt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:G},at={left:"right",right:"left",bottom:"top",top:"bottom"};function ft(p){return p.replace(/left|right|bottom|top/g,function(g){return at[g]})}var xt={start:"end",end:"start"};function Ft(p){return p.replace(/start|end/g,function(g){return xt[g]})}function $t(p,g){g===void 0&&(g={});var E=g,O=E.placement,A=E.boundary,k=E.rootBoundary,B=E.padding,j=E.flipVariations,K=E.allowedAutoPlacements,ot=K===void 0?Tt:K,Y=bi(O),Mt=Y?j?Gt:Gt.filter(function(Ct){return bi(Ct)===Y}):rt,Yt=Mt.filter(function(Ct){return ot.indexOf(Ct)>=0});Yt.length===0&&(Yt=Mt,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var It=Yt.reduce(function(Ct,jt){return Ct[jt]=He(p,{placement:jt,boundary:A,rootBoundary:k,padding:B})[se(jt)],Ct},{});return Object.keys(It).sort(function(Ct,jt){return It[Ct]-It[jt]})}function St(p){if(se(p)===ct)return[];var g=ft(p);return[Ft(p),g,Ft(g)]}function Xt(p){var g=p.state,E=p.options,O=p.name;if(!g.modifiersData[O]._skip){for(var A=E.mainAxis,k=A===void 0?!0:A,B=E.altAxis,j=B===void 0?!0:B,K=E.fallbackPlacements,ot=E.padding,Y=E.boundary,Mt=E.rootBoundary,Yt=E.altBoundary,It=E.flipVariations,Ct=It===void 0?!0:It,jt=E.allowedAutoPlacements,Rt=g.options.placement,Ht=se(Rt),Wt=Ht===Rt,Zt=K||(Wt||!Ct?[ft(Rt)]:St(Rt)),lt=[Rt].concat(Zt).reduce(function(Q,pt){return Q.concat(se(pt)===ct?$t(g,{placement:pt,boundary:Y,rootBoundary:Mt,padding:ot,flipVariations:Ct,allowedAutoPlacements:jt}):pt)},[]),Nt=g.rects.reference,Pt=g.rects.popper,Vt=new Map,zt=!0,oe=lt[0],qt=0;qt<lt.length;qt++){var te=lt[qt],ii=se(te),Me=bi(te)===q,Ii=[D,W].indexOf(ii)>=0,Tn=Ii?"width":"height",Zi=He(g,{placement:te,boundary:Y,rootBoundary:Mt,altBoundary:Yt,padding:ot}),Oi=Ii?Me?z:V:Me?W:D;Nt[Tn]>Pt[Tn]&&(Oi=ft(Oi));var wr=ft(Oi),qi=[];if(k&&qi.push(Zi[ii]<=0),j&&qi.push(Zi[Oi]<=0,Zi[wr]<=0),qi.every(function(Q){return Q})){oe=te,zt=!1;break}Vt.set(te,qi)}if(zt)for(var qn=Ct?3:1,br=function(pt){var Et=lt.find(function(pe){var me=Vt.get(pe);if(me)return me.slice(0,pt).every(function(ui){return ui})});if(Et)return oe=Et,"break"},I=qn;I>0;I--){var $=br(I);if($==="break")break}g.placement!==oe&&(g.modifiersData[O]._skip=!0,g.placement=oe,g.reset=!0)}}var it={name:"flip",enabled:!0,phase:"main",fn:Xt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(p){return p==="x"?"y":"x"}function _t(p,g,E){return Kt(p,fe(g,E))}function J(p){var g=p.state,E=p.options,O=p.name,A=E.mainAxis,k=A===void 0?!0:A,B=E.altAxis,j=B===void 0?!1:B,K=E.boundary,ot=E.rootBoundary,Y=E.altBoundary,Mt=E.padding,Yt=E.tether,It=Yt===void 0?!0:Yt,Ct=E.tetherOffset,jt=Ct===void 0?0:Ct,Rt=He(g,{boundary:K,rootBoundary:ot,padding:Mt,altBoundary:Y}),Ht=se(g.placement),Wt=bi(g.placement),Zt=!Wt,lt=je(Ht),Nt=gt(lt),Pt=g.modifiersData.popperOffsets,Vt=g.rects.reference,zt=g.rects.popper,oe=typeof jt=="function"?jt(Object.assign({},g.rects,{placement:g.placement})):jt,qt={x:0,y:0};if(Pt){if(k||j){var te=lt==="y"?D:V,ii=lt==="y"?W:z,Me=lt==="y"?"height":"width",Ii=Pt[lt],Tn=Pt[lt]+Rt[te],Zi=Pt[lt]-Rt[ii],Oi=It?-zt[Me]/2:0,wr=Wt===q?Vt[Me]:zt[Me],qi=Wt===q?-zt[Me]:-Vt[Me],qn=g.elements.arrow,br=It&&qn?y(qn):{width:0,height:0},I=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:wn(),$=I[te],Q=I[ii],pt=_t(0,Vt[Me],br[Me]),Et=Zt?Vt[Me]/2-Oi-pt-$-oe:wr-pt-$-oe,pe=Zt?-Vt[Me]/2+Oi+pt+Q+oe:qi+pt+Q+oe,me=g.elements.arrow&&P(g.elements.arrow),ui=me?lt==="y"?me.clientTop||0:me.clientLeft||0:0,Rr=g.modifiersData.offset?g.modifiersData.offset[g.placement][lt]:0,di=Pt[lt]+Et-Rr-ui,Jn=Pt[lt]+pe-Rr;if(k){var Sn=_t(It?fe(Tn,di):Tn,Ii,It?Kt(Zi,Jn):Zi);Pt[lt]=Sn,qt[lt]=Sn-Ii}if(j){var Ji=lt==="x"?D:V,mo=lt==="x"?W:z,Qi=Pt[Nt],In=Qi+Rt[Ji],Nl=Qi-Rt[mo],Gl=_t(It?fe(In,di):In,Qi,It?Kt(Nl,Jn):Nl);Pt[Nt]=Gl,qt[Nt]=Gl-Qi}}g.modifiersData[O]=qt}}var st={name:"preventOverflow",enabled:!0,phase:"main",fn:J,requiresIfExists:["offset"]},R=function(g,E){return g=typeof g=="function"?g(Object.assign({},E.rects,{placement:E.placement})):g,Yi(typeof g!="number"?g:bn(g,rt))};function _e(p){var g,E=p.state,O=p.name,A=p.options,k=E.elements.arrow,B=E.modifiersData.popperOffsets,j=se(E.placement),K=je(j),ot=[V,z].indexOf(j)>=0,Y=ot?"height":"width";if(!(!k||!B)){var Mt=R(A.padding,E),Yt=y(k),It=K==="y"?D:V,Ct=K==="y"?W:z,jt=E.rects.reference[Y]+E.rects.reference[K]-B[K]-E.rects.popper[Y],Rt=B[K]-E.rects.reference[K],Ht=P(k),Wt=Ht?K==="y"?Ht.clientHeight||0:Ht.clientWidth||0:0,Zt=jt/2-Rt/2,lt=Mt[It],Nt=Wt-Yt[Y]-Mt[Ct],Pt=Wt/2-Yt[Y]/2+Zt,Vt=_t(lt,Pt,Nt),zt=K;E.modifiersData[O]=(g={},g[zt]=Vt,g.centerOffset=Vt-Pt,g)}}function ht(p){var g=p.state,E=p.options,O=E.element,A=O===void 0?"[data-popper-arrow]":O;if(A!=null&&!(typeof A=="string"&&(A=g.elements.popper.querySelector(A),!A))){if(s(A)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),!ze(g.elements.popper,A)){console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "));return}g.elements.arrow=A}}var Si={name:"arrow",enabled:!0,phase:"main",fn:_e,effect:ht,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ti(p,g,E){return E===void 0&&(E={x:0,y:0}),{top:p.top-g.height-E.y,right:p.right-g.width+E.x,bottom:p.bottom-g.height+E.y,left:p.left-g.width-E.x}}function Ki(p){return[D,z,W,V].some(function(g){return p[g]>=0})}function $i(p){var g=p.state,E=p.name,O=g.rects.reference,A=g.rects.popper,k=g.modifiersData.preventOverflow,B=He(g,{elementContext:"reference"}),j=He(g,{altBoundary:!0}),K=ti(B,O),ot=ti(j,A,k),Y=Ki(K),Mt=Ki(ot);g.modifiersData[E]={referenceClippingOffsets:K,popperEscapeOffsets:ot,isReferenceHidden:Y,hasPopperEscaped:Mt},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":Y,"data-popper-escaped":Mt})}var Hi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$i},Fe=[we,ge,w,U],Ye=Ti({defaultModifiers:Fe}),ei=[we,ge,w,U,yt,it,st,Si,Hi],Rn=Ti({defaultModifiers:ei});i.applyStyles=U,i.arrow=Si,i.computeStyles=w,i.createPopper=Rn,i.createPopperLite=Ye,i.defaultModifiers=ei,i.detectOverflow=He,i.eventListeners=we,i.flip=it,i.hide=Hi,i.offset=yt,i.popperGenerator=Ti,i.popperOffsets=ge,i.preventOverflow=st}),Od=Sd(i=>{Object.defineProperty(i,"__esModule",{value:!0});var t=K0(),e='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',n="tippy-box",r="tippy-content",s="tippy-backdrop",o="tippy-arrow",a="tippy-svg-arrow",l={passive:!0,capture:!0};function c(v,w){return{}.hasOwnProperty.call(v,w)}function h(v,w,S){if(Array.isArray(v)){var F=v[w];return F??(Array.isArray(S)?S[w]:S)}return v}function u(v,w){var S={}.toString.call(v);return S.indexOf("[object")===0&&S.indexOf(w+"]")>-1}function d(v,w){return typeof v=="function"?v.apply(void 0,w):v}function f(v,w){if(w===0)return v;var S;return function(F){clearTimeout(S),S=setTimeout(function(){v(F)},w)}}function _(v,w){var S=Object.assign({},v);return w.forEach(function(F){delete S[F]}),S}function y(v){return v.split(/\s+/).filter(Boolean)}function m(v){return[].concat(v)}function x(v,w){v.indexOf(w)===-1&&v.push(w)}function C(v){return v.filter(function(w,S){return v.indexOf(w)===S})}function b(v){return v.split("-")[0]}function T(v){return[].slice.call(v)}function L(v){return Object.keys(v).reduce(function(w,S){return v[S]!==void 0&&(w[S]=v[S]),w},{})}function P(){return document.createElement("div")}function D(v){return["Element","Fragment"].some(function(w){return u(v,w)})}function W(v){return u(v,"NodeList")}function z(v){return u(v,"MouseEvent")}function V(v){return!!(v&&v._tippy&&v._tippy.reference===v)}function ct(v){return D(v)?[v]:W(v)?T(v):Array.isArray(v)?v:T(document.querySelectorAll(v))}function rt(v,w){v.forEach(function(S){S&&(S.style.transitionDuration=w+"ms")})}function q(v,w){v.forEach(function(S){S&&S.setAttribute("data-state",w)})}function Dt(v){var w,S=m(v),F=S[0];return!(F==null||(w=F.ownerDocument)==null)&&w.body?F.ownerDocument:document}function H(v,w){var S=w.clientX,F=w.clientY;return v.every(function(U){var X=U.popperRect,G=U.popperState,yt=U.props,at=yt.interactiveBorder,ft=b(G.placement),xt=G.modifiersData.offset;if(!xt)return!0;var Ft=ft==="bottom"?xt.top.y:0,$t=ft==="top"?xt.bottom.y:0,St=ft==="right"?xt.left.x:0,Xt=ft==="left"?xt.right.x:0,it=X.top-F+Ft>at,gt=F-X.bottom-$t>at,_t=X.left-S+St>at,J=S-X.right-Xt>at;return it||gt||_t||J})}function Z(v,w,S){var F=w+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(U){v[F](U,S)})}var N={isTouch:!1},dt=0;function Gt(){N.isTouch||(N.isTouch=!0,window.performance&&document.addEventListener("mousemove",Tt))}function Tt(){var v=performance.now();v-dt<20&&(N.isTouch=!1,document.removeEventListener("mousemove",Tt)),dt=v}function Jt(){var v=document.activeElement;if(V(v)){var w=v._tippy;v.blur&&!w.state.isVisible&&v.blur()}}function M(){document.addEventListener("touchstart",Gt,l),window.addEventListener("blur",Jt)}var Se=typeof window<"u"&&typeof document<"u",bt=Se?navigator.userAgent:"",Ot=/MSIE |Trident\//.test(bt);function Ie(v){var w=v==="destroy"?"n already-":" ";return[v+"() was called on a"+w+"destroyed instance. This is a no-op but","indicates a potential memory leak."].join(" ")}function De(v){var w=/[ \t]{2,}/g,S=/^[ \t]*/gm;return v.replace(w," ").replace(S,"").trim()}function ne(v){return De(`
  %ctippy.js

  %c`+De(v)+`

  %c This is a development-only message. It will be removed in production.
  `)}function Ge(v){return[ne(v),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}var Ae;Xi();function Xi(){Ae=new Set}function Ee(v,w){if(v&&!Ae.has(w)){var S;Ae.add(w),(S=console).warn.apply(S,Ge(w))}}function Xe(v,w){if(v&&!Ae.has(w)){var S;Ae.add(w),(S=console).error.apply(S,Ge(w))}}function ue(v){var w=!v,S=Object.prototype.toString.call(v)==="[object Object]"&&!v.addEventListener;Xe(w,["tippy() was passed","`"+String(v)+"`","as its targets (first) argument. Valid types are: String, Element,","Element[], or NodeList."].join(" ")),Xe(S,["tippy() was passed a plain object which is not supported as an argument","for virtual positioning. Use props.getReferenceClientRect instead."].join(" "))}var Le={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$e={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},re=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Le,{},$e),zi=Object.keys(re),Bi=function(w){Kt(w,[]);var S=Object.keys(w);S.forEach(function(F){re[F]=w[F]})};function se(v){var w=v.plugins||[],S=w.reduce(function(F,U){var X=U.name,G=U.defaultValue;return X&&(F[X]=v[X]!==void 0?v[X]:G),F},{});return Object.assign({},v,{},S)}function En(v,w){var S=w?Object.keys(se(Object.assign({},re,{plugins:w}))):zi,F=S.reduce(function(U,X){var G=(v.getAttribute("data-tippy-"+X)||"").trim();if(!G)return U;if(X==="content")U[X]=G;else try{U[X]=JSON.parse(G)}catch{U[X]=G}return U},{});return F}function de(v,w){var S=Object.assign({},w,{content:d(w.content,[v])},w.ignoreAttributes?{}:En(v,w.plugins));return S.aria=Object.assign({},re.aria,{},S.aria),S.aria={expanded:S.aria.expanded==="auto"?w.interactive:S.aria.expanded,content:S.aria.content==="auto"?w.interactive?null:"describedby":S.aria.content},S}function Kt(v,w){v===void 0&&(v={}),w===void 0&&(w=[]);var S=Object.keys(v);S.forEach(function(F){var U=_(re,Object.keys(Le)),X=!c(U,F);X&&(X=w.filter(function(G){return G.name===F}).length===0),Ee(X,["`"+F+"`","is not a valid prop. You may have spelled it incorrectly, or if it's","a plugin, forgot to pass it in an array as props.plugins.",`

`,`All props: https://atomiks.github.io/tippyjs/v6/all-props/
`,"Plugins: https://atomiks.github.io/tippyjs/v6/plugins/"].join(" "))})}var fe=function(){return"innerHTML"};function Ce(v,w){v[fe()]=w}function Je(v){var w=P();return v===!0?w.className=o:(w.className=a,D(v)?w.appendChild(v):Ce(w,v)),w}function ze(v,w){D(w.content)?(Ce(v,""),v.appendChild(w.content)):typeof w.content!="function"&&(w.allowHTML?Ce(v,w.content):v.textContent=w.content)}function Oe(v){var w=v.firstElementChild,S=T(w.children);return{box:w,content:S.find(function(F){return F.classList.contains(r)}),arrow:S.find(function(F){return F.classList.contains(o)||F.classList.contains(a)}),backdrop:S.find(function(F){return F.classList.contains(s)})}}function Qe(v){var w=P(),S=P();S.className=n,S.setAttribute("data-state","hidden"),S.setAttribute("tabindex","-1");var F=P();F.className=r,F.setAttribute("data-state","hidden"),ze(F,v.props),w.appendChild(S),S.appendChild(F),U(v.props,v.props);function U(X,G){var yt=Oe(w),at=yt.box,ft=yt.content,xt=yt.arrow;G.theme?at.setAttribute("data-theme",G.theme):at.removeAttribute("data-theme"),typeof G.animation=="string"?at.setAttribute("data-animation",G.animation):at.removeAttribute("data-animation"),G.inertia?at.setAttribute("data-inertia",""):at.removeAttribute("data-inertia"),at.style.maxWidth=typeof G.maxWidth=="number"?G.maxWidth+"px":G.maxWidth,G.role?at.setAttribute("role",G.role):at.removeAttribute("role"),(X.content!==G.content||X.allowHTML!==G.allowHTML)&&ze(ft,v.props),G.arrow?xt?X.arrow!==G.arrow&&(at.removeChild(xt),at.appendChild(Je(G.arrow))):at.appendChild(Je(G.arrow)):xt&&at.removeChild(xt)}return{popper:w,onUpdate:U}}Qe.$$tippy=!0;var wi=1,Qt=[],ai=[];function bi(v,w){var S=de(v,Object.assign({},re,{},se(L(w)))),F,U,X,G=!1,yt=!1,at=!1,ft=!1,xt,Ft,$t,St=[],Xt=f(Wt,S.interactiveDebounce),it,gt=wi++,_t=null,J=C(S.plugins),st={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},R={id:gt,reference:v,popper:P(),popperInstance:_t,props:S,state:st,plugins:J,clearDelayTimeouts:Ii,setProps:Tn,setContent:Zi,show:Oi,hide:wr,hideWithInteractivity:qi,enable:ii,disable:Me,unmount:qn,destroy:br};if(!S.render)return Xe(!0,"render() function has not been supplied."),R;var _e=S.render(R),ht=_e.popper,Si=_e.onUpdate;ht.setAttribute("data-tippy-root",""),ht.id="tippy-"+R.id,R.popper=ht,v._tippy=R,ht._tippy=R;var ti=J.map(function(I){return I.fn(R)}),Ki=v.hasAttribute("aria-expanded");return jt(),A(),g(),E("onCreate",[R]),S.showOnCreate&&qt(),ht.addEventListener("mouseenter",function(){R.props.interactive&&R.state.isVisible&&R.clearDelayTimeouts()}),ht.addEventListener("mouseleave",function(I){R.props.interactive&&R.props.trigger.indexOf("mouseenter")>=0&&(ei().addEventListener("mousemove",Xt),Xt(I))}),R;function $i(){var I=R.props.touch;return Array.isArray(I)?I:[I,0]}function Hi(){return $i()[0]==="hold"}function Fe(){var I;return!!((I=R.props.render)!=null&&I.$$tippy)}function Ye(){return it||v}function ei(){var I=Ye().parentNode;return I?Dt(I):document}function Rn(){return Oe(ht)}function p(I){return R.state.isMounted&&!R.state.isVisible||N.isTouch||xt&&xt.type==="focus"?0:h(R.props.delay,I?0:1,re.delay)}function g(){ht.style.pointerEvents=R.props.interactive&&R.state.isVisible?"":"none",ht.style.zIndex=""+R.props.zIndex}function E(I,$,Q){if(Q===void 0&&(Q=!0),ti.forEach(function(Et){Et[I]&&Et[I].apply(void 0,$)}),Q){var pt;(pt=R.props)[I].apply(pt,$)}}function O(){var I=R.props.aria;if(I.content){var $="aria-"+I.content,Q=ht.id,pt=m(R.props.triggerTarget||v);pt.forEach(function(Et){var pe=Et.getAttribute($);if(R.state.isVisible)Et.setAttribute($,pe?pe+" "+Q:Q);else{var me=pe&&pe.replace(Q,"").trim();me?Et.setAttribute($,me):Et.removeAttribute($)}})}}function A(){if(!(Ki||!R.props.aria.expanded)){var I=m(R.props.triggerTarget||v);I.forEach(function($){R.props.interactive?$.setAttribute("aria-expanded",R.state.isVisible&&$===Ye()?"true":"false"):$.removeAttribute("aria-expanded")})}}function k(){ei().removeEventListener("mousemove",Xt),Qt=Qt.filter(function(I){return I!==Xt})}function B(I){if(!(N.isTouch&&(at||I.type==="mousedown"))&&!(R.props.interactive&&ht.contains(I.target))){if(Ye().contains(I.target)){if(N.isTouch||R.state.isVisible&&R.props.trigger.indexOf("click")>=0)return}else E("onClickOutside",[R,I]);R.props.hideOnClick===!0&&(R.clearDelayTimeouts(),R.hide(),yt=!0,setTimeout(function(){yt=!1}),R.state.isMounted||Y())}}function j(){at=!0}function K(){at=!1}function ot(){var I=ei();I.addEventListener("mousedown",B,!0),I.addEventListener("touchend",B,l),I.addEventListener("touchstart",K,l),I.addEventListener("touchmove",j,l)}function Y(){var I=ei();I.removeEventListener("mousedown",B,!0),I.removeEventListener("touchend",B,l),I.removeEventListener("touchstart",K,l),I.removeEventListener("touchmove",j,l)}function Mt(I,$){It(I,function(){!R.state.isVisible&&ht.parentNode&&ht.parentNode.contains(ht)&&$()})}function Yt(I,$){It(I,$)}function It(I,$){var Q=Rn().box;function pt(Et){Et.target===Q&&(Z(Q,"remove",pt),$())}if(I===0)return $();Z(Q,"remove",Ft),Z(Q,"add",pt),Ft=pt}function Ct(I,$,Q){Q===void 0&&(Q=!1);var pt=m(R.props.triggerTarget||v);pt.forEach(function(Et){Et.addEventListener(I,$,Q),St.push({node:Et,eventType:I,handler:$,options:Q})})}function jt(){Hi()&&(Ct("touchstart",Ht,{passive:!0}),Ct("touchend",Zt,{passive:!0})),y(R.props.trigger).forEach(function(I){if(I!=="manual")switch(Ct(I,Ht),I){case"mouseenter":Ct("mouseleave",Zt);break;case"focus":Ct(Ot?"focusout":"blur",lt);break;case"focusin":Ct("focusout",lt);break}})}function Rt(){St.forEach(function(I){var $=I.node,Q=I.eventType,pt=I.handler,Et=I.options;$.removeEventListener(Q,pt,Et)}),St=[]}function Ht(I){var $,Q=!1;if(!(!R.state.isEnabled||Nt(I)||yt)){var pt=(($=xt)==null?void 0:$.type)==="focus";xt=I,it=I.currentTarget,A(),!R.state.isVisible&&z(I)&&Qt.forEach(function(Et){return Et(I)}),I.type==="click"&&(R.props.trigger.indexOf("mouseenter")<0||G)&&R.props.hideOnClick!==!1&&R.state.isVisible?Q=!0:qt(I),I.type==="click"&&(G=!Q),Q&&!pt&&te(I)}}function Wt(I){var $=I.target,Q=Ye().contains($)||ht.contains($);if(!(I.type==="mousemove"&&Q)){var pt=oe().concat(ht).map(function(Et){var pe,me=Et._tippy,ui=(pe=me.popperInstance)==null?void 0:pe.state;return ui?{popperRect:Et.getBoundingClientRect(),popperState:ui,props:S}:null}).filter(Boolean);H(pt,I)&&(k(),te(I))}}function Zt(I){var $=Nt(I)||R.props.trigger.indexOf("click")>=0&&G;if(!$){if(R.props.interactive){R.hideWithInteractivity(I);return}te(I)}}function lt(I){R.props.trigger.indexOf("focusin")<0&&I.target!==Ye()||R.props.interactive&&I.relatedTarget&&ht.contains(I.relatedTarget)||te(I)}function Nt(I){return N.isTouch?Hi()!==I.type.indexOf("touch")>=0:!1}function Pt(){Vt();var I=R.props,$=I.popperOptions,Q=I.placement,pt=I.offset,Et=I.getReferenceClientRect,pe=I.moveTransition,me=Fe()?Oe(ht).arrow:null,ui=Et?{getBoundingClientRect:Et,contextElement:Et.contextElement||Ye()}:v,Rr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Sn){var Ji=Sn.state;if(Fe()){var mo=Rn(),Qi=mo.box;["placement","reference-hidden","escaped"].forEach(function(In){In==="placement"?Qi.setAttribute("data-placement",Ji.placement):Ji.attributes.popper["data-popper-"+In]?Qi.setAttribute("data-"+In,""):Qi.removeAttribute("data-"+In)}),Ji.attributes.popper={}}}},di=[{name:"offset",options:{offset:pt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!pe}},Rr];Fe()&&me&&di.push({name:"arrow",options:{element:me,padding:3}}),di.push.apply(di,($==null?void 0:$.modifiers)||[]),R.popperInstance=t.createPopper(ui,ht,Object.assign({},$,{placement:Q,onFirstUpdate:$t,modifiers:di}))}function Vt(){R.popperInstance&&(R.popperInstance.destroy(),R.popperInstance=null)}function zt(){var I=R.props.appendTo,$,Q=Ye();R.props.interactive&&I===re.appendTo||I==="parent"?$=Q.parentNode:$=d(I,[Q]),$.contains(ht)||$.appendChild(ht),Pt(),Ee(R.props.interactive&&I===re.appendTo&&Q.nextElementSibling!==ht,["Interactive tippy element may not be accessible via keyboard","navigation because it is not directly after the reference element","in the DOM source order.",`

`,"Using a wrapper <div> or <span> tag around the reference element","solves this by creating a new parentNode context.",`

`,"Specifying `appendTo: document.body` silences this warning, but it","assumes you are using a focus management solution to handle","keyboard navigation.",`

`,"See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity"].join(" "))}function oe(){return T(ht.querySelectorAll("[data-tippy-root]"))}function qt(I){R.clearDelayTimeouts(),I&&E("onTrigger",[R,I]),ot();var $=p(!0),Q=$i(),pt=Q[0],Et=Q[1];N.isTouch&&pt==="hold"&&Et&&($=Et),$?F=setTimeout(function(){R.show()},$):R.show()}function te(I){if(R.clearDelayTimeouts(),E("onUntrigger",[R,I]),!R.state.isVisible){Y();return}if(!(R.props.trigger.indexOf("mouseenter")>=0&&R.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(I.type)>=0&&G)){var $=p(!1);$?U=setTimeout(function(){R.state.isVisible&&R.hide()},$):X=requestAnimationFrame(function(){R.hide()})}}function ii(){R.state.isEnabled=!0}function Me(){R.hide(),R.state.isEnabled=!1}function Ii(){clearTimeout(F),clearTimeout(U),cancelAnimationFrame(X)}function Tn(I){if(Ee(R.state.isDestroyed,Ie("setProps")),!R.state.isDestroyed){E("onBeforeUpdate",[R,I]),Rt();var $=R.props,Q=de(v,Object.assign({},R.props,{},I,{ignoreAttributes:!0}));R.props=Q,jt(),$.interactiveDebounce!==Q.interactiveDebounce&&(k(),Xt=f(Wt,Q.interactiveDebounce)),$.triggerTarget&&!Q.triggerTarget?m($.triggerTarget).forEach(function(pt){pt.removeAttribute("aria-expanded")}):Q.triggerTarget&&v.removeAttribute("aria-expanded"),A(),g(),Si&&Si($,Q),R.popperInstance&&(Pt(),oe().forEach(function(pt){requestAnimationFrame(pt._tippy.popperInstance.forceUpdate)})),E("onAfterUpdate",[R,I])}}function Zi(I){R.setProps({content:I})}function Oi(){Ee(R.state.isDestroyed,Ie("show"));var I=R.state.isVisible,$=R.state.isDestroyed,Q=!R.state.isEnabled,pt=N.isTouch&&!R.props.touch,Et=h(R.props.duration,0,re.duration);if(!(I||$||Q||pt)&&!Ye().hasAttribute("disabled")&&(E("onShow",[R],!1),R.props.onShow(R)!==!1)){if(R.state.isVisible=!0,Fe()&&(ht.style.visibility="visible"),g(),ot(),R.state.isMounted||(ht.style.transition="none"),Fe()){var pe=Rn(),me=pe.box,ui=pe.content;rt([me,ui],0)}$t=function(){var di;if(!(!R.state.isVisible||ft)){if(ft=!0,ht.offsetHeight,ht.style.transition=R.props.moveTransition,Fe()&&R.props.animation){var Jn=Rn(),Sn=Jn.box,Ji=Jn.content;rt([Sn,Ji],Et),q([Sn,Ji],"visible")}O(),A(),x(ai,R),(di=R.popperInstance)==null||di.forceUpdate(),R.state.isMounted=!0,E("onMount",[R]),R.props.animation&&Fe()&&Yt(Et,function(){R.state.isShown=!0,E("onShown",[R])})}},zt()}}function wr(){Ee(R.state.isDestroyed,Ie("hide"));var I=!R.state.isVisible,$=R.state.isDestroyed,Q=!R.state.isEnabled,pt=h(R.props.duration,1,re.duration);if(!(I||$||Q)&&(E("onHide",[R],!1),R.props.onHide(R)!==!1)){if(R.state.isVisible=!1,R.state.isShown=!1,ft=!1,G=!1,Fe()&&(ht.style.visibility="hidden"),k(),Y(),g(),Fe()){var Et=Rn(),pe=Et.box,me=Et.content;R.props.animation&&(rt([pe,me],pt),q([pe,me],"hidden"))}O(),A(),R.props.animation?Fe()&&Mt(pt,R.unmount):R.unmount()}}function qi(I){Ee(R.state.isDestroyed,Ie("hideWithInteractivity")),ei().addEventListener("mousemove",Xt),x(Qt,Xt),Xt(I)}function qn(){Ee(R.state.isDestroyed,Ie("unmount")),R.state.isVisible&&R.hide(),R.state.isMounted&&(Vt(),oe().forEach(function(I){I._tippy.unmount()}),ht.parentNode&&ht.parentNode.removeChild(ht),ai=ai.filter(function(I){return I!==R}),R.state.isMounted=!1,E("onHidden",[R]))}function br(){Ee(R.state.isDestroyed,Ie("destroy")),!R.state.isDestroyed&&(R.clearDelayTimeouts(),R.unmount(),Rt(),delete v._tippy,R.state.isDestroyed=!0,E("onDestroy",[R]))}}function je(v,w){w===void 0&&(w={});var S=re.plugins.concat(w.plugins||[]);ue(v),Kt(w,S),M();var F=Object.assign({},w,{plugins:S}),U=ct(v);{var X=D(F.content),G=U.length>1;Ee(X&&G,["tippy() was passed an Element as the `content` prop, but more than","one tippy instance was created by this invocation. This means the","content element will only be appended to the last tippy instance.",`

`,"Instead, pass the .innerHTML of the element, or use a function that","returns a cloned version of the element instead.",`

`,`1) content: element.innerHTML
`,"2) content: () => element.cloneNode(true)"].join(" "))}var yt=U.reduce(function(at,ft){var xt=ft&&bi(ft,F);return xt&&at.push(xt),at},[]);return D(v)?yt[0]:yt}je.defaultProps=re,je.setDefaultProps=Bi,je.currentInput=N;var Cn=function(w){var S=w===void 0?{}:w,F=S.exclude,U=S.duration;ai.forEach(function(X){var G=!1;if(F&&(G=V(F)?X.reference===F:X.popper===F.popper),!G){var yt=X.props.duration;X.setProps({duration:U}),X.hide(),X.state.isDestroyed||X.setProps({duration:yt})}})},wn=Object.assign({},t.applyStyles,{effect:function(w){var S=w.state,F={popper:{position:S.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(S.elements.popper.style,F.popper),S.styles=F,S.elements.arrow&&Object.assign(S.elements.arrow.style,F.arrow)}}),Yi=function(w,S){var F;S===void 0&&(S={}),Xe(!Array.isArray(w),["The first argument passed to createSingleton() must be an array of","tippy instances. The passed value was",String(w)].join(" "));var U=w,X=[],G,yt=S.overrides,at=[],ft=!1;function xt(){X=U.map(function(J){return J.reference})}function Ft(J){U.forEach(function(st){J?st.enable():st.disable()})}function $t(J){return U.map(function(st){var R=st.setProps;return st.setProps=function(_e){R(_e),st.reference===G&&J.setProps(_e)},function(){st.setProps=R}})}function St(J,st){var R=X.indexOf(st);if(st!==G){G=st;var _e=(yt||[]).concat("content").reduce(function(ht,Si){return ht[Si]=U[R].props[Si],ht},{});J.setProps(Object.assign({},_e,{getReferenceClientRect:typeof _e.getReferenceClientRect=="function"?_e.getReferenceClientRect:function(){return st.getBoundingClientRect()}}))}}Ft(!1),xt();var Xt={fn:function(){return{onDestroy:function(){Ft(!0)},onHidden:function(){G=null},onClickOutside:function(R){R.props.showOnCreate&&!ft&&(ft=!0,G=null)},onShow:function(R){R.props.showOnCreate&&!ft&&(ft=!0,St(R,X[0]))},onTrigger:function(R,_e){St(R,_e.currentTarget)}}}},it=je(P(),Object.assign({},_(S,["overrides"]),{plugins:[Xt].concat(S.plugins||[]),triggerTarget:X,popperOptions:Object.assign({},S.popperOptions,{modifiers:[].concat(((F=S.popperOptions)==null?void 0:F.modifiers)||[],[wn])})})),gt=it.show;it.show=function(J){if(gt(),!G&&J==null)return St(it,X[0]);if(!(G&&J==null)){if(typeof J=="number")return X[J]&&St(it,X[J]);if(U.includes(J)){var st=J.reference;return St(it,st)}if(X.includes(J))return St(it,J)}},it.showNext=function(){var J=X[0];if(!G)return it.show(0);var st=X.indexOf(G);it.show(X[st+1]||J)},it.showPrevious=function(){var J=X[X.length-1];if(!G)return it.show(J);var st=X.indexOf(G),R=X[st-1]||J;it.show(R)};var _t=it.setProps;return it.setProps=function(J){yt=J.overrides||yt,_t(J)},it.setInstances=function(J){Ft(!0),at.forEach(function(st){return st()}),U=J,Ft(!1),xt(),$t(it),it.setProps({triggerTarget:X})},at=$t(it),it},bn={mouseover:"mouseenter",focusin:"focus",click:"click"};function He(v,w){Xe(!(w&&w.target),["You must specity a `target` prop indicating a CSS selector string matching","the target elements that should receive a tippy."].join(" "));var S=[],F=[],U=!1,X=w.target,G=_(w,["target"]),yt=Object.assign({},G,{trigger:"manual",touch:!1}),at=Object.assign({},G,{showOnCreate:!0}),ft=je(v,yt),xt=m(ft);function Ft(gt){if(!(!gt.target||U)){var _t=gt.target.closest(X);if(_t){var J=_t.getAttribute("data-tippy-trigger")||w.trigger||re.trigger;if(!_t._tippy&&!(gt.type==="touchstart"&&typeof at.touch=="boolean")&&!(gt.type!=="touchstart"&&J.indexOf(bn[gt.type])<0)){var st=je(_t,at);st&&(F=F.concat(st))}}}}function $t(gt,_t,J,st){st===void 0&&(st=!1),gt.addEventListener(_t,J,st),S.push({node:gt,eventType:_t,handler:J,options:st})}function St(gt){var _t=gt.reference;$t(_t,"touchstart",Ft,l),$t(_t,"mouseover",Ft),$t(_t,"focusin",Ft),$t(_t,"click",Ft)}function Xt(){S.forEach(function(gt){var _t=gt.node,J=gt.eventType,st=gt.handler,R=gt.options;_t.removeEventListener(J,st,R)}),S=[]}function it(gt){var _t=gt.destroy,J=gt.enable,st=gt.disable;gt.destroy=function(R){R===void 0&&(R=!0),R&&F.forEach(function(_e){_e.destroy()}),F=[],Xt(),_t()},gt.enable=function(){J(),F.forEach(function(R){return R.enable()}),U=!1},gt.disable=function(){st(),F.forEach(function(R){return R.disable()}),U=!0},St(gt)}return xt.forEach(it),ft}var li={name:"animateFill",defaultValue:!1,fn:function(w){var S;if(!((S=w.props.render)!=null&&S.$$tippy))return Xe(w.props.animateFill,"The `animateFill` plugin requires the default render function."),{};var F=Oe(w.popper),U=F.box,X=F.content,G=w.props.animateFill?Ri():null;return{onCreate:function(){G&&(U.insertBefore(G,U.firstElementChild),U.setAttribute("data-animatefill",""),U.style.overflow="hidden",w.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(G){var at=U.style.transitionDuration,ft=Number(at.replace("ms",""));X.style.transitionDelay=Math.round(ft/10)+"ms",G.style.transitionDuration=at,q([G],"visible")}},onShow:function(){G&&(G.style.transitionDuration="0ms")},onHide:function(){G&&q([G],"hidden")}}}};function Ri(){var v=P();return v.className=s,q([v],"hidden"),v}var Ze={clientX:0,clientY:0},ci=[];function Ti(v){var w=v.clientX,S=v.clientY;Ze={clientX:w,clientY:S}}function ae(v){v.addEventListener("mousemove",Ti)}function hi(v){v.removeEventListener("mousemove",Ti)}var we={name:"followCursor",defaultValue:!1,fn:function(w){var S=w.reference,F=Dt(w.props.triggerTarget||S),U=!1,X=!1,G=!0,yt=w.props;function at(){return w.props.followCursor==="initial"&&w.state.isVisible}function ft(){F.addEventListener("mousemove",$t)}function xt(){F.removeEventListener("mousemove",$t)}function Ft(){U=!0,w.setProps({getReferenceClientRect:null}),U=!1}function $t(it){var gt=it.target?S.contains(it.target):!0,_t=w.props.followCursor,J=it.clientX,st=it.clientY,R=S.getBoundingClientRect(),_e=J-R.left,ht=st-R.top;(gt||!w.props.interactive)&&w.setProps({getReferenceClientRect:function(){var ti=S.getBoundingClientRect(),Ki=J,$i=st;_t==="initial"&&(Ki=ti.left+_e,$i=ti.top+ht);var Hi=_t==="horizontal"?ti.top:$i,Fe=_t==="vertical"?ti.right:Ki,Ye=_t==="horizontal"?ti.bottom:$i,ei=_t==="vertical"?ti.left:Ki;return{width:Fe-ei,height:Ye-Hi,top:Hi,right:Fe,bottom:Ye,left:ei}}})}function St(){w.props.followCursor&&(ci.push({instance:w,doc:F}),ae(F))}function Xt(){ci=ci.filter(function(it){return it.instance!==w}),ci.filter(function(it){return it.doc===F}).length===0&&hi(F)}return{onCreate:St,onDestroy:Xt,onBeforeUpdate:function(){yt=w.props},onAfterUpdate:function(gt,_t){var J=_t.followCursor;U||J!==void 0&&yt.followCursor!==J&&(Xt(),J?(St(),w.state.isMounted&&!X&&!at()&&ft()):(xt(),Ft()))},onMount:function(){w.props.followCursor&&!X&&(G&&($t(Ze),G=!1),at()||ft())},onTrigger:function(gt,_t){z(_t)&&(Ze={clientX:_t.clientX,clientY:_t.clientY}),X=_t.type==="focus"},onHidden:function(){w.props.followCursor&&(Ft(),xt(),G=!0)}}}};function Be(v,w){var S;return{popperOptions:Object.assign({},v.popperOptions,{modifiers:[].concat((((S=v.popperOptions)==null?void 0:S.modifiers)||[]).filter(function(F){var U=F.name;return U!==w.name}),[w])})}}var ge={name:"inlinePositioning",defaultValue:!1,fn:function(w){var S=w.reference;function F(){return!!w.props.inlinePositioning}var U,X=-1,G=!1,yt={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function($t){var St=$t.state;F()&&(U!==St.placement&&w.setProps({getReferenceClientRect:function(){return at(St.placement)}}),U=St.placement)}};function at(Ft){return Vi(b(Ft),S.getBoundingClientRect(),T(S.getClientRects()),X)}function ft(Ft){G=!0,w.setProps(Ft),G=!1}function xt(){G||ft(Be(w.props,yt))}return{onCreate:xt,onAfterUpdate:xt,onTrigger:function($t,St){if(z(St)){var Xt=T(w.reference.getClientRects()),it=Xt.find(function(gt){return gt.left-2<=St.clientX&&gt.right+2>=St.clientX&&gt.top-2<=St.clientY&&gt.bottom+2>=St.clientY});X=Xt.indexOf(it)}},onUntrigger:function(){X=-1}}}};function Vi(v,w,S,F){if(S.length<2||v===null)return w;if(S.length===2&&F>=0&&S[0].left>S[1].right)return S[F]||w;switch(v){case"top":case"bottom":{var U=S[0],X=S[S.length-1],G=v==="top",yt=U.top,at=X.bottom,ft=G?U.left:X.left,xt=G?U.right:X.right,Ft=xt-ft,$t=at-yt;return{top:yt,bottom:at,left:ft,right:xt,width:Ft,height:$t}}case"left":case"right":{var St=Math.min.apply(Math,S.map(function(ht){return ht.left})),Xt=Math.max.apply(Math,S.map(function(ht){return ht.right})),it=S.filter(function(ht){return v==="left"?ht.left===St:ht.right===Xt}),gt=it[0].top,_t=it[it.length-1].bottom,J=St,st=Xt,R=st-J,_e=_t-gt;return{top:gt,bottom:_t,left:J,right:st,width:R,height:_e}}default:return w}}var Ui={name:"sticky",defaultValue:!1,fn:function(w){var S=w.reference,F=w.popper;function U(){return w.popperInstance?w.popperInstance.state.elements.reference:S}function X(ft){return w.props.sticky===!0||w.props.sticky===ft}var G=null,yt=null;function at(){var ft=X("reference")?U().getBoundingClientRect():null,xt=X("popper")?F.getBoundingClientRect():null;(ft&&le(G,ft)||xt&&le(yt,xt))&&w.popperInstance&&w.popperInstance.update(),G=ft,yt=xt,w.state.isMounted&&requestAnimationFrame(at)}return{onMount:function(){w.props.sticky&&at()}}}};function le(v,w){return v&&w?v.top!==w.top||v.right!==w.right||v.bottom!==w.bottom||v.left!==w.left:!0}je.setDefaultProps({render:Qe}),i.animateFill=li,i.createSingleton=Yi,i.default=je,i.delegate=He,i.followCursor=we,i.hideAll=Cn,i.inlinePositioning=ge,i.roundArrow=e,i.sticky=Ui}),Ea=Id(Od()),$0=Id(Od()),H0=i=>{const t={plugins:[]},e=r=>i[i.indexOf(r)+1];if(i.includes("animation")&&(t.animation=e("animation")),i.includes("duration")&&(t.duration=parseInt(e("duration"))),i.includes("delay")){const r=e("delay");t.delay=r.includes("-")?r.split("-").map(s=>parseInt(s)):parseInt(r)}if(i.includes("cursor")){t.plugins.push($0.followCursor);const r=e("cursor");["x","initial"].includes(r)?t.followCursor=r==="x"?"horizontal":"initial":t.followCursor=!0}i.includes("on")&&(t.trigger=e("on")),i.includes("arrowless")&&(t.arrow=!1),i.includes("html")&&(t.allowHTML=!0),i.includes("interactive")&&(t.interactive=!0),i.includes("border")&&t.interactive&&(t.interactiveBorder=parseInt(e("border"))),i.includes("debounce")&&t.interactive&&(t.interactiveDebounce=parseInt(e("debounce"))),i.includes("max-width")&&(t.maxWidth=parseInt(e("max-width"))),i.includes("theme")&&(t.theme=e("theme")),i.includes("placement")&&(t.placement=e("placement"));const n={};return i.includes("no-flip")&&(n.modifiers||(n.modifiers=[]),n.modifiers.push({name:"flip",enabled:!1})),t.popperOptions=n,t};function Ca(i){i.magic("tooltip",t=>(e,n={})=>{const r=n.timeout;delete n.timeout;const s=(0,Ea.default)(t,{content:e,trigger:"manual",...n});s.show(),setTimeout(()=>{s.hide(),setTimeout(()=>s.destroy(),n.duration||300)},r||2e3)}),i.directive("tooltip",(t,{modifiers:e,expression:n},{evaluateLater:r,effect:s})=>{const o=e.length>0?H0(e):{};t.__x_tippy||(t.__x_tippy=(0,Ea.default)(t,o));const a=()=>t.__x_tippy.enable(),l=()=>t.__x_tippy.disable(),c=h=>{h?(a(),t.__x_tippy.setContent(h)):l()};if(e.includes("raw"))c(n);else{const h=r(n);s(()=>{h(u=>{typeof u=="object"?(t.__x_tippy.setProps(u),a()):c(u)})})}})}Ca.defaultProps=i=>(Ea.default.setDefaultProps(i),Ca);var Z0=Ca,q0=Z0;const J0=()=>{const i=`
            <div class="d-flex justify-content-center align-items-center" style="height: 100vh" >
                <div class="spinner-border" id="spinner" role="status" x-show="$store.loadIndicator.show">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        `;var t=document.getElementById("map");t.insertAdjacentHTML("afterend",i)},Q0=async()=>{Ue.store("loadIndicator",{show:!0}),J0(),document.addEventListener("showLoading",function(i){console.debug("show loading triggered"),Ue.store("loadIndicator").show=!0}),document.addEventListener("hideLoading",function(i){console.debug("hide loading triggered"),Ue.store("loadIndicator").show=!1})};function tx(i){let t=()=>{let e,n;try{n=localStorage}catch(r){console.error(r),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let s=new Map;n={getItem:s.get.bind(s),setItem:s.set.bind(s)}}return i.interceptor((r,s,o,a,l)=>{let c=e||`_x_${a}`,h=Hc(c,n)?Zc(c,n):r;return o(h),i.effect(()=>{let u=s();qc(c,u,n),o(u)}),h},r=>{r.as=s=>(e=s,r),r.using=s=>(n=s,r)})};Object.defineProperty(i,"$persist",{get:()=>t()}),i.magic("persist",t),i.persist=(e,{get:n,set:r},s=localStorage)=>{let o=Hc(e,s)?Zc(e,s):n();r(o),i.effect(()=>{let a=n();qc(e,a,s),r(a)})}}function Hc(i,t){return t.getItem(i)!==null}function Zc(i,t){return JSON.parse(t.getItem(i,t))}function qc(i,t,e){e.setItem(i,JSON.stringify(t))}var ex=tx;window.Alpine=Ue;Ue.plugin(ex);Ue.plugin(q0);Ue.start();Q0();const ko=jg();sx();document.addEventListener("featureMaplayersFinished",rx);async function ix(){try{const i=cu(Fl,Dl,!0);return await Promise.all(i),console.log("-- Finished loading all parent components"),i.length}catch(i){return console.error("Error in loading parent components:",i),0}}async function nx(){try{const i=cu(Fl,Dl,!1);return await Promise.all(i),console.log("-- Finished loading all non-parent components"),i.length}catch(i){return console.error("Error in loading non-parent components:",i),0}}async function rx(i){const t=await ix(),e=await nx(),n=t+e;console.log(`Total plugins loaded: ${n}`),ox(n)}function sx(){Ue.store("pluginStatus",{registeredPluginsCount:0,mapClickEnabled:!0,registeredPluginNames:ko.join(", "),increasePluginLoadingStatus(){this.registeredPluginsCount++},closeAllOffcanvas(i){ko.forEach(t=>{t!==i&&(Ue.store(t).componentIsActive=!1)})}}),ko.forEach(i=>{Ue.store(i,{componentIsActive:!1})})}function ox(i){Ue.effect(()=>{if(Ue.store("pluginStatus").registeredPluginsCount===i){const t=new Event("allPluginsFinishedLoading");document.dispatchEvent(t),L0("hideLoading",{})}})}export{vd as A,Al as B,s0 as C,xd as D,N0 as E,Y_ as F,k0 as G,G0 as H,dm as I,Kg as J,Fl as K,ca as L,Du as M,Cr as N,dx as O,js as P,Ed as Q,va as S,Td as V,ye as _,j0 as a,vt as b,ki as c,et as d,L0 as e,N_ as f,jg as g,Su as h,Qg as i,lp as j,gp as k,gc as l,Ue as m,xn as n,ie as o,xi as p,A0 as q,fx as r,gx as s,lx as t,ic as u,Dl as v,Wi as w,ux as x,ax as y,h0 as z};
//# sourceMappingURL=index-ae6fee4f.js.map
